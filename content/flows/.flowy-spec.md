# .flowy File Specification

Version: 1.0

## Overview

`.flowy` files are YAML-based flowchart/diagram definitions that can be:
- Rendered statically on `/schematics/[project]` pages
- Loaded interactively in Cashboard for editing
- Version controlled alongside code

## File Structure

```yaml
# metadata
name: "Project Name"
description: "What this flow represents"
type: business | software | hybrid
version: 1
updated: 2026-01-25

# nodes
nodes:
  - id: unique-id
    type: node-type
    label: "Display Label"
    position: [x, y]
    data:
      # type-specific metadata
      handle: "@handcash_handle"
      url: "https://..."
      amount: 1000
      currency: "GBP"

# edges (connections)
edges:
  - id: edge-id          # optional, auto-generated if omitted
    from: source-node-id
    to: target-node-id
    type: edge-type
    label: "Optional label"
    animated: true       # optional, for payment flows
```

## Node Types

### Business Flows
- `revenue` - Income source (YouTube, Stripe, etc.)
- `wallet` - Treasury/wallet
- `splitter` - Distributes funds by percentage
- `shareholder` - Person/entity receiving funds
- `social` - Social media account
- `product` - Product or service
- `subscription` - Recurring revenue

### Software Flows
- `api` - API endpoint
- `database` - Database/storage
- `service` - Microservice/function
- `frontend` - UI component
- `webhook` - Webhook endpoint
- `queue` - Message queue
- `cache` - Cache layer

### Shared
- `trigger` - Event trigger
- `decision` - Conditional branch
- `action` - Generic action
- `note` - Annotation/comment

## Edge Types

- `payment` - Money flow (animated by default)
- `data` - Data flow
- `auth` - Authentication flow
- `event` - Event/trigger
- `dependency` - Depends on
- `reference` - References/links to

## Example: Business Flow

```yaml
name: "Ninja Punk Girls"
description: "Revenue and ownership structure"
type: business
version: 1
updated: 2026-01-25

nodes:
  - id: yt-revenue
    type: revenue
    label: "YouTube Revenue"
    position: [100, 100]
    data:
      platform: youtube
      url: "https://youtube.com/@ninjapunkgirls"

  - id: merch-revenue
    type: revenue
    label: "Merch Sales"
    position: [300, 100]
    data:
      platform: shopify

  - id: treasury
    type: wallet
    label: "NPG Treasury"
    position: [200, 250]
    data:
      handle: "@ninjapunkgirls"

  - id: split
    type: splitter
    label: "Quarterly Distribution"
    position: [200, 400]

  - id: founder
    type: shareholder
    label: "Founder (60%)"
    position: [100, 550]
    data:
      percentage: 60

  - id: investors
    type: shareholder
    label: "Token Holders (40%)"
    position: [300, 550]
    data:
      percentage: 40

edges:
  - from: yt-revenue
    to: treasury
    type: payment

  - from: merch-revenue
    to: treasury
    type: payment

  - from: treasury
    to: split
    type: payment

  - from: split
    to: founder
    type: payment
    label: "60%"

  - from: split
    to: investors
    type: payment
    label: "40%"
```

## Example: Software Flow

```yaml
name: "Bitcoin Spreadsheets"
description: "Application architecture"
type: software
version: 1
updated: 2026-01-25

nodes:
  - id: frontend
    type: frontend
    label: "React App"
    position: [200, 100]

  - id: api
    type: api
    label: "Next.js API"
    position: [200, 250]

  - id: auth
    type: service
    label: "HandCash Auth"
    position: [50, 250]

  - id: blockchain
    type: database
    label: "BSV Blockchain"
    position: [350, 250]

  - id: storage
    type: database
    label: "User Data (On-Chain)"
    position: [200, 400]

edges:
  - from: frontend
    to: api
    type: data

  - from: api
    to: auth
    type: auth

  - from: api
    to: blockchain
    type: data

  - from: blockchain
    to: storage
    type: data
```
