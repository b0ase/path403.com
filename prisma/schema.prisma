generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["auth", "public"]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model audit_log_entries {
  instance_id String?   @db.Uuid
  id          String    @id @db.Uuid
  payload     Json?     @db.Json
  created_at  DateTime? @db.Timestamptz(6)
  ip_address  String    @default("") @db.VarChar(64)

  @@index([instance_id], map: "audit_logs_instance_id_idx")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flow_state {
  id                     String                @id @db.Uuid
  user_id                String?               @db.Uuid
  auth_code              String
  code_challenge_method  code_challenge_method
  code_challenge         String
  provider_type          String
  provider_access_token  String?
  provider_refresh_token String?
  created_at             DateTime?             @db.Timestamptz(6)
  updated_at             DateTime?             @db.Timestamptz(6)
  authentication_method  String
  auth_code_issued_at    DateTime?             @db.Timestamptz(6)
  saml_relay_states      saml_relay_states[]

  @@index([created_at(sort: Desc)])
  @@index([auth_code], map: "idx_auth_code")
  @@index([user_id, authentication_method], map: "idx_user_id_auth_method")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model identities {
  provider_id     String
  user_id         String    @db.Uuid
  identity_data   Json
  provider        String
  last_sign_in_at DateTime? @db.Timestamptz(6)
  created_at      DateTime? @db.Timestamptz(6)
  updated_at      DateTime? @db.Timestamptz(6)
  email           String?   @default(dbgenerated("lower((identity_data ->> 'email'::text))"))
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  users           users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([provider_id, provider], map: "identities_provider_id_provider_unique")
  @@index([email])
  @@index([user_id])
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model instances {
  id              String    @id @db.Uuid
  uuid            String?   @db.Uuid
  raw_base_config String?
  created_at      DateTime? @db.Timestamptz(6)
  updated_at      DateTime? @db.Timestamptz(6)

  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model mfa_amr_claims {
  session_id            String   @db.Uuid
  created_at            DateTime @db.Timestamptz(6)
  updated_at            DateTime @db.Timestamptz(6)
  authentication_method String
  id                    String   @id(map: "amr_id_pk") @db.Uuid
  sessions              sessions @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([session_id, authentication_method], map: "mfa_amr_claims_session_id_authentication_method_pkey")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model mfa_challenges {
  id                     String      @id @db.Uuid
  factor_id              String      @db.Uuid
  created_at             DateTime    @db.Timestamptz(6)
  verified_at            DateTime?   @db.Timestamptz(6)
  ip_address             String      @db.Inet
  otp_code               String?
  web_authn_session_data Json?
  mfa_factors            mfa_factors @relation(fields: [factor_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "mfa_challenges_auth_factor_id_fkey")

  @@index([created_at(sort: Desc)], map: "mfa_challenge_created_at_idx")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model mfa_factors {
  id                           String           @id @db.Uuid
  user_id                      String           @db.Uuid
  friendly_name                String?
  factor_type                  factor_type
  status                       factor_status
  created_at                   DateTime         @db.Timestamptz(6)
  updated_at                   DateTime         @db.Timestamptz(6)
  secret                       String?
  phone                        String?
  last_challenged_at           DateTime?        @unique @db.Timestamptz(6)
  web_authn_credential         Json?
  web_authn_aaguid             String?          @db.Uuid
  last_webauthn_challenge_data Json?
  mfa_challenges               mfa_challenges[]
  users                        users            @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, phone], map: "unique_phone_factor_per_user")
  @@index([user_id, created_at], map: "factor_id_created_at_idx")
  @@index([user_id])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model oauth_authorizations {
  id                    String                     @id @db.Uuid
  authorization_id      String                     @unique
  client_id             String                     @db.Uuid
  user_id               String?                    @db.Uuid
  redirect_uri          String
  scope                 String
  state                 String?
  resource              String?
  code_challenge        String?
  code_challenge_method code_challenge_method?
  response_type         oauth_response_type        @default(code)
  status                oauth_authorization_status @default(pending)
  authorization_code    String?                    @unique
  created_at            DateTime                   @default(now()) @db.Timestamptz(6)
  expires_at            DateTime                   @default(dbgenerated("(now() + '00:03:00'::interval)")) @db.Timestamptz(6)
  approved_at           DateTime?                  @db.Timestamptz(6)
  nonce                 String?
  oauth_clients         oauth_clients              @relation(fields: [client_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                 users?                     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model oauth_client_states {
  id            String   @id @db.Uuid
  provider_type String
  code_verifier String?
  created_at    DateTime @db.Timestamptz(6)

  @@index([created_at], map: "idx_oauth_client_states_created_at")
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model oauth_clients {
  id                   String                  @id @db.Uuid
  client_secret_hash   String?
  registration_type    oauth_registration_type
  redirect_uris        String
  grant_types          String
  client_name          String?
  client_uri           String?
  logo_uri             String?
  created_at           DateTime                @default(now()) @db.Timestamptz(6)
  updated_at           DateTime                @default(now()) @db.Timestamptz(6)
  deleted_at           DateTime?               @db.Timestamptz(6)
  client_type          oauth_client_type       @default(confidential)
  oauth_authorizations oauth_authorizations[]
  oauth_consents       oauth_consents[]
  sessions             sessions[]

  @@index([deleted_at])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model oauth_consents {
  id            String        @id @db.Uuid
  user_id       String        @db.Uuid
  client_id     String        @db.Uuid
  scopes        String
  granted_at    DateTime      @default(now()) @db.Timestamptz(6)
  revoked_at    DateTime?     @db.Timestamptz(6)
  oauth_clients oauth_clients @relation(fields: [client_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users         users         @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, client_id], map: "oauth_consents_user_client_unique")
  @@index([user_id, granted_at(sort: Desc)], map: "oauth_consents_user_order_idx")
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model one_time_tokens {
  id         String              @id @db.Uuid
  user_id    String              @db.Uuid
  token_type one_time_token_type
  token_hash String
  relates_to String
  created_at DateTime            @default(now()) @db.Timestamp(6)
  updated_at DateTime            @default(now()) @db.Timestamp(6)
  users      users               @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, token_type])
  @@index([relates_to], map: "one_time_tokens_relates_to_hash_idx", type: Hash)
  @@index([token_hash], map: "one_time_tokens_token_hash_hash_idx", type: Hash)
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model refresh_tokens {
  instance_id String?   @db.Uuid
  id          BigInt    @id @default(autoincrement())
  token       String?   @unique(map: "refresh_tokens_token_unique") @db.VarChar(255)
  user_id     String?   @db.VarChar(255)
  revoked     Boolean?
  created_at  DateTime? @db.Timestamptz(6)
  updated_at  DateTime? @db.Timestamptz(6)
  parent      String?   @db.VarChar(255)
  session_id  String?   @db.Uuid
  sessions    sessions? @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([instance_id])
  @@index([instance_id, user_id])
  @@index([parent])
  @@index([session_id, revoked])
  @@index([updated_at(sort: Desc)])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model saml_providers {
  id                String        @id @db.Uuid
  sso_provider_id   String        @db.Uuid
  entity_id         String        @unique
  metadata_xml      String
  metadata_url      String?
  attribute_mapping Json?
  created_at        DateTime?     @db.Timestamptz(6)
  updated_at        DateTime?     @db.Timestamptz(6)
  name_id_format    String?
  sso_providers     sso_providers @relation(fields: [sso_provider_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([sso_provider_id])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model saml_relay_states {
  id              String        @id @db.Uuid
  sso_provider_id String        @db.Uuid
  request_id      String
  for_email       String?
  redirect_to     String?
  created_at      DateTime?     @db.Timestamptz(6)
  updated_at      DateTime?     @db.Timestamptz(6)
  flow_state_id   String?       @db.Uuid
  flow_state      flow_state?   @relation(fields: [flow_state_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  sso_providers   sso_providers @relation(fields: [sso_provider_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at(sort: Desc)])
  @@index([for_email])
  @@index([sso_provider_id])
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model schema_migrations {
  version String @id @db.VarChar(255)

  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sessions {
  id                     String           @id @db.Uuid
  user_id                String           @db.Uuid
  created_at             DateTime?        @db.Timestamptz(6)
  updated_at             DateTime?        @db.Timestamptz(6)
  factor_id              String?          @db.Uuid
  aal                    aal_level?
  not_after              DateTime?        @db.Timestamptz(6)
  refreshed_at           DateTime?        @db.Timestamp(6)
  user_agent             String?
  ip                     String?          @db.Inet
  tag                    String?
  oauth_client_id        String?          @db.Uuid
  refresh_token_hmac_key String?
  refresh_token_counter  BigInt?
  scopes                 String?
  mfa_amr_claims         mfa_amr_claims[]
  refresh_tokens         refresh_tokens[]
  oauth_clients          oauth_clients?   @relation(fields: [oauth_client_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                  users            @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([not_after(sort: Desc)])
  @@index([oauth_client_id])
  @@index([user_id])
  @@index([user_id, created_at], map: "user_id_created_at_idx")
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model sso_domains {
  id              String        @id @db.Uuid
  sso_provider_id String        @db.Uuid
  domain          String
  created_at      DateTime?     @db.Timestamptz(6)
  updated_at      DateTime?     @db.Timestamptz(6)
  sso_providers   sso_providers @relation(fields: [sso_provider_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([sso_provider_id])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model sso_providers {
  id                String              @id @db.Uuid
  resource_id       String?
  created_at        DateTime?           @db.Timestamptz(6)
  updated_at        DateTime?           @db.Timestamptz(6)
  disabled          Boolean?
  saml_providers    saml_providers[]
  saml_relay_states saml_relay_states[]
  sso_domains       sso_domains[]

  @@index([resource_id], map: "sso_providers_resource_id_pattern_idx")
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model users {
  instance_id                                                       String?                    @db.Uuid
  id                                                                String                     @id @db.Uuid
  aud                                                               String?                    @db.VarChar(255)
  role                                                              String?                    @db.VarChar(255)
  email                                                             String?                    @db.VarChar(255)
  encrypted_password                                                String?                    @db.VarChar(255)
  email_confirmed_at                                                DateTime?                  @db.Timestamptz(6)
  invited_at                                                        DateTime?                  @db.Timestamptz(6)
  confirmation_token                                                String?                    @db.VarChar(255)
  confirmation_sent_at                                              DateTime?                  @db.Timestamptz(6)
  recovery_token                                                    String?                    @db.VarChar(255)
  recovery_sent_at                                                  DateTime?                  @db.Timestamptz(6)
  email_change_token_new                                            String?                    @db.VarChar(255)
  email_change                                                      String?                    @db.VarChar(255)
  email_change_sent_at                                              DateTime?                  @db.Timestamptz(6)
  last_sign_in_at                                                   DateTime?                  @db.Timestamptz(6)
  raw_app_meta_data                                                 Json?
  raw_user_meta_data                                                Json?
  is_super_admin                                                    Boolean?
  created_at                                                        DateTime?                  @db.Timestamptz(6)
  updated_at                                                        DateTime?                  @db.Timestamptz(6)
  phone                                                             String?                    @unique
  phone_confirmed_at                                                DateTime?                  @db.Timestamptz(6)
  phone_change                                                      String?                    @default("")
  phone_change_token                                                String?                    @default("") @db.VarChar(255)
  phone_change_sent_at                                              DateTime?                  @db.Timestamptz(6)
  confirmed_at                                                      DateTime?                  @default(dbgenerated("LEAST(email_confirmed_at, phone_confirmed_at)")) @db.Timestamptz(6)
  email_change_token_current                                        String?                    @default("") @db.VarChar(255)
  email_change_confirm_status                                       Int?                       @default(0) @db.SmallInt
  banned_until                                                      DateTime?                  @db.Timestamptz(6)
  reauthentication_token                                            String?                    @default("") @db.VarChar(255)
  reauthentication_sent_at                                          DateTime?                  @db.Timestamptz(6)
  is_sso_user                                                       Boolean                    @default(false)
  deleted_at                                                        DateTime?                  @db.Timestamptz(6)
  is_anonymous                                                      Boolean                    @default(false)
  identities                                                        identities[]
  mfa_factors                                                       mfa_factors[]
  oauth_authorizations                                              oauth_authorizations[]
  oauth_consents                                                    oauth_consents[]
  one_time_tokens                                                   one_time_tokens[]
  sessions                                                          sessions[]
  ai_agent_config                                                   ai_agent_config[]
  ai_usage_logs                                                     ai_usage_logs[]
  api_keys                                                          api_keys[]
  automation_usage                                                  automation_usage[]
  cap_table_entries                                                 cap_table_entries[]
  certificates                                                      certificates[]
  clients                                                           clients[]
  companies                                                         companies[]
  developer_token_holdings                                          developer_token_holders[]
  direct_messages_direct_messages_receiver_idTousers                direct_messages[]          @relation("direct_messages_receiver_idTousers")
  direct_messages_direct_messages_sender_idTousers                  direct_messages[]          @relation("direct_messages_sender_idTousers")
  document_signatures                                               document_signatures[]
  encrypted_credentials                                             encrypted_credentials[]
  financial_accounts                                                financial_accounts[]
  identity_tokens                                                   identity_tokens[]
  investor_certifications                                           investor_certifications[]
  knowledgebase_access_log                                          knowledgebase_access_log[]
  knowledgebase_documents_knowledgebase_documents_created_byTousers knowledgebase_documents[]  @relation("knowledgebase_documents_created_byTousers")
  knowledgebase_documents_knowledgebase_documents_updated_byTousers knowledgebase_documents[]  @relation("knowledgebase_documents_updated_byTousers")
  nft_assets                                                        nft_assets[]
  nft_collections                                                   nft_collections[]
  nft_mints                                                         nft_mints[]
  nftbase_files                                                     nftbase_files[]
  profiles                                                          profiles?
  project_members                                                   project_members[]
  projects                                                          projects[]
  soundbase_files                                                   soundbase_files[]
  storybase_files                                                   storybase_files[]
  token_member_registry                                             token_member_registry[]
  token_trades_as_buyer                                             token_trades[]             @relation("token_trades_buyer")
  token_trades_as_seller                                            token_trades[]             @relation("token_trades_seller")
  transaction_categories                                            transaction_categories[]
  transactions                                                      transactions[]
  user_profiles                                                     user_profiles?
  user_signatures                                                   user_signatures[]
  user_subscriptions                                                user_subscriptions[]
  user_team_memberships                                             user_team_memberships[]
  voice_profiles                                                    voice_profiles[]


  @@index([instance_id])
  @@index([is_anonymous])
  @@schema("auth")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Audio {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  filename    String
  url         String
  size        BigInt?
  duration    Float?
  metadata    Json?
  projectSlug String?   @default("cherry")
  createdAt   DateTime? @default(now()) @db.Timestamptz(6)
  updatedAt   DateTime? @default(now()) @db.Timestamptz(6)

  @@schema("public")
}

model AutoBook {
  id              String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title           String
  subject         String
  status          String            @default("DRAFT")
  releaseDate     DateTime?
  researchData    Json?
  content         Json?
  coverUrl        String?
  createdAt       DateTime?         @default(now()) @db.Timestamptz(6)
  updatedAt       DateTime?         @default(now()) @db.Timestamptz(6)
  authorId        String?
  AutoBookChapter AutoBookChapter[]
  AutoBookTask    AutoBookTask[]

  @@index([status])
  @@schema("public")
}

model AutoBookChapter {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  bookId      String    @db.Uuid
  title       String
  description String?
  content     String?
  status      String    @default("DRAFT")
  orderIndex  Int       @default(0)
  createdAt   DateTime? @default(now()) @db.Timestamptz(6)
  updatedAt   DateTime? @default(now()) @db.Timestamptz(6)
  AutoBook    AutoBook  @relation(fields: [bookId], references: [id], onDelete: Cascade)

  @@index([bookId])
  @@schema("public")
}

model AutoBookTask {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  bookId       String    @db.Uuid
  type         String
  status       String    @default("PENDING")
  result       String?
  error        String?
  scheduledFor DateTime? @db.Timestamptz(6)
  completedAt  DateTime? @db.Timestamptz(6)
  createdAt    DateTime? @default(now()) @db.Timestamptz(6)
  updatedAt    DateTime? @default(now()) @db.Timestamptz(6)
  AutoBook     AutoBook  @relation(fields: [bookId], references: [id], onDelete: Cascade)

  @@index([bookId])
  @@index([status])
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Video {
  id             String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  filename       String
  url            String
  size           BigInt?
  type           String?
  metadata       Json?
  duration       Float?
  dimensions     String?
  createdAt      DateTime? @default(now()) @db.Timestamptz(6)
  updatedAt      DateTime? @default(now()) @db.Timestamptz(6)
  framePriceSats Int?      @default(1)
  projectSlug    String?   @default("cherry")

  @@schema("public")
}

model ai_agent_config {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id     String?   @db.Uuid
  config_type String    @db.VarChar(50)
  provider    String?   @db.VarChar(50)
  config_data Json
  is_active   Boolean?  @default(true)
  created_at  DateTime? @default(now()) @db.Timestamptz(6)
  updated_at  DateTime? @default(now()) @db.Timestamptz(6)
  users       users?    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

model ai_usage_logs {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id      String?   @db.Uuid
  service_type String?   @db.VarChar(50)
  provider     String?   @db.VarChar(50)
  request_type String?   @db.VarChar(100)
  tokens_used  Int?
  cost_usd     Decimal?  @db.Decimal(10, 4)
  metadata     Json?
  created_at   DateTime? @default(now()) @db.Timestamptz(6)
  users        users?    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model automation_usage {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id         String    @db.Uuid
  automation_type String
  prompt          String
  credits_used    Int?      @default(1)
  result_url      String?
  metadata        Json?     @default("{}")
  created_at      DateTime? @default(now()) @db.Timestamptz(6)
  updated_at      DateTime? @default(now()) @db.Timestamptz(6)
  users           users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at(sort: Desc)])
  @@index([automation_type], map: "automation_usage_type_idx")
  @@index([user_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model blog_categories {
  id          String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String       @unique
  slug        String       @unique
  description String?
  created_by  String?      @db.Uuid
  created_at  DateTime     @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at  DateTime     @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  profiles    profiles?    @relation(fields: [created_by], references: [id], onUpdate: NoAction)
  blog_posts  blog_posts[]

  @@index([slug], map: "idx_blog_categories_slug")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model blog_posts {
  id                 String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  author_id          String           @db.Uuid
  category_id        String?          @db.Uuid
  title              String
  slug               String           @unique
  excerpt            String?
  content            String
  featured_image_url String?
  tags               String[]
  status             blog_post_status @default(draft)
  published_at       DateTime?        @db.Timestamptz(6)
  allow_comments     Boolean          @default(true)
  view_count         Int              @default(0)
  created_at         DateTime         @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at         DateTime         @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  profiles           profiles         @relation(fields: [author_id], references: [id], onDelete: SetNull, onUpdate: NoAction)
  blog_categories    blog_categories? @relation(fields: [category_id], references: [id], onUpdate: NoAction)

  @@index([author_id], map: "idx_blog_posts_author_id")
  @@index([category_id], map: "idx_blog_posts_category_id")
  @@index([published_at(sort: Desc)], map: "idx_blog_posts_published_at")
  @@index([slug], map: "idx_blog_posts_slug")
  @@index([status], map: "idx_blog_posts_status")
  @@index([tags], map: "idx_blog_posts_tags", type: Gin)
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model boardroom_delegations {
  id               String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  delegator_wallet String
  delegate_wallet  String
  room_id          String?
  token_id         String?
  is_active        Boolean?    @default(true)
  created_at       DateTime    @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  revoked_at       DateTime?   @db.Timestamptz(6)
  chat_rooms       chat_rooms? @relation(fields: [room_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([delegator_wallet, room_id, token_id])
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model boardroom_members {
  id             String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  username       String
  role           String   @default("Member")
  wallet_address String?
  source         String?  @default("website")
  joined_at      DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model boardroom_messages {
  id         String      @id
  room_id    String?
  user_id    String
  username   String
  message    String
  tokens     String[]    @default([])
  created_at DateTime    @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  chat_rooms chat_rooms? @relation(fields: [room_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model boardroom_proposals {
  id                    String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  room_id               String?
  title                 String
  description           String
  proposer_wallet       String
  proposer_name         String?
  voting_type           String            @default("simple")
  options               Json?             @default("[\"Yes\", \"No\"]")
  token_weighted        Boolean?          @default(true)
  required_token        String?
  min_tokens_to_propose Int?              @default(1)
  min_tokens_to_vote    Int?              @default(1)
  starts_at             DateTime?         @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  ends_at               DateTime          @db.Timestamptz(6)
  status                String            @default("active")
  result                Json?
  total_votes           Int?              @default(0)
  total_voting_power    Decimal?          @default(0) @db.Decimal
  created_at            DateTime          @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at            DateTime          @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  chat_rooms            chat_rooms?       @relation(fields: [room_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  boardroom_votes       boardroom_votes[]

  @@index([ends_at], map: "idx_proposals_ends_at")
  @@index([room_id], map: "idx_proposals_room_id")
  @@index([status], map: "idx_proposals_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model boardroom_votes {
  id                  String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  proposal_id         String?              @db.Uuid
  voter_wallet        String
  voter_name          String?
  choice              Int
  voting_power        Decimal              @default(1) @db.Decimal
  created_at          DateTime             @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  boardroom_proposals boardroom_proposals? @relation(fields: [proposal_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([proposal_id, voter_wallet])
  @@index([proposal_id], map: "idx_votes_proposal_id")
  @@index([voter_wallet], map: "idx_votes_voter_wallet")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model cap_table_entries {
  id                       String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token_id                 String         @db.Uuid
  holder_name              String
  holder_email             String?
  holder_user_id           String?        @db.Uuid
  holder_wallet_address    String?
  shares_held              BigInt         @default(0)
  share_certificate_number String?
  acquired_date            DateTime?      @default(dbgenerated("CURRENT_DATE")) @db.Date
  notes                    String?
  created_at               DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?      @default(now()) @db.Timestamptz(6)
  users                    users?         @relation(fields: [holder_user_id], references: [id], onUpdate: NoAction)
  company_tokens           company_tokens @relation(fields: [token_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([token_id], map: "idx_cap_table_token_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model cap_table_settings {
  id                           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token_name                   String?   @default("$MARS")
  token_symbol                 String?   @default("MARS")
  total_supply                 Decimal?  @default(1000000000) @db.Decimal(20, 8)
  circulating_supply           Decimal?  @default(430000000) @db.Decimal(20, 8)
  contract_address             String?
  blockchain_network           String?   @default("ethereum")
  chain_id                     Int?      @default(1)
  company_name                 String?   @default("Marina3D.xyz LTD")
  company_registration_number  String?
  incorporation_date           DateTime? @db.Date
  registered_address           String?
  last_valuation               Decimal?  @db.Decimal(15, 2)
  valuation_date               DateTime? @db.Date
  valuation_currency           String?   @default("GBP")
  auto_calculate_percentages   Boolean?  @default(true)
  require_kyc_for_transfers    Boolean?  @default(true)
  enable_dividend_reinvestment Boolean?  @default(false)
  created_at                   DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at                   DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_by                   String?   @db.Uuid
  profiles                     profiles? @relation(fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model cap_table_shareholders {
  id                                                                                String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  full_name                                                                         String
  email                                                                             String
  phone                                                                             String?
  wallet_address                                                                    String               @unique
  token_balance                                                                     Decimal              @default(0) @db.Decimal(20, 8)
  ownership_percentage                                                              Decimal              @default(0) @db.Decimal(7, 4)
  shareholder_type                                                                  String               @default("individual")
  investment_date                                                                   DateTime?            @db.Timestamptz(6)
  investment_amount                                                                 Decimal?             @db.Decimal(15, 2)
  investment_currency                                                               String?              @default("GBP")
  share_class                                                                       String?              @default("ordinary")
  vesting_start_date                                                                DateTime?            @db.Timestamptz(6)
  vesting_cliff_months                                                              Int?                 @default(0)
  vesting_period_months                                                             Int?                 @default(0)
  vested_tokens                                                                     Decimal?             @default(0) @db.Decimal(20, 8)
  kyc_status                                                                        String?              @default("pending")
  kyc_verified_at                                                                   DateTime?            @db.Timestamptz(6)
  accredited_investor                                                               Boolean?             @default(false)
  address_line_1                                                                    String?
  address_line_2                                                                    String?
  city                                                                              String?
  postal_code                                                                       String?
  country                                                                           String?              @default("United Kingdom")
  notes                                                                             String?
  tags                                                                              String[]
  status                                                                            String?              @default("active")
  is_board_member                                                                   Boolean?             @default(false)
  is_employee                                                                       Boolean?             @default(false)
  created_at                                                                        DateTime             @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at                                                                        DateTime             @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  created_by                                                                        String?              @db.Uuid
  updated_by                                                                        String?              @db.Uuid
  profiles_cap_table_shareholders_created_byToprofiles                              profiles?            @relation("cap_table_shareholders_created_byToprofiles", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  profiles_cap_table_shareholders_updated_byToprofiles                              profiles?            @relation("cap_table_shareholders_updated_byToprofiles", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  dividend_payments                                                                 dividend_payments[]
  token_transactions_token_transactions_from_shareholder_idTocap_table_shareholders token_transactions[] @relation("token_transactions_from_shareholder_idTocap_table_shareholders")
  token_transactions_token_transactions_to_shareholder_idTocap_table_shareholders   token_transactions[] @relation("token_transactions_to_shareholder_idTocap_table_shareholders")
  vesting_schedules                                                                 vesting_schedules[]

  @@index([email], map: "idx_cap_table_shareholders_email")
  @@index([kyc_status], map: "idx_cap_table_shareholders_kyc_status")
  @@index([shareholder_type], map: "idx_cap_table_shareholders_shareholder_type")
  @@index([status], map: "idx_cap_table_shareholders_status")
  @@index([wallet_address], map: "idx_cap_table_shareholders_wallet_address")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model chat_rooms {
  id                    String                  @id
  name                  String
  description           String?
  required_tokens       String[]                @default([])
  created_by_wallet     String?
  is_active             Boolean?                @default(true)
  created_at            DateTime                @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at            DateTime                @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  boardroom_delegations boardroom_delegations[]
  boardroom_messages    boardroom_messages[]
  boardroom_proposals   boardroom_proposals[]

  @@schema("public")
}

model clients {
  id               String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String     @db.Uuid
  name             String
  email            String?
  project_slug     String?
  website          String?
  logo_url         String?
  project_brief    String?
  project_category String?
  status           String?    @default("pending")
  created_at       DateTime?  @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?  @default(now()) @db.Timestamptz(6)
  users            users      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  projects         projects[]

  @@index([user_id], map: "idx_clients_user_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model comments {
  id                String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id           String?             @db.Uuid
  target_id         String              @db.Uuid
  target_type       comment_target_type
  parent_comment_id String?             @db.Uuid
  content           String
  status            comment_status      @default(pending_moderation)
  ip_address        String?             @db.Inet
  user_agent        String?
  created_at        DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at        DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  comments          comments?           @relation("commentsTocomments", fields: [parent_comment_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  other_comments    comments[]          @relation("commentsTocomments")
  profiles          profiles?           @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([parent_comment_id], map: "idx_comments_parent_comment_id")
  @@index([status], map: "idx_comments_status")
  @@index([target_id, target_type], map: "idx_comments_target_id_target_type")
  @@index([user_id], map: "idx_comments_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model companies {
  id                     String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                String           @db.Uuid
  name                   String
  companies_house_number String?
  registered_address     String?
  incorporation_date     DateTime?        @db.Date
  status                 String?          @default("active")
  created_at             DateTime?        @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?        @default(now()) @db.Timestamptz(6)
  unified_user_id        String?          @db.Uuid
  unified_users          unified_users?   @relation(fields: [unified_user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                  users            @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  company_tokens         company_tokens[]

  @@index([unified_user_id], map: "idx_companies_unified_user")
  @@index([user_id], map: "idx_companies_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_tokens {
  id                     String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  company_id             String              @db.Uuid
  symbol                 String
  name                   String
  share_class            String?             @default("Ordinary")
  total_supply           BigInt              @default(0)
  nominal_value          Decimal?            @default(0.01) @db.Decimal(18, 4)
  voting_rights          Boolean?            @default(true)
  dividend_rights        Boolean?            @default(true)
  blockchain             String?
  token_contract_address String?
  is_deployed            Boolean?            @default(false)
  created_at             DateTime?           @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?           @default(now()) @db.Timestamptz(6)
  cap_table_entries      cap_table_entries[]
  companies              companies           @relation(fields: [company_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([company_id, symbol])
  @@index([company_id], map: "idx_company_tokens_company_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model course_lessons {
  id                 String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  module_id          String              @db.Uuid
  title              String
  description        String?
  lesson_order       Int                 @default(0)
  content_type       lesson_content_type
  content_value      Json?
  is_preview_allowed Boolean             @default(false)
  created_at         DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at         DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  course_modules     course_modules      @relation(fields: [module_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([module_id, lesson_order], map: "idx_course_lessons_module_id_lesson_order")
  @@index([module_id], map: "idx_course_lessons_module_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model course_modules {
  id             String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  course_id      String           @db.Uuid
  title          String
  description    String?
  module_order   Int              @default(0)
  created_at     DateTime         @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at     DateTime         @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  course_lessons course_lessons[]
  products       products         @relation(fields: [course_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([course_id, module_order], map: "idx_course_modules_course_id_module_order")
  @@index([course_id], map: "idx_course_modules_course_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model direct_messages {
  id                                       String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  sender_id                                String?  @db.Uuid
  receiver_id                              String?  @db.Uuid
  content                                  String
  is_read                                  Boolean? @default(false)
  created_at                               DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  users_direct_messages_receiver_idTousers users?   @relation("direct_messages_receiver_idTousers", fields: [receiver_id], references: [id], onUpdate: NoAction)
  users_direct_messages_sender_idTousers   users?   @relation("direct_messages_sender_idTousers", fields: [sender_id], references: [id], onUpdate: NoAction)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dividend_distributions {
  id                                                    String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  distribution_name                                     String
  total_amount                                          Decimal             @db.Decimal(15, 2)
  currency                                              String?             @default("GBP")
  record_date                                           DateTime            @db.Date
  payment_date                                          DateTime            @db.Date
  announcement_date                                     DateTime            @db.Date
  per_token_amount                                      Decimal             @db.Decimal(20, 8)
  eligible_tokens                                       Decimal             @db.Decimal(20, 8)
  status                                                String?             @default("announced")
  description                                           String?
  notes                                                 String?
  created_at                                            DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at                                            DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  created_by                                            String?             @db.Uuid
  approved_by                                           String?             @db.Uuid
  approved_at                                           DateTime?           @db.Timestamptz(6)
  profiles_dividend_distributions_approved_byToprofiles profiles?           @relation("dividend_distributions_approved_byToprofiles", fields: [approved_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  profiles_dividend_distributions_created_byToprofiles  profiles?           @relation("dividend_distributions_created_byToprofiles", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  dividend_payments                                     dividend_payments[]

  @@index([record_date], map: "idx_dividend_distributions_record_date")
  @@index([status], map: "idx_dividend_distributions_status")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dividend_payments {
  id                     String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  distribution_id        String                 @db.Uuid
  shareholder_id         String                 @db.Uuid
  eligible_tokens        Decimal                @db.Decimal(20, 8)
  payment_amount         Decimal                @db.Decimal(15, 2)
  currency               String
  payment_method         String?                @default("bank_transfer")
  payment_address        String?
  status                 String?                @default("pending")
  transaction_reference  String?
  payment_date           DateTime?              @db.Timestamptz(6)
  created_at             DateTime               @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at             DateTime               @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  processed_by           String?                @db.Uuid
  dividend_distributions dividend_distributions @relation(fields: [distribution_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  profiles               profiles?              @relation(fields: [processed_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  cap_table_shareholders cap_table_shareholders @relation(fields: [shareholder_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([distribution_id], map: "idx_dividend_payments_distribution_id")
  @@index([shareholder_id], map: "idx_dividend_payments_shareholder_id")
  @@index([status], map: "idx_dividend_payments_status")
  @@schema("public")
}

model encrypted_credentials {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id         String?   @db.Uuid
  provider        String    @db.VarChar(50)
  credential_type String?   @db.VarChar(50)
  encrypted_value String
  is_active       Boolean?  @default(true)
  last_used       DateTime? @db.Timestamptz(6)
  created_at      DateTime? @default(now()) @db.Timestamptz(6)
  users           users?    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fan_subscriptions {
  id                               String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                          String              @db.Uuid
  tier_id                          String              @db.Uuid
  status                           subscription_status @default(active)
  started_at                       DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  current_period_ends_at           DateTime?           @db.Timestamptz(6)
  cancelled_at                     DateTime?           @db.Timestamptz(6)
  notes                            String?
  payment_provider_subscription_id String?             @unique
  created_at                       DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at                       DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  fan_tiers                        fan_tiers           @relation(fields: [tier_id], references: [id], onUpdate: NoAction)
  profiles                         profiles            @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([status], map: "idx_fan_subscriptions_status")
  @@index([tier_id], map: "idx_fan_subscriptions_tier_id")
  @@index([user_id], map: "idx_fan_subscriptions_user_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fan_tiers {
  id                String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name              String              @unique
  description       String?
  price_monthly     Decimal             @db.Decimal(10, 2)
  benefits          Json?
  tier_order        Int                 @default(0)
  is_active         Boolean             @default(true)
  created_by        String?             @db.Uuid
  created_at        DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at        DateTime            @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  fan_subscriptions fan_subscriptions[]
  profiles          profiles?           @relation(fields: [created_by], references: [id], onUpdate: NoAction)

  @@index([tier_order], map: "idx_fan_tiers_order")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model financial_accounts {
  id              String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id         String?        @db.Uuid
  name            String
  account_type    String?        @default("Checking")
  provider_name   String?
  current_balance Decimal?       @default(0.00) @db.Decimal(15, 2)
  currency_code   String?        @default("USD")
  status          String?        @default("active")
  created_at      DateTime       @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at      DateTime       @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  users           users?         @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  transactions    transactions[]

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model identity_tokens {
  id                      String                    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                 String                    @db.Uuid
  source                  String
  identity                String
  symbol                  String
  display_name            String
  blockchain              String?
  token_contract_address  String?
  token_id                String?
  is_deployed             Boolean?                  @default(false)
  total_supply            BigInt?                   @default(0)
  created_at              DateTime?                 @default(now()) @db.Timestamptz(6)
  updated_at              DateTime?                 @default(now()) @db.Timestamptz(6)
  unified_user_id         String?                   @db.Uuid
  developer_token_holders developer_token_holders[]
  unified_users           unified_users?            @relation(fields: [unified_user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                   users                     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  token_market_data       token_market_data[]
  token_trades            token_trades[]

  @@unique([user_id, source, identity])
  @@index([unified_user_id], map: "idx_identity_tokens_unified_user")
  @@index([user_id], map: "idx_identity_tokens_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model imagebase {
  id                     String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at             DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at             DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  name                   String
  description            String?
  type                   String
  tags                   String[]
  style_keywords         String[]
  reference_image_urls   String[]
  dominant_colors        String[]
  related_story_elements String[] @db.Uuid
  rarity_score           Int?     @default(1)
  is_composable          Boolean? @default(true)
  file_path              String?
  bucket_name            String?  @default("imagebase")
  is_active              Boolean? @default(true)

  @@unique([file_path, bucket_name], map: "imagebase_file_path_bucket_unique")
  @@index([name], map: "idx_imagebase_name")
  @@index([style_keywords], map: "idx_imagebase_style_keywords", type: Gin)
  @@index([tags], map: "idx_imagebase_tags", type: Gin)
  @@index([type], map: "idx_imagebase_type")
  @@schema("public")
}

model knowledgebase_access_log {
  id                      String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  document_id             String                  @db.Uuid
  access_type             String                  @db.VarChar(50)
  query_context           String?
  relevance_score         Float?
  session_id              String?                 @db.VarChar(100)
  user_id                 String?                 @db.Uuid
  accessed_at             DateTime?               @default(now()) @db.Timestamptz(6)
  knowledgebase_documents knowledgebase_documents @relation(fields: [document_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                   users?                  @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([accessed_at(sort: Desc)], map: "idx_knowledgebase_access_log_accessed_at")
  @@index([document_id], map: "idx_knowledgebase_access_log_document_id")
  @@schema("public")
}

model knowledgebase_ai_contexts {
  id                         String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                       String    @unique @db.VarChar(100)
  description                String?
  context_type               String    @db.VarChar(50)
  prompt_template            String
  required_knowledge_domains String[]
  max_context_length         Int?      @default(4000)
  priority                   Int?      @default(0)
  is_active                  Boolean?  @default(true)
  created_at                 DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                 DateTime? @default(now()) @db.Timestamptz(6)

  @@schema("public")
}

model knowledgebase_categories {
  id                             String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                           String                     @unique @db.VarChar(100)
  description                    String?
  parent_id                      String?                    @db.Uuid
  color                          String?                    @db.VarChar(7)
  icon                           String?                    @db.VarChar(50)
  sort_order                     Int?                       @default(0)
  is_active                      Boolean?                   @default(true)
  created_at                     DateTime?                  @default(now()) @db.Timestamptz(6)
  knowledgebase_categories       knowledgebase_categories?  @relation("knowledgebase_categoriesToknowledgebase_categories", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_knowledgebase_categories knowledgebase_categories[] @relation("knowledgebase_categoriesToknowledgebase_categories")

  @@schema("public")
}

model knowledgebase_documents {
  id                                                                                             String                        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  title                                                                                          String                        @db.VarChar(255)
  content                                                                                        String
  content_type                                                                                   String                        @default("text") @db.VarChar(50)
  category                                                                                       String                        @db.VarChar(100)
  subcategory                                                                                    String?                       @db.VarChar(100)
  tags                                                                                           String[]
  source_type                                                                                    String                        @db.VarChar(50)
  source_url                                                                                     String?                       @db.VarChar(500)
  file_path                                                                                      String?                       @db.VarChar(500)
  status                                                                                         String                        @default("draft") @db.VarChar(50)
  priority                                                                                       Int?                          @default(0)
  version                                                                                        Int?                          @default(1)
  metadata                                                                                       Json?                         @default("{}")
  embedding                                                                                      Unsupported("vector")?
  created_at                                                                                     DateTime?                     @default(now()) @db.Timestamptz(6)
  updated_at                                                                                     DateTime?                     @default(now()) @db.Timestamptz(6)
  created_by                                                                                     String?                       @db.Uuid
  updated_by                                                                                     String?                       @db.Uuid
  knowledgebase_access_log                                                                       knowledgebase_access_log[]
  users_knowledgebase_documents_created_byTousers                                                users?                        @relation("knowledgebase_documents_created_byTousers", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_knowledgebase_documents_updated_byTousers                                                users?                        @relation("knowledgebase_documents_updated_byTousers", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  knowledgebase_relationships_knowledgebase_relationships_source_doc_idToknowledgebase_documents knowledgebase_relationships[] @relation("knowledgebase_relationships_source_doc_idToknowledgebase_documents")
  knowledgebase_relationships_knowledgebase_relationships_target_doc_idToknowledgebase_documents knowledgebase_relationships[] @relation("knowledgebase_relationships_target_doc_idToknowledgebase_documents")

  @@index([category], map: "idx_knowledgebase_documents_category")
  @@index([embedding], map: "idx_knowledgebase_documents_embedding")
  @@index([priority(sort: Desc)], map: "idx_knowledgebase_documents_priority")
  @@index([status], map: "idx_knowledgebase_documents_status")
  @@index([tags], map: "idx_knowledgebase_documents_tags", type: Gin)
  @@index([updated_at(sort: Desc)], map: "idx_knowledgebase_documents_updated_at")
  @@schema("public")
}

model knowledgebase_relationships {
  id                                                                                         String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  source_doc_id                                                                              String                  @db.Uuid
  target_doc_id                                                                              String                  @db.Uuid
  relationship_type                                                                          String                  @db.VarChar(50)
  strength                                                                                   Float?                  @default(0.5)
  notes                                                                                      String?
  created_at                                                                                 DateTime?               @default(now()) @db.Timestamptz(6)
  knowledgebase_documents_knowledgebase_relationships_source_doc_idToknowledgebase_documents knowledgebase_documents @relation("knowledgebase_relationships_source_doc_idToknowledgebase_documents", fields: [source_doc_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  knowledgebase_documents_knowledgebase_relationships_target_doc_idToknowledgebase_documents knowledgebase_documents @relation("knowledgebase_relationships_target_doc_idToknowledgebase_documents", fields: [target_doc_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([source_doc_id, target_doc_id, relationship_type])
  @@schema("public")
}

model knowledgebase_sync_jobs {
  id              String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  job_type        String    @db.VarChar(50)
  source          String    @db.VarChar(100)
  status          String?   @default("pending") @db.VarChar(50)
  progress        Int?      @default(0)
  total_items     Int?      @default(0)
  processed_items Int?      @default(0)
  error_message   String?
  results         Json?     @default("{}")
  started_at      DateTime? @db.Timestamptz(6)
  completed_at    DateTime? @db.Timestamptz(6)
  created_at      DateTime? @default(now()) @db.Timestamptz(6)

  @@schema("public")
}

model marina_knowledge_state {
  id               String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  knowledge_domain String    @unique @db.VarChar(100)
  current_state    Json
  confidence_level Float?    @default(0.5)
  last_updated     DateTime? @default(now()) @db.Timestamptz(6)
  update_source    String?   @db.VarChar(100)
  version          Int?      @default(1)

  @@index([knowledge_domain], map: "idx_marina_knowledge_state_domain")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model moviebase {
  id                       String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at               DateTime   @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at               DateTime   @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  title                    String
  user_id                  String?    @db.Uuid
  story_id                 String?    @db.Uuid
  selected_story_fragments String[]   @db.Uuid
  selected_image_elements  String[]   @db.Uuid
  selected_sound_elements  String[]   @db.Uuid
  final_script             String?
  generated_video_url      String?
  thumbnail_url            String?
  duration_seconds         Int?
  nft_mint_id              String?
  nft_contract_address     String?
  nft_token_id             String?
  nft_metadata_url         String?
  generation_parameters    Json?
  status                   String     @default("draft")
  privacy_setting          String     @default("unlisted")
  view_count               Int?       @default(0)
  like_count               Int?       @default(0)
  storybase                storybase? @relation(fields: [story_id], references: [id], onUpdate: NoAction)

  @@index([privacy_setting], map: "idx_moviebase_privacy")
  @@index([status], map: "idx_moviebase_status")
  @@index([story_id], map: "idx_moviebase_story_id")
  @@index([user_id], map: "idx_moviebase_user_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model nft_assets {
  id                       String                     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  collection_id            String?                    @db.Uuid
  user_id                  String?                    @db.Uuid
  name                     String                     @db.VarChar(255)
  description              String?
  asset_type               String                     @db.VarChar(50)
  file_url                 String
  thumbnail_url            String?
  file_size                BigInt?
  file_format              String?                    @db.VarChar(10)
  duration                 Int?
  dimensions               Json?
  metadata                 Json?                      @default("{}")
  traits                   Json?                      @default("[]")
  rarity_score             Decimal?                   @db.Decimal(10, 4)
  ipfs_hash                String?
  ipfs_url                 String?
  status                   String?                    @default("uploaded") @db.VarChar(50)
  created_at               DateTime?                  @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?                  @default(now()) @db.Timestamptz(6)
  nft_collections          nft_collections?           @relation(fields: [collection_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                    users?                     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  nft_marketplace_listings nft_marketplace_listings[]
  nft_mints                nft_mints[]
  nft_sales                nft_sales[]

  @@index([collection_id], map: "idx_nft_assets_collection_id")
  @@index([user_id], map: "idx_nft_assets_user_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model nft_collections {
  id                  String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id             String?      @db.Uuid
  name                String       @db.VarChar(255)
  description         String?
  symbol              String?      @db.VarChar(10)
  cover_image_url     String?
  banner_image_url    String?
  website_url         String?
  discord_url         String?
  twitter_url         String?
  instagram_url       String?
  royalty_percentage  Decimal?     @default(0.00) @db.Decimal(5, 2)
  royalty_address     String?
  blockchain_networks String[]     @default([])
  marketplace_links   Json?        @default("{}")
  total_supply        Int?         @default(0)
  minted_count        Int?         @default(0)
  floor_price         Decimal?     @db.Decimal(20, 8)
  volume_traded       Decimal?     @default(0) @db.Decimal(20, 8)
  status              String?      @default("draft") @db.VarChar(50)
  created_at          DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?    @default(now()) @db.Timestamptz(6)
  nft_assets          nft_assets[]
  users               users?       @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  nft_mints           nft_mints[]
  nft_sales           nft_sales[]

  @@index([user_id], map: "idx_nft_collections_user_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model nft_marketplace_listings {
  id                     String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  mint_id                String?     @db.Uuid
  asset_id               String?     @db.Uuid
  marketplace            String      @db.VarChar(50)
  listing_price          Decimal     @db.Decimal(20, 8)
  currency               String      @db.VarChar(10)
  listing_url            String?
  marketplace_listing_id String?
  status                 String?     @default("active") @db.VarChar(50)
  expires_at             DateTime?   @db.Timestamptz(6)
  listed_at              DateTime?   @default(now()) @db.Timestamptz(6)
  created_at             DateTime?   @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?   @default(now()) @db.Timestamptz(6)
  nft_assets             nft_assets? @relation(fields: [asset_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  nft_mints              nft_mints?  @relation(fields: [mint_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([mint_id], map: "idx_nft_marketplace_listings_mint_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model nft_mints {
  id                       String                     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  asset_id                 String?                    @db.Uuid
  collection_id            String?                    @db.Uuid
  user_id                  String?                    @db.Uuid
  blockchain_network       String                     @db.VarChar(50)
  contract_address         String?
  token_id                 String?
  transaction_hash         String?
  block_number             BigInt?
  mint_price               Decimal?                   @db.Decimal(20, 8)
  gas_fee                  Decimal?                   @db.Decimal(20, 8)
  marketplace_url          String?
  opensea_url              String?
  rarible_url              String?
  foundation_url           String?
  status                   String?                    @default("pending") @db.VarChar(50)
  minted_at                DateTime?                  @db.Timestamptz(6)
  created_at               DateTime?                  @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?                  @default(now()) @db.Timestamptz(6)
  nft_marketplace_listings nft_marketplace_listings[]
  nft_assets               nft_assets?                @relation(fields: [asset_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  nft_collections          nft_collections?           @relation(fields: [collection_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                    users?                     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  nft_sales                nft_sales[]

  @@index([asset_id], map: "idx_nft_mints_asset_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model nft_sales {
  id                         String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  mint_id                    String?          @db.Uuid
  asset_id                   String?          @db.Uuid
  collection_id              String?          @db.Uuid
  marketplace                String           @db.VarChar(50)
  marketplace_transaction_id String?
  seller_address             String?
  buyer_address              String?
  sale_price                 Decimal          @db.Decimal(20, 8)
  currency                   String           @db.VarChar(10)
  royalty_amount             Decimal?         @default(0) @db.Decimal(20, 8)
  platform_fee               Decimal?         @default(0) @db.Decimal(20, 8)
  transaction_hash           String?
  block_number               BigInt?
  sale_date                  DateTime?        @default(now()) @db.Timestamptz(6)
  created_at                 DateTime?        @default(now()) @db.Timestamptz(6)
  nft_assets                 nft_assets?      @relation(fields: [asset_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  nft_collections            nft_collections? @relation(fields: [collection_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  nft_mints                  nft_mints?       @relation(fields: [mint_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([collection_id], map: "idx_nft_sales_collection_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model nftbase_files {
  id                 String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  file_name          String    @db.VarChar(255)
  file_path          String    @unique @db.VarChar(500)
  file_size          BigInt?
  file_type          String?   @db.VarChar(100)
  mime_type          String?   @db.VarChar(100)
  nft_name           String?   @db.VarChar(255)
  nft_description    String?
  nft_attributes     Json?
  creator_name       String?   @db.VarChar(255)
  collection_name    String?   @db.VarChar(255)
  royalty_percentage Decimal?  @default(0) @db.Decimal(5, 2)
  blockchain         String?   @db.VarChar(50)
  contract_address   String?   @db.VarChar(100)
  token_id           String?   @db.VarChar(100)
  mint_status        String?   @default("draft") @db.VarChar(50)
  opensea_url        String?   @db.VarChar(500)
  rarible_url        String?   @db.VarChar(500)
  foundation_url     String?   @db.VarChar(500)
  marketplace_urls   Json?
  mint_price         Decimal?  @db.Decimal(18, 8)
  list_price         Decimal?  @db.Decimal(18, 8)
  currency           String?   @default("ETH") @db.VarChar(10)
  uploaded_by        String?   @db.Uuid
  uploaded_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at         DateTime? @default(now()) @db.Timestamptz(6)
  is_public          Boolean?  @default(true)
  is_featured        Boolean?  @default(false)
  status             String?   @default("active") @db.VarChar(50)
  users              users?    @relation(fields: [uploaded_by], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([collection_name], map: "idx_nftbase_files_collection")
  @@index([creator_name], map: "idx_nftbase_files_creator")
  @@index([mint_status], map: "idx_nftbase_files_status")
  @@index([uploaded_at], map: "idx_nftbase_files_uploaded_at")
  @@index([uploaded_by], map: "idx_nftbase_files_uploaded_by")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model order_items {
  id               String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  order_id         String   @db.Uuid
  product_id       String   @db.Uuid
  quantity         Int      @default(1)
  unit_price       Decimal  @db.Decimal(10, 2)
  total_price      Decimal  @db.Decimal(10, 2)
  product_name     String?
  product_type     String?
  download_details Json?
  created_at       DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at       DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  orders           orders   @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  products         products @relation(fields: [product_id], references: [id], onUpdate: NoAction)

  @@index([order_id], map: "idx_order_items_order_id")
  @@index([product_id], map: "idx_order_items_product_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model orders {
  id                String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id           String?       @db.Uuid
  customer_email    String?
  total_amount      Decimal       @db.Decimal(10, 2)
  currency          String        @default("USD") @db.Char(3)
  status            order_status  @default(pending_payment)
  shipping_address  Json?
  billing_address   Json?
  payment_gateway   String?
  payment_intent_id String?       @unique
  notes             String?
  created_at        DateTime      @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at        DateTime      @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  order_items       order_items[]
  profiles          profiles?     @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([payment_intent_id], map: "idx_orders_payment_intent_id")
  @@index([status], map: "idx_orders_status")
  @@index([user_id], map: "idx_orders_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model page_content {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  page_id      String    @db.Uuid
  section_type String
  title        String
  content      String?
  metadata     Json?
  is_active    Boolean?  @default(true)
  order_index  Int?      @default(0)
  created_at   DateTime? @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at   DateTime? @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  pages        pages     @relation(fields: [page_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([page_id, order_index], map: "idx_page_content_order")
  @@index([page_id], map: "idx_page_content_page_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model pages {
  id               String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name             String
  path             String         @unique
  title            String
  description      String?
  status           String         @default("draft")
  icon             String?        @default("FaFileAlt")
  meta_title       String?
  meta_description String?
  meta_keywords    String?
  og_title         String?
  og_description   String?
  og_image         String?
  canonical_url    String?
  page_views       Int?           @default(0)
  avg_load_time    String?        @default("0.0s")
  seo_score        Int?           @default(0)
  created_at       DateTime?      @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at       DateTime?      @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  page_content     page_content[]

  @@index([path], map: "idx_pages_path")
  @@index([status], map: "idx_pages_status")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model products {
  id                  String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name                String
  description         String?
  type                String
  price               Decimal               @db.Decimal(10, 2)
  currency            String                @default("USD") @db.Char(3)
  stock_quantity      Int?
  image_urls          String[]
  download_url        String?
  status              String                @default("draft")
  tags                String[]
  created_by          String?               @db.Uuid
  created_at          DateTime              @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at          DateTime              @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  course_modules      course_modules[]
  order_items         order_items[]
  profiles            profiles?             @relation(fields: [created_by], references: [id], onUpdate: NoAction)
  student_enrollments student_enrollments[]

  @@index([status], map: "idx_products_status")
  @@index([tags], map: "idx_products_tags", type: Gin)
  @@index([type], map: "idx_products_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model profiles {
  id                                                                  String                   @id @db.Uuid
  username                                                            String?                  @unique
  full_name                                                           String?
  avatar_url                                                          String?
  website                                                             String?
  created_at                                                          DateTime                 @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at                                                          DateTime                 @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  social_links                                                        Json?
  bio                                                                 String?
  role                                                                String?                  @default("User")
  bsv_address                                                         String?
  eth_address                                                         String?
  sol_address                                                         String?
  github_verified                                                     Boolean?                 @default(false)
  github_stars                                                        Int?                     @default(0)
  github_verified_at                                                  DateTime?                @db.Timestamptz(6)
  skills                                                              String[]                 @default([])
  hourly_rate                                                         Decimal?                 @db.Decimal(10, 2)
  portfolio_urls                                                      String[]                 @default([])
  is_marketplace_developer                                            Boolean?                 @default(false)
  developer_availability                                              String?
  handcash_handle                                                     String?                  @unique @db.VarChar(100)
  blog_categories                                                     blog_categories[]
  blog_posts                                                          blog_posts[]
  cap_table_settings                                                  cap_table_settings[]
  cap_table_shareholders_cap_table_shareholders_created_byToprofiles  cap_table_shareholders[] @relation("cap_table_shareholders_created_byToprofiles")
  cap_table_shareholders_cap_table_shareholders_updated_byToprofiles  cap_table_shareholders[] @relation("cap_table_shareholders_updated_byToprofiles")
  comments                                                            comments[]
  dividend_distributions_dividend_distributions_approved_byToprofiles dividend_distributions[] @relation("dividend_distributions_approved_byToprofiles")
  dividend_distributions_dividend_distributions_created_byToprofiles  dividend_distributions[] @relation("dividend_distributions_created_byToprofiles")
  dividend_payments                                                   dividend_payments[]
  fan_subscriptions                                                   fan_subscriptions[]
  fan_tiers                                                           fan_tiers[]
  orders                                                              orders[]
  products                                                            products[]
  users                                                               users                    @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  student_enrollments                                                 student_enrollments[]
  token_holders                                                       token_holders[]
  token_transactions                                                  token_transactions[]
  vesting_schedules                                                   vesting_schedules[]
  youtube_videos                                                      youtube_videos[]

  @@index([skills], map: "idx_profiles_skills", type: Gin)
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model project_members {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_id   String?
  user_id      String?   @db.Uuid
  role         String    @default("Freelancer")
  display_name String?
  email        String?
  avatar_url   String?
  created_at   DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at   DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  projects     projects? @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users        users?    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([project_id, user_id])
  @@schema("public")
}

model project_treatments {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_slug String?
  phase        String?
  title        String?
  description  String?
  sort_order   Int?      @default(0)
  created_at   DateTime? @default(now()) @db.Timestamptz(6)
  updated_at   DateTime? @default(now()) @db.Timestamptz(6)

  @@index([project_slug], map: "idx_project_treatments_slug")
  @@schema("public")
}

model project_timelines {
  id                String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_slug      String?
  phase             String?
  title             String?
  description       String?
  sort_order        Int?      @default(0)
  is_summary        Boolean?  @default(false)
  preview_image_url String?
  created_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)
  designer_notes    String?
  status            String?   @default("proposed")
  target_date       DateTime? @db.Timestamptz(6)

  @@index([project_slug], map: "idx_project_timelines_slug")
  @@schema("public")
}

model project_features {
  id                   String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_slug         String?
  feature              String?
  priority             String?
  est_cost             Decimal?  @db.Decimal(15, 2)
  status               String?
  approved             Boolean?  @default(false)
  completed            Boolean?  @default(false)
  created_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at           DateTime? @default(now()) @db.Timestamptz(6)
  agreement_status     String?   @default("proposed")
  designer_agreed_cost Decimal?  @db.Decimal(15, 2)
  target_date          DateTime? @db.Timestamptz(6)

  @@index([project_slug], map: "idx_project_features_slug")
  @@schema("public")
}

model project_feedback {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_slug String?
  email        String?
  message      String?
  created_at   DateTime? @default(now()) @db.Timestamptz(6)
  updated_at   DateTime? @default(now()) @db.Timestamptz(6)

  @@index([project_slug], map: "idx_project_feedback_slug")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model projects {
  id                     String               @id
  name                   String
  description            String?
  category               String?
  is_active              Boolean?             @default(true)
  created_at             DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?            @default(now()) @db.Timestamptz(6)
  owner_user_id          String?              @db.Uuid
  budget                 Decimal?             @db.Decimal(15, 2)
  client_id              String?              @db.Uuid
  created_by             String?              @db.Uuid
  inspiration_links      String?
  slug                   String?              @unique
  social_links           Json?
  status                 String?              @default("pending_setup")
  url                    String?
  target_completion_date DateTime?            @db.Timestamptz(6)
  project_members        project_members[]
  clients                clients?             @relation(fields: [client_id], references: [id], onUpdate: NoAction)
  users                  users?               @relation(fields: [owner_user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_subscriptions     user_subscriptions[]

  @@index([client_id], map: "idx_projects_client_id")
  @@index([slug], map: "idx_projects_slug")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model robust_ae_content {
  id         Int      @id
  data       Json     @default("{}")
  created_at DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model skills {
  id          String   @id @default(dbgenerated("(gen_random_uuid())::text"))
  name        String
  category    String?
  description String?
  created_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model soundbase {
  id                     String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at             DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at             DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  name                   String
  description            String?
  type                   String
  tags                   String[]
  genre                  String?
  mood                   String?
  voice_characteristics  Json?
  sfx_category           String?
  music_key              String?
  music_bpm              Int?
  audio_file_url         String?
  generation_prompt      String?
  source                 String?  @default("library")
  related_story_elements String[] @db.Uuid
  related_image_elements String[] @db.Uuid

  @@index([genre], map: "idx_soundbase_genre")
  @@index([mood], map: "idx_soundbase_mood")
  @@index([tags], map: "idx_soundbase_tags", type: Gin)
  @@index([type], map: "idx_soundbase_type")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model soundbase_files {
  id                String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  file_name         String    @db.VarChar(255)
  file_path         String    @unique @db.VarChar(500)
  file_size         BigInt?
  file_type         String?   @db.VarChar(100)
  mime_type         String?   @db.VarChar(100)
  title             String?   @db.VarChar(500)
  description       String?
  genre             String?   @db.VarChar(100)
  audio_type        String?   @db.VarChar(100)
  duration_seconds  Int?
  artist_name       String?   @db.VarChar(255)
  album_name        String?   @db.VarChar(255)
  track_number      Int?
  bpm               Int?
  key_signature     String?   @db.VarChar(10)
  tempo_description String?   @db.VarChar(50)
  sample_rate       Int?
  bit_depth         Int?
  channels          Int?
  bitrate           Int?
  format_details    Json?
  mood              Json?
  instruments       Json?
  vocal_type        String?   @db.VarChar(100)
  language          String?   @db.VarChar(50)
  lyrics            String?
  project_name      String?   @db.VarChar(255)
  collection_name   String?   @db.VarChar(255)
  version           String?   @db.VarChar(50)
  tags              Json?
  license_type      String?   @db.VarChar(100)
  copyright_info    String?
  usage_rights      Json?
  uploaded_by       String?   @db.Uuid
  uploaded_at       DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)
  is_public         Boolean?  @default(true)
  is_featured       Boolean?  @default(false)
  status            String?   @default("active") @db.VarChar(50)
  users             users?    @relation(fields: [uploaded_by], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([artist_name], map: "idx_soundbase_files_artist")
  @@index([audio_type], map: "idx_soundbase_files_audio_type")
  @@index([collection_name], map: "idx_soundbase_files_collection")
  @@index([genre], map: "idx_soundbase_files_genre")
  @@index([project_name], map: "idx_soundbase_files_project")
  @@index([uploaded_at], map: "idx_soundbase_files_uploaded_at")
  @@index([uploaded_by], map: "idx_soundbase_files_uploaded_by")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model story_content {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  section_type String
  title        String
  subtitle     String?
  content      String?
  order_index  Int?     @default(0)
  icon         String?
  color_theme  String?  @default("purple")
  is_active    Boolean? @default(true)
  metadata     Json?
  created_at   DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at   DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@index([section_type, order_index], map: "idx_story_content_order")
  @@index([section_type], map: "idx_story_content_section_type")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model storybase {
  id                     String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at             DateTime    @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at             DateTime    @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  title                  String?
  content                String
  type                   String
  genre                  String?
  themes                 String[]
  characters_involved    String[]
  setting_elements       String[]
  parent_story_id        String?     @db.Uuid
  user_prompt            String?
  generated_by_ai        Boolean?    @default(true)
  status                 String      @default("draft")
  version                Int         @default(1)
  related_image_elements String[]    @db.Uuid
  moviebase              moviebase[]
  storybase              storybase?  @relation("storybaseTostorybase", fields: [parent_story_id], references: [id], onUpdate: NoAction)
  other_storybase        storybase[] @relation("storybaseTostorybase")

  @@index([characters_involved], map: "idx_storybase_characters", type: Gin)
  @@index([genre], map: "idx_storybase_genre")
  @@index([status], map: "idx_storybase_status")
  @@index([themes], map: "idx_storybase_themes", type: Gin)
  @@index([type], map: "idx_storybase_type")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model storybase_files {
  id                    String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  file_name             String    @db.VarChar(255)
  file_path             String    @unique @db.VarChar(500)
  file_size             BigInt?
  file_type             String?   @db.VarChar(100)
  mime_type             String?   @db.VarChar(100)
  title                 String?   @db.VarChar(500)
  description           String?
  genre                 String?   @db.VarChar(100)
  story_type            String?   @db.VarChar(100)
  word_count            Int?
  author_name           String?   @db.VarChar(255)
  characters            Json?
  setting               String?   @db.VarChar(255)
  themes                Json?
  tags                  Json?
  project_name          String?   @db.VarChar(255)
  series_name           String?   @db.VarChar(255)
  chapter_number        Int?
  version               String?   @db.VarChar(50)
  writing_status        String?   @default("draft") @db.VarChar(50)
  completion_percentage Int?      @default(0)
  notes                 String?
  collaborators         Json?
  shared_with           Json?
  uploaded_by           String?   @db.Uuid
  uploaded_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at            DateTime? @default(now()) @db.Timestamptz(6)
  is_public             Boolean?  @default(false)
  is_featured           Boolean?  @default(false)
  status                String?   @default("active") @db.VarChar(50)
  users                 users?    @relation(fields: [uploaded_by], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([author_name], map: "idx_storybase_files_author")
  @@index([genre], map: "idx_storybase_files_genre")
  @@index([project_name], map: "idx_storybase_files_project")
  @@index([writing_status], map: "idx_storybase_files_status")
  @@index([story_type], map: "idx_storybase_files_story_type")
  @@index([uploaded_at], map: "idx_storybase_files_uploaded_at")
  @@index([uploaded_by], map: "idx_storybase_files_uploaded_by")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model student_enrollments {
  id           String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id      String            @db.Uuid
  course_id    String            @db.Uuid
  status       enrollment_status @default(pending_payment)
  enrolled_at  DateTime          @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  completed_at DateTime?         @db.Timestamptz(6)
  progress     Json?
  notes        String?
  created_at   DateTime          @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at   DateTime          @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  products     products          @relation(fields: [course_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  profiles     profiles          @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, course_id], map: "idx_student_enrollments_user_course")
  @@index([course_id], map: "idx_student_enrollments_course_id")
  @@index([user_id], map: "idx_student_enrollments_user_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model system_settings {
  key         String   @id
  value       Json?
  description String?
  is_public   Boolean  @default(false)
  created_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model teams {
  id                    String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name                  String
  slug                  String?                 @unique
  description           String?
  created_at            DateTime                @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at            DateTime                @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  user_team_memberships user_team_memberships[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model token_holders {
  id             String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  profile_id     String?   @db.Uuid
  wallet_address String?   @unique
  balance        Decimal   @default(0.00000000) @db.Decimal(30, 8)
  is_mock        Boolean   @default(true)
  notes          String?
  created_at     DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at     DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  profiles       profiles? @relation(fields: [profile_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([balance(sort: Desc)], map: "idx_token_holders_balance")
  @@index([profile_id], map: "idx_token_holders_profile_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model token_hub_content {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  section_type String
  title        String
  subtitle     String?
  description  String?
  metadata     Json?
  order_index  Int?     @default(0)
  is_active    Boolean? @default(true)
  created_at   DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at   DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model token_hub_features {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title       String
  description String
  icon_name   String
  link_url    String?
  link_text   String?
  order_index Int?     @default(0)
  is_active   Boolean? @default(true)
  created_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model token_settings {
  id                 String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token_name         String   @default("$MARS")
  token_symbol       String   @default("MARS")
  total_supply       Decimal  @default(1000000000.00000000) @db.Decimal(30, 8)
  circulating_supply Decimal  @default(500000000.00000000) @db.Decimal(30, 8)
  description        String?
  logo_url           String?
  is_mock            Boolean  @default(true)
  created_at         DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at         DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model token_transactions {
  id                                                                                    String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  transaction_hash                                                                      String?                 @unique
  block_number                                                                          BigInt?
  transaction_index                                                                     Int?
  from_address                                                                          String?
  to_address                                                                            String?
  from_shareholder_id                                                                   String?                 @db.Uuid
  to_shareholder_id                                                                     String?                 @db.Uuid
  token_amount                                                                          Decimal                 @db.Decimal(20, 8)
  transaction_type                                                                      String
  gas_used                                                                              BigInt?
  gas_price                                                                             Decimal?                @db.Decimal(20, 0)
  transaction_fee                                                                       Decimal?                @db.Decimal(20, 8)
  purpose                                                                               String?
  notes                                                                                 String?
  block_timestamp                                                                       DateTime?               @db.Timestamptz(6)
  created_at                                                                            DateTime                @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  is_verified                                                                           Boolean?                @default(false)
  verified_at                                                                           DateTime?               @db.Timestamptz(6)
  verified_by                                                                           String?                 @db.Uuid
  cap_table_shareholders_token_transactions_from_shareholder_idTocap_table_shareholders cap_table_shareholders? @relation("token_transactions_from_shareholder_idTocap_table_shareholders", fields: [from_shareholder_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  cap_table_shareholders_token_transactions_to_shareholder_idTocap_table_shareholders   cap_table_shareholders? @relation("token_transactions_to_shareholder_idTocap_table_shareholders", fields: [to_shareholder_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  profiles                                                                              profiles?               @relation(fields: [verified_by], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([from_address], map: "idx_token_transactions_from_address")
  @@index([block_timestamp], map: "idx_token_transactions_timestamp")
  @@index([to_address], map: "idx_token_transactions_to_address")
  @@index([transaction_type], map: "idx_token_transactions_type")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model transaction_categories {
  id                String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id           String?        @db.Uuid
  name              String
  is_system_default Boolean?       @default(false)
  created_at        DateTime       @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  users             users?         @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  transactions      transactions[]

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model transactions {
  id                      String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                 String?                 @db.Uuid
  financial_account_id    String?                 @db.Uuid
  transaction_category_id String?                 @db.Uuid
  transaction_date        DateTime                @db.Date
  description             String
  amount                  Decimal                 @db.Decimal(15, 2)
  currency_code           String?                 @default("USD")
  status                  String?                 @default("posted")
  created_at              DateTime                @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  financial_accounts      financial_accounts?     @relation(fields: [financial_account_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  transaction_categories  transaction_categories? @relation(fields: [transaction_category_id], references: [id], onUpdate: NoAction)
  users                   users?                  @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model unified_users {
  id                   String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  display_name         String?
  primary_email        String?
  avatar_url           String?
  created_at           DateTime?         @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?         @default(now()) @db.Timestamptz(6)
  merged_into_id       String?           @db.Uuid
  ai_executive_enabled Boolean?          @default(false)
  companies            companies[]
  identity_tokens      identity_tokens[]
  unified_users        unified_users?    @relation("unified_usersTounified_users", fields: [merged_into_id], references: [id], onUpdate: NoAction)
  other_unified_users  unified_users[]   @relation("unified_usersTounified_users")
  user_identities      user_identities[]
  vault                vault?

  @@schema("public")
}

/// Multisig custody vault for investor token holdings
/// 2-of-2 P2SH: Investor (key 1) + b0ase Platform (key 2)
/// Both parties must sign to move tokens - ensures regulatory compliance
model vault {
  id            String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId        String        @unique @db.Uuid
  address       String        @unique @db.VarChar
  redeemScript  String        @db.VarChar
  userPublicKey String        @db.VarChar
  appPublicKey  String        @db.VarChar
  appKeyPath    String        @db.VarChar
  created_at    DateTime      @default(now()) @db.Timestamptz(6)
  updated_at    DateTime      @default(now()) @db.Timestamptz(6)
  unified_users unified_users @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_vault_user")

  @@index([userId], map: "idx_vault_user_id")
  @@index([address], map: "idx_vault_address")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model user_identities {
  id               String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  unified_user_id  String        @db.Uuid
  provider         String
  provider_user_id String
  provider_email   String?
  provider_handle  String?
  provider_data    Json?         @default("{}")
  oauth_provider   String?
  linked_at        DateTime?     @default(now()) @db.Timestamptz(6)
  last_used_at     DateTime?     @default(now()) @db.Timestamptz(6)
  access_token     String?
  token_expires_at DateTime?     @db.Timestamptz(6)
  refresh_token    String?
  unified_users    unified_users @relation(fields: [unified_user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([provider, provider_user_id, oauth_provider], map: "user_identities_provider_oauth_unique")
  @@unique([provider, provider_user_id, oauth_provider], map: "user_identities_provider_user_oauth_unique")
  @@index([provider, provider_user_id], map: "idx_user_identities_provider")
  @@index([unified_user_id], map: "idx_user_identities_unified_user")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model user_profiles {
  id           String   @id @db.Uuid
  email        String
  display_name String?
  avatar_url   String?
  created_at   DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at   DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  users        users    @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model user_subscriptions {
  id                     String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                String?   @db.Uuid
  project_id             String?
  tier                   String?   @default("free")
  status                 String?   @default("active")
  started_at             DateTime? @default(now()) @db.Timestamptz(6)
  expires_at             DateTime? @db.Timestamptz(6)
  stripe_subscription_id String?
  created_at             DateTime? @default(now()) @db.Timestamptz(6)
  updated_at             DateTime? @default(now()) @db.Timestamptz(6)
  projects               projects? @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                  users?    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, project_id])
  @@index([project_id], map: "idx_user_subscriptions_project_id")
  @@index([status], map: "idx_user_subscriptions_status")
  @@index([user_id], map: "idx_user_subscriptions_user_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model user_team_memberships {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id   String?  @db.Uuid
  team_id   String?  @db.Uuid
  role      String   @default("Member")
  joined_at DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  teams     teams?   @relation(fields: [team_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users     users?   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, team_id])
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model vesting_schedules {
  id                     String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  shareholder_id         String                 @db.Uuid
  total_tokens           Decimal                @db.Decimal(20, 8)
  vested_tokens          Decimal?               @default(0) @db.Decimal(20, 8)
  start_date             DateTime               @db.Date
  cliff_months           Int?                   @default(0)
  vesting_period_months  Int
  vesting_frequency      String?                @default("monthly")
  status                 String?                @default("active")
  grant_type             String?                @default("employee_options")
  notes                  String?
  created_at             DateTime               @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at             DateTime               @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  created_by             String?                @db.Uuid
  profiles               profiles?              @relation(fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  cap_table_shareholders cap_table_shareholders @relation(fields: [shareholder_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([shareholder_id], map: "idx_vesting_schedules_shareholder_id")
  @@index([status], map: "idx_vesting_schedules_status")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model videos {
  id         String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  filename   String
  url        String
  size_bytes BigInt?
  metadata   Json?

  @@schema("public")
}

model voice_profiles {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String?   @db.Uuid
  name             String    @db.VarChar(255)
  provider         String    @db.VarChar(50)
  voice_id         String?   @db.VarChar(255)
  voice_type       String?   @db.VarChar(50)
  language         String?   @db.VarChar(10)
  gender           String?   @db.VarChar(20)
  accent           String?   @db.VarChar(50)
  quality          String?   @db.VarChar(20)
  sample_rate      Int?
  is_active        Boolean?  @default(false)
  metadata         Json?
  audio_sample_url String?
  created_at       DateTime? @default(now()) @db.Timestamptz(6)
  updated_at       DateTime? @default(now()) @db.Timestamptz(6)
  users            users?    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model youtube_videos {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  youtube_video_id String    @unique
  title            String
  description      String?
  thumbnail_url    String?
  published_at     DateTime? @db.Timestamptz(6)
  duration_seconds Int?
  view_count       BigInt?
  like_count       BigInt?
  comment_count    BigInt?
  channel_id       String?
  channel_title    String?
  tags             String[]
  added_by         String?   @db.Uuid
  created_at       DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at       DateTime  @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  profiles         profiles? @relation(fields: [added_by], references: [id], onUpdate: NoAction)

  @@index([published_at(sort: Desc)], map: "idx_youtube_videos_published_at")
  @@index([tags], map: "idx_youtube_videos_tags", type: Gin)
  @@schema("public")
}

model api_keys {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id      String    @db.Uuid
  key_hash     String    @unique
  key_prefix   String    @db.VarChar(20)
  name         String    @db.VarChar(255)
  last_used_at DateTime? @db.Timestamptz(6)
  created_at   DateTime  @default(now()) @db.Timestamptz(6)
  revoked_at   DateTime? @db.Timestamptz(6)
  user         users     @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
  @@index([key_hash])
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agent_conversations {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agent_id        String    @db.Uuid
  user_id         String    @db.Uuid
  title           String?   @db.VarChar(200)
  status          String?   @default("active") @db.VarChar(50)
  created_at      DateTime  @default(now()) @db.Timestamptz(6)
  updated_at      DateTime  @default(now()) @db.Timestamptz(6)
  last_message_at DateTime? @db.Timestamptz(6)

  @@index([agent_id], map: "idx_agent_conversations_agent_id")
  @@index([status], map: "idx_agent_conversations_status")
  @@index([user_id], map: "idx_agent_conversations_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agent_inscriptions {
  id               String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agent_id         String   @db.Uuid
  conversation_id  String?  @db.Uuid
  output_id        String?  @db.Uuid
  inscription_id   String?  @unique @db.VarChar(100)
  transaction_id   String?  @db.VarChar(100)
  content_hash     String?  @db.VarChar(100)
  inscription_url  String?
  inscription_type String?  @db.VarChar(50)
  created_at       DateTime @default(now()) @db.Timestamptz(6)

  @@index([agent_id], map: "idx_agent_inscriptions_agent_id")
  @@index([conversation_id], map: "idx_agent_inscriptions_conversation_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agent_memory {
  id                     String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agent_id               String                 @db.Uuid
  content                String
  embedding              Unsupported("vector")?
  memory_type            String?                @db.VarChar(50)
  source_conversation_id String?                @db.Uuid
  source_url             String?
  importance_score       Decimal?               @default(0.5) @db.Decimal(3, 2)
  access_count           Int?                   @default(0)
  last_accessed_at       DateTime?              @db.Timestamptz(6)
  created_at             DateTime               @default(now()) @db.Timestamptz(6)
  updated_at             DateTime               @default(now()) @db.Timestamptz(6)

  @@index([agent_id], map: "idx_agent_memory_agent_id")
  @@index([embedding], map: "idx_agent_memory_embedding")
  @@index([memory_type], map: "idx_agent_memory_type")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agent_outputs {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agent_id     String    @db.Uuid
  task_id      String?   @db.Uuid
  output_type  String?   @db.VarChar(50)
  content      String?
  metadata     Json?     @default("{}")
  status       String?   @default("draft") @db.VarChar(50)
  created_at   DateTime  @default(now()) @db.Timestamptz(6)
  updated_at   DateTime  @default(now()) @db.Timestamptz(6)
  published_at DateTime? @db.Timestamptz(6)

  @@index([agent_id], map: "idx_agent_outputs_agent_id")
  @@index([status], map: "idx_agent_outputs_status")
  @@index([task_id], map: "idx_agent_outputs_task_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agent_performance {
  id                      String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agent_id                String   @db.Uuid
  period_start            DateTime @db.Timestamptz(6)
  period_end              DateTime @db.Timestamptz(6)
  tasks_completed         Int?     @default(0)
  tasks_failed            Int?     @default(0)
  total_tokens_used       Int?     @default(0)
  total_cost_usd          Decimal? @default(0) @db.Decimal(10, 2)
  avg_response_time_ms    Int?
  user_satisfaction_score Decimal? @db.Decimal(3, 2)
  error_rate              Decimal? @db.Decimal(5, 2)
  created_at              DateTime @default(now()) @db.Timestamptz(6)

  @@index([agent_id], map: "idx_agent_performance_agent_id")
  @@index([period_start, period_end], map: "idx_agent_performance_period")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agent_projects {
  id         String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agent_id   String   @db.Uuid
  project_id String
  can_read   Boolean? @default(true)
  can_write  Boolean? @default(false)
  can_deploy Boolean? @default(false)
  is_active  Boolean? @default(true)
  created_at DateTime @default(now()) @db.Timestamptz(6)
  updated_at DateTime @default(now()) @db.Timestamptz(6)

  @@unique([agent_id, project_id])
  @@index([agent_id], map: "idx_agent_projects_agent_id")
  @@index([project_id], map: "idx_agent_projects_project_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agent_tasks {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agent_id         String    @db.Uuid
  task_name        String    @db.VarChar(200)
  task_description String?
  task_type        String    @default("cron") @db.VarChar(50)
  cron_expression  String?   @db.VarChar(100)
  next_run_at      DateTime? @db.Timestamptz(6)
  last_run_at      DateTime? @db.Timestamptz(6)
  task_config      Json?     @default("{}")
  priority         Int?      @default(5)
  retry_count      Int?      @default(3)
  timeout_seconds  Int?      @default(300)
  is_enabled       Boolean?  @default(true)
  execution_count  Int?      @default(0)
  success_count    Int?      @default(0)
  failure_count    Int?      @default(0)
  created_at       DateTime  @default(now()) @db.Timestamptz(6)
  updated_at       DateTime  @default(now()) @db.Timestamptz(6)

  @@index([agent_id], map: "idx_agent_tasks_agent_id")
  @@index([is_enabled], map: "idx_agent_tasks_is_enabled")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agents {
  id                      String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                 String    @db.Uuid
  name                    String    @db.VarChar(100)
  description             String?
  role                    String    @default("custom") @db.VarChar(50)
  avatar_url              String?
  ai_provider             String?   @default("claude") @db.VarChar(50)
  ai_model                String?   @default("claude-sonnet-4-5-20250929") @db.VarChar(100)
  temperature             Decimal?  @default(0.7) @db.Decimal(3, 2)
  max_tokens              Int?      @default(4096)
  system_prompt           String?
  is_active               Boolean?  @default(true)
  is_deployed             Boolean?  @default(false)
  deployment_url          String?
  created_at              DateTime  @default(now()) @db.Timestamptz(6)
  updated_at              DateTime  @default(now()) @db.Timestamptz(6)
  last_active_at          DateTime? @db.Timestamptz(6)
  principal_user_id       String?   @db.Uuid
  is_marketplace_listed   Boolean?  @default(false)
  capabilities            Json?     @default("{}")
  hourly_rate             Decimal?  @db.Decimal(10, 2)
  marketplace_description String?

  @@index([role], map: "idx_agents_role")
  @@index([user_id], map: "idx_agents_user_id")
  @@index([is_marketplace_listed], map: "idx_agents_marketplace_listed")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model brand_assets {
  id                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id           String   @unique @db.Uuid
  primary_logo_url  String?
  inverted_logo_url String?
  favicon_url       String?
  social_image_url  String?
  primary_color     String?  @default("#000000") @db.VarChar(7)
  secondary_color   String?  @default("#FFFFFF") @db.VarChar(7)
  background_color  String?  @default("#000000") @db.VarChar(7)
  text_color        String?  @default("#FFFFFF") @db.VarChar(7)
  accent_color      String?  @default("#FBBF24") @db.VarChar(7)
  heading_font      String?  @db.VarChar(100)
  body_font         String?  @db.VarChar(100)
  created_at        DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at        DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@index([user_id])
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model content_assets {
  id             String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id        String?   @db.Uuid
  file_name      String    @db.VarChar(500)
  file_path      String
  file_size      BigInt
  mime_type      String    @db.VarChar(100)
  asset_type     String    @db.VarChar(50)
  title          String?   @db.VarChar(500)
  description    String?
  tags           String[]
  duration       Int?
  thumbnail_path String?
  metadata       Json?
  project_id     String?   @db.Uuid
  status         String?   @default("active") @db.VarChar(50)
  created_at     DateTime? @default(now()) @db.Timestamp(6)
  updated_at     DateTime? @default(now()) @db.Timestamp(6)

  @@index([asset_type], map: "idx_content_assets_asset_type")
  @@index([status], map: "idx_content_assets_status")
  @@index([user_id], map: "idx_content_assets_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model content_ideas {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id     String   @db.Uuid
  url         String
  title       String?
  source_type String
  tags        String[] @default([])
  notes       String?
  used        Boolean? @default(false)
  created_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)
  updated_at  DateTime @default(dbgenerated("timezone('utc'::text, now())")) @db.Timestamptz(6)

  @@index([created_at(sort: Desc)])
  @@index([used])
  @@index([user_id])
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model conversation_messages {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  conversation_id String   @db.Uuid
  role            String   @db.VarChar(20)
  content         String
  attachments     Json?    @default("[]")
  tokens_used     Int?
  model_used      String?  @db.VarChar(100)
  cost_usd        Decimal? @db.Decimal(10, 6)
  created_at      DateTime @default(now()) @db.Timestamptz(6)

  @@index([conversation_id], map: "idx_conversation_messages_conversation_id")
  @@index([created_at(sort: Desc)], map: "idx_conversation_messages_created_at")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model pipeline_stages {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_id   String
  stage_name   String    @db.VarChar(50)
  stage_order  Int
  status       String?   @default("not_started") @db.VarChar(50)
  started_at   DateTime? @db.Timestamptz(6)
  completed_at DateTime? @db.Timestamptz(6)
  agent_id     String?   @db.Uuid
  created_at   DateTime  @default(now()) @db.Timestamptz(6)
  updated_at   DateTime  @default(now()) @db.Timestamptz(6)

  @@unique([project_id, stage_name])
  @@index([project_id], map: "idx_pipeline_stages_project_id")
  @@index([status], map: "idx_pipeline_stages_status")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fundraising_rounds {
  id                 String             @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stage_id           String             @unique @db.Uuid
  target_amount      Decimal            @db.Decimal(10, 2)
  raised_amount      Decimal?           @default(0) @db.Decimal(10, 2)
  min_investment     Decimal?           @default(10) @db.Decimal(10, 2)
  max_investment     Decimal?           @db.Decimal(10, 2)
  equity_token_count Int?
  status             String?            @default("draft") @db.VarChar(50)
  created_at         DateTime?          @default(now()) @db.Timestamptz(6)
  funding_tranches   funding_tranches[]

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model investor_allocations {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  round_id         String    @db.Uuid
  investor_user_id String    @db.Uuid
  amount           Decimal   @db.Decimal(10, 2)
  status           String?   @default("pledged") @db.VarChar(50)
  created_at       DateTime? @default(now()) @db.Timestamptz(6)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model marketplace_tenders {
  id                   String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stage_id             String    @db.Uuid
  budget_max           Decimal   @db.Decimal(10, 2)
  status               String?   @default("open") @db.VarChar(50)
  awarded_developer_id String?   @db.Uuid
  contract_id          String?   @db.Uuid
  created_at           DateTime? @default(now()) @db.Timestamptz(6)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model contracts {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title      String
  content    String
  status     String?   @default("draft") @db.VarChar(50)
  type       String?   @db.VarChar(50)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)

  @@schema("public")
}

model post_queue {
  id                String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  social_account_id String?   @db.Uuid
  content_idea_id   String?   @db.Uuid
  post_content      String
  scheduled_for     DateTime? @db.Timestamp(6)
  status            String?   @default("queued") @db.VarChar(50)
  created_at        DateTime? @default(now()) @db.Timestamp(6)
  updated_at        DateTime? @default(now()) @db.Timestamp(6)

  @@schema("public")
}

model posted_content {
  id                String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  social_account_id String?   @db.Uuid
  content_idea_id   String?   @db.Uuid
  post_content      String
  post_url          String?
  platform_post_id  String?   @db.VarChar(255)
  posted_at         DateTime? @default(now()) @db.Timestamp(6)
  metrics           Json?

  @@schema("public")
}

model social_accounts {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  site        String    @db.VarChar(255)
  platform    String    @db.VarChar(100)
  handle      String    @db.VarChar(255)
  profile_url String
  active      Boolean?  @default(true)
  created_at  DateTime? @default(now()) @db.Timestamp(6)

  @@unique([site, platform, handle])
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model stage_conversations {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stage_id        String    @db.Uuid
  conversation_id String?   @db.Uuid
  topic           String?   @db.VarChar(200)
  message_count   Int?      @default(0)
  created_at      DateTime  @default(now()) @db.Timestamptz(6)
  last_message_at DateTime? @db.Timestamptz(6)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model stage_deliverables {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stage_id         String    @db.Uuid
  deliverable_name String    @db.VarChar(200)
  deliverable_type String?   @default("document") @db.VarChar(50)
  description      String?
  file_url         String?
  file_size        BigInt?
  mime_type        String?   @db.VarChar(100)
  uploaded_by      String?   @db.Uuid
  uploaded_at      DateTime? @db.Timestamptz(6)
  status           String?   @default("pending") @db.VarChar(50)
  created_at       DateTime  @default(now()) @db.Timestamptz(6)
  updated_at       DateTime  @default(now()) @db.Timestamptz(6)

  @@index([stage_id], map: "idx_stage_deliverables_stage_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model stage_payments {
  id                String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stage_id          String    @db.Uuid
  amount_gbp        Decimal   @db.Decimal(10, 2)
  currency          String?   @default("GBP") @db.VarChar(3)
  payment_status    String?   @default("pending") @db.VarChar(50)
  invoice_url       String?
  stripe_payment_id String?
  stripe_invoice_id String?
  paid_at           DateTime? @db.Timestamptz(6)
  created_at        DateTime  @default(now()) @db.Timestamptz(6)
  updated_at        DateTime  @default(now()) @db.Timestamptz(6)

  @@index([stage_id], map: "idx_stage_payments_stage_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model stage_tasks {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stage_id         String    @db.Uuid
  task_name        String    @db.VarChar(200)
  task_description String?
  task_order       Int
  is_required      Boolean?  @default(true)
  is_completed     Boolean?  @default(false)
  completed_by     String?   @db.Uuid
  completed_at     DateTime? @db.Timestamptz(6)
  agent_suggested  Boolean?  @default(false)
  created_at       DateTime  @default(now()) @db.Timestamptz(6)
  updated_at       DateTime  @default(now()) @db.Timestamptz(6)

  @@index([stage_id], map: "idx_stage_tasks_stage_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model tokenized_repositories {
  id                      String                     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  unified_user_id         String                     @db.Uuid
  github_repo_id          BigInt
  github_repo_name        String
  github_owner            String
  github_full_name        String
  github_description      String?
  github_stars            Int?                       @default(0)
  github_forks            Int?                       @default(0)
  github_language         String?
  github_url              String?
  is_claimed              Boolean?                   @default(true)
  is_tokenized            Boolean?                   @default(false)
  token_symbol            String?                    @unique
  token_chain             String?                    @default("BSV")
  token_contract_address  String?
  token_supply            BigInt?                    @default(1000000)
  price_per_star          Decimal?                   @db.Decimal(20, 8)
  price_per_fork          Decimal?                   @db.Decimal(20, 8)
  price_per_commit        Decimal?                   @db.Decimal(20, 8)
  handcash_handle         String?
  yours_wallet_address    String?
  phantom_wallet_address  String?
  metamask_wallet_address String?
  claimed_at              DateTime?                  @default(now()) @db.Timestamptz(6)
  tokenized_at            DateTime?                  @db.Timestamptz(6)
  last_synced_at          DateTime?                  @default(now()) @db.Timestamptz(6)
  created_at              DateTime?                  @default(now()) @db.Timestamptz(6)
  updated_at              DateTime?                  @default(now()) @db.Timestamptz(6)
  manifest_data           Json?
  manifest_url            String?
  upstream_enabled        Boolean?                   @default(false)
  verification_level      String?                    @default("unverified") @db.VarChar(50)
  verification_method     String?                    @db.VarChar(50)
  verified_at             DateTime?                  @db.Timestamp(6)
  has_repo_attestation    Boolean?                   @default(false)
  verification_proof      Json?
  github_issues           github_issues[]
  upstream_beneficiaries  repository_beneficiaries[] @relation("upstream")
  downstream_dependents   repository_beneficiaries[] @relation("downstream")

  @@index([github_repo_id], map: "idx_tokenized_repos_github_id")
  @@index([github_owner], map: "idx_tokenized_repos_owner")
  @@index([unified_user_id], map: "idx_tokenized_repos_user")
  @@index([github_repo_id, verification_level(sort: Desc)], map: "idx_tokenized_repos_verification")
  @@schema("public")
}

model repository_beneficiaries {
  id                 String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  source_repo_id     String                  @db.Uuid
  target_repo_url    String?
  target_repo_id     String?                 @db.Uuid
  allocation_percent Decimal                 @db.Decimal(5, 2)
  type               String
  created_at         DateTime                @default(now()) @db.Timestamptz(6)
  source_repo        tokenized_repositories  @relation("upstream", fields: [source_repo_id], references: [id], onDelete: Cascade)
  target_repo        tokenized_repositories? @relation("downstream", fields: [target_repo_id], references: [id])

  @@schema("public")
}

/// Cached GitHub issues for repository tokenization roadmaps
model github_issues {
  id                  String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  repo_id             String                  @db.Uuid
  github_issue_id     Int
  title               String
  body                String?
  state               String
  html_url            String
  author_login        String?
  labels              Json?                   @default("[]")
  assignees           Json?                   @default("[]")
  milestone           String?
  created_at          DateTime                @db.Timestamptz(6)
  updated_at          DateTime                @db.Timestamptz(6)
  closed_at           DateTime?               @db.Timestamptz(6)
  last_synced_at      DateTime                @default(now()) @db.Timestamptz(6)
  tranche_assignments github_issue_tranches[]
  tokenized_repo      tokenized_repositories  @relation(fields: [repo_id], references: [id], onDelete: Cascade)

  @@unique([repo_id, github_issue_id])
  @@index([repo_id], map: "idx_github_issues_repo")
  @@index([state], map: "idx_github_issues_state")
  @@schema("public")
}

/// Investment tranches / funding rounds for project roadmaps
model funding_tranches {
  id                   String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_slug         String
  tranche_number       Int
  name                 String
  description          String?
  target_amount_gbp    Decimal                 @db.Decimal(10, 2)
  raised_amount_gbp    Decimal                 @default(0) @db.Decimal(10, 2)
  price_per_percent    Decimal                 @db.Decimal(10, 4)
  equity_offered       Decimal                 @db.Decimal(5, 2)
  status               String                  @default("upcoming")
  milestone_summary    String?
  fundraising_round_id String?                 @db.Uuid
  created_at           DateTime                @default(now()) @db.Timestamptz(6)
  fundraising_round    fundraising_rounds?     @relation(fields: [fundraising_round_id], references: [id])
  issue_assignments    github_issue_tranches[]
  work_items           pipeline_work_items[]

  @@unique([project_slug, tranche_number])
  @@index([project_slug], map: "idx_funding_tranches_project")
  @@index([status], map: "idx_funding_tranches_status")
  @@schema("public")
}

/// Many-to-many mapping between GitHub issues and funding tranches
model github_issue_tranches {
  id              String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  issue_id        String           @db.Uuid
  tranche_id      String           @db.Uuid
  priority        Int              @default(0)
  github_issue    github_issues    @relation(fields: [issue_id], references: [id], onDelete: Cascade)
  funding_tranche funding_tranches @relation(fields: [tranche_id], references: [id], onDelete: Cascade)

  @@unique([issue_id, tranche_id])
  @@index([tranche_id], map: "idx_issue_tranches_tranche")
  @@schema("public")
}

/// Marketplace contract instances
model marketplace_contracts {
  id                  String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  contract_slug       String                @db.VarChar(100)
  client_user_id      String                @db.Uuid
  developer_user_id   String?               @db.Uuid
  agent_id            String?               @db.Uuid
  contract_type       String?               @default("service") @db.VarChar(50)
  title               String
  description         String?
  total_amount        Decimal               @db.Decimal(15, 2)
  currency            String?               @default("USD") @db.VarChar(10)
  payment_method      String?               @db.VarChar(50)
  payment_provider_id String?
  escrow_status       String?               @default("pending") @db.VarChar(50)
  contract_status     String?               @default("draft") @db.VarChar(50)
  inscription_txid    String?
  platform_fee        Decimal?              @default(5.00) @db.Decimal(5, 2)
  start_date          DateTime?             @db.Timestamptz(6)
  end_date            DateTime?             @db.Timestamptz(6)
  terms               Json?                 @default("{}")
  metadata            Json?                 @default("{}")
  created_at          DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?             @default(now()) @db.Timestamptz(6)
  completed_at        DateTime?             @db.Timestamptz(6)
  contract_milestones contract_milestones[]
  contract_reviews    contract_reviews[]

  @@index([client_user_id], map: "idx_marketplace_contracts_client")
  @@index([developer_user_id], map: "idx_marketplace_contracts_developer")
  @@index([contract_status], map: "idx_marketplace_contracts_status")
  @@index([escrow_status], map: "idx_marketplace_contracts_escrow_status")
  @@schema("public")
}

/// Payment milestones for contracts
model contract_milestones {
  id                    String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  contract_id           String                @db.Uuid
  milestone_number      Int?                  @default(1)
  title                 String
  description           String?
  amount                Decimal               @db.Decimal(15, 2)
  status                String?               @default("pending") @db.VarChar(50)
  due_date              DateTime?             @db.Timestamptz(6)
  submitted_at          DateTime?             @db.Timestamptz(6)
  approved_at           DateTime?             @db.Timestamptz(6)
  paid_at               DateTime?             @db.Timestamptz(6)
  payment_txid          String?
  rejection_reason      String?
  deliverables          Json?                 @default("[]")
  created_at            DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?             @default(now()) @db.Timestamptz(6)
  marketplace_contracts marketplace_contracts @relation(fields: [contract_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([contract_id], map: "idx_milestones_contract")
  @@index([status], map: "idx_milestones_status")
  @@schema("public")
}

/// Services offered by developers
model developer_services {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  developer_id    String    @db.Uuid
  service_type    String    @db.VarChar(100)
  title           String
  description     String?
  hourly_rate     Decimal?  @db.Decimal(10, 2)
  fixed_price     Decimal?  @db.Decimal(15, 2)
  estimated_hours Int?
  skills_required String[]  @default([])
  is_active       Boolean?  @default(true)
  created_at      DateTime? @default(now()) @db.Timestamptz(6)
  updated_at      DateTime? @default(now()) @db.Timestamptz(6)

  @@index([developer_id], map: "idx_developer_services_developer")
  @@index([service_type], map: "idx_developer_services_type")
  @@schema("public")
}

/// Payout preferences for developers
model payout_preferences {
  id                  String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id             String    @unique @db.Uuid
  payout_method       String?   @default("stripe") @db.VarChar(50)
  stripe_account_id   String?
  paypal_email        String?
  crypto_currency     String?   @db.VarChar(10)
  crypto_address      String?
  minimum_payout      Decimal?  @default(50.00) @db.Decimal(10, 2)
  auto_payout_enabled Boolean?  @default(false)
  verified            Boolean?  @default(false)
  verified_at         DateTime? @db.Timestamptz(6)
  created_at          DateTime? @default(now()) @db.Timestamptz(6)
  updated_at          DateTime? @default(now()) @db.Timestamptz(6)

  @@index([user_id], map: "idx_payout_preferences_user")
  @@schema("public")
}

/// Contract reviews and ratings
model contract_reviews {
  id                    String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  contract_id           String                @db.Uuid
  reviewer_user_id      String                @db.Uuid
  reviewed_user_id      String                @db.Uuid
  rating                Int
  review_text           String?
  would_hire_again      Boolean?              @default(false)
  inscription_txid      String?
  is_public             Boolean?              @default(true)
  created_at            DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?             @default(now()) @db.Timestamptz(6)
  marketplace_contracts marketplace_contracts @relation(fields: [contract_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([contract_id], map: "idx_reviews_contract")
  @@index([reviewer_user_id], map: "idx_reviews_reviewer")
  @@index([reviewed_user_id], map: "idx_reviews_reviewed")
  @@schema("public")
}

/// Pipeline work items - claimable tasks for developers/agents
/// Part of the Kintsugi triage system
model pipeline_work_items {
  id                   String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_slug         String
  tranche_id           String           @db.Uuid
  title                String
  description          String?
  estimated_hours      Decimal?         @db.Decimal(6, 2)
  bounty_amount_gbp    Decimal          @db.Decimal(10, 2)
  priority             Int              @default(0)
  labels               Json?            @default("[]")
  status               String           @default("open") @db.VarChar(50)
  claimed_by           String?          @db.Uuid
  claimed_at           DateTime?        @db.Timestamptz(6)
  started_at           DateTime?        @db.Timestamptz(6)
  submitted_at         DateTime?        @db.Timestamptz(6)
  estimated_completion DateTime?        @db.Timestamptz(6)
  completed_at         DateTime?        @db.Timestamptz(6)
  paid_at              DateTime?        @db.Timestamptz(6)
  payout_txid          String?
  github_issue_id      String?          @db.Uuid
  pr_url               String?
  notes                String?
  created_at           DateTime         @default(now()) @db.Timestamptz(6)
  updated_at           DateTime         @default(now()) @db.Timestamptz(6)
  funding_tranche      funding_tranches @relation(fields: [tranche_id], references: [id], onDelete: Cascade)

  @@index([project_slug], map: "idx_pipeline_work_items_project")
  @@index([tranche_id], map: "idx_pipeline_work_items_tranche")
  @@index([status], map: "idx_pipeline_work_items_status")
  @@index([claimed_by], map: "idx_pipeline_work_items_claimed_by")
  @@schema("public")
}

/// Portfolio venture token definitions
/// Each b0ase.com portfolio company can have its own token
model venture_tokens {
  id               String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  ticker           String                @unique
  name             String
  description      String?
  total_supply     BigInt?               @default(1000000000)
  price_usd        Decimal?              @default(0.024) @db.Decimal(20, 8)
  price_gbp        Decimal?              @db.Decimal(20, 8)
  blockchain       String?               @default("BSV")
  token_id         String?
  is_deployed      Boolean?              @default(false)
  deploy_txid      String?
  tokens_sold      BigInt?               @default(0)
  tokens_available BigInt?               @default(1000000000)
  treasury_balance Decimal?              @default(0) @db.Decimal(20, 2)
  portfolio_slug   String?
  is_active        Boolean?              @default(true)
  is_public        Boolean?              @default(false)
  created_at       DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?             @default(now()) @db.Timestamptz(6)
  purchases        token_purchases[]
  user_balances    user_token_balances[]
  withdrawals      withdrawal_requests[]

  @@index([portfolio_slug], map: "idx_venture_tokens_portfolio_slug")
  @@index([ticker], map: "idx_venture_tokens_ticker")
  @@schema("public")
}

/// User token balances - internal ledger
/// Each user can hold multiple venture tokens
model user_token_balances {
  id                 String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id            String         @db.Uuid
  token_id           String         @db.Uuid
  balance            BigInt?        @default(0)
  total_purchased    BigInt?        @default(0)
  total_withdrawn    BigInt?        @default(0)
  total_received     BigInt?        @default(0)
  total_sent         BigInt?        @default(0)
  total_invested_usd Decimal?       @default(0) @db.Decimal(20, 2)
  average_buy_price  Decimal?       @db.Decimal(20, 8)
  created_at         DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?      @default(now()) @db.Timestamptz(6)
  venture_token      venture_tokens @relation(fields: [token_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, token_id])
  @@index([token_id], map: "idx_user_token_balances_token_id")
  @@index([user_id], map: "idx_user_token_balances_user_id")
  @@schema("public")
}

/// Token purchases - simplified, no TXID complexity
/// Payment confirmed  credit balance
model token_purchases {
  id                String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id           String         @db.Uuid
  token_id          String         @db.Uuid
  token_amount      BigInt
  usd_amount        Decimal        @db.Decimal(20, 2)
  price_per_token   Decimal        @db.Decimal(20, 8)
  payment_method    String
  payment_currency  String?        @default("USD")
  payment_amount    Decimal        @db.Decimal(30, 8)
  stripe_session_id String?
  stripe_payment_id String?
  crypto_address    String?
  crypto_txid       String?
  status            String?        @default("pending")
  confirmed_at      DateTime?      @db.Timestamptz(6)
  confirmed_by      String?        @db.Uuid
  notes             String?
  created_at        DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at        DateTime?      @default(now()) @db.Timestamptz(6)
  venture_token     venture_tokens @relation(fields: [token_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([status], map: "idx_token_purchases_status")
  @@index([token_id], map: "idx_token_purchases_token_id")
  @@index([user_id], map: "idx_token_purchases_user_id")
  @@index([created_at], map: "idx_token_purchases_created_at")
  @@schema("public")
}

/// Withdrawal requests - for moving tokens on-chain
/// Requires admin approval (KYC, regulatory compliance)
model withdrawal_requests {
  id               String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String         @db.Uuid
  token_id         String         @db.Uuid
  amount           BigInt
  destination      String
  blockchain       String
  status           String?        @default("pending")
  reviewed_by      String?        @db.Uuid
  reviewed_at      DateTime?      @db.Timestamptz(6)
  rejection_reason String?
  txid             String?
  executed_at      DateTime?      @db.Timestamptz(6)
  notes            String?
  created_at       DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?      @default(now()) @db.Timestamptz(6)
  venture_token    venture_tokens @relation(fields: [token_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([status], map: "idx_withdrawal_requests_status")
  @@index([token_id], map: "idx_withdrawal_requests_token_id")
  @@index([user_id], map: "idx_withdrawal_requests_user_id")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model accounts {
  id                  String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id             String       @db.Uuid
  type                String       @db.VarChar(255)
  provider            String       @db.VarChar(255)
  provider_account_id String       @db.VarChar(255)
  refresh_token       String?
  access_token        String?
  expires_at          BigInt?
  token_type          String?      @db.VarChar(255)
  scope               String?      @db.VarChar(255)
  id_token            String?
  session_state       String?      @db.VarChar(255)
  created_at          DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?    @default(now()) @db.Timestamptz(6)
  users               public_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id])
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model document_access_log {
  id          String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  document_id String?    @db.Uuid
  user_id     String
  action      String
  ip_address  String?    @db.Inet
  user_agent  String?
  created_at  DateTime?  @default(now()) @db.Timestamptz(6)
  documents   documents? @relation(fields: [document_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([document_id], map: "idx_document_access_log_document_id")
  @@index([user_id], map: "idx_document_access_log_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model document_shares {
  id           String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  document_id  String?    @db.Uuid
  shared_by    String
  shared_with  String
  created_at   DateTime?  @default(now()) @db.Timestamptz(6)
  expires_at   DateTime?  @db.Timestamptz(6)
  access_level String?    @default("view")
  documents    documents? @relation(fields: [document_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([document_id], map: "idx_document_shares_document_id")
  @@index([shared_with], map: "idx_document_shares_shared_with")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model document_versions {
  id          String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  document_id String?    @db.Uuid
  version     Int        @default(1)
  file_url    String
  file_key    String?
  file_size   BigInt
  file_type   String
  uploaded_by String
  created_at  DateTime?  @default(now()) @db.Timestamptz(6)
  comment     String?
  documents   documents? @relation(fields: [document_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model documents {
  id                  String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title               String
  description         String?
  file_url            String
  file_name           String
  file_size           BigInt
  file_type           String
  uploaded_by         String
  is_active           Boolean?              @default(true)
  created_at          DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?             @default(now()) @db.Timestamptz(6)
  last_viewed_at      DateTime?             @db.Timestamptz(6)
  view_count          Int?                  @default(0)
  download_count      Int?                  @default(0)
  document_access_log document_access_log[]
  document_shares     document_shares[]
  document_versions   document_versions[]
  print_tokens        print_tokens[]

  @@index([created_at], map: "idx_documents_created_at")
  @@index([uploaded_by], map: "idx_documents_uploaded_by")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model investors {
  id                         Int                  @id @default(autoincrement())
  email                      String               @unique @db.VarChar(255)
  name                       String               @db.VarChar(255)
  company                    String?              @db.VarChar(255)
  investment_amount          Decimal?             @db.Decimal(15, 2)
  investment_date            DateTime?            @db.Timestamptz(6)
  equity_percentage          Decimal?             @db.Decimal(7, 4)
  share_count                BigInt?
  investment_tier            String?              @db.VarChar(100)
  share_certificate_url      String?
  subscription_agreement_url String?
  status                     String?              @default("pending") @db.VarChar(50)
  email_verified             Boolean?             @default(false)
  email_verified_at          DateTime?            @db.Timestamptz(6)
  last_login                 DateTime?            @db.Timestamptz(6)
  created_at                 DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at                 DateTime?            @default(now()) @db.Timestamptz(6)
  shareholder_wallets        shareholder_wallets?

  @@index([created_at], map: "idx_investors_created_at")
  @@index([email], map: "idx_investors_email")
  @@index([last_login], map: "idx_investors_last_login")
  @@index([status], map: "idx_investors_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model magic_links {
  id         Int       @id @default(autoincrement())
  email      String    @unique @db.VarChar(255)
  token      String    @unique @db.VarChar(64)
  expires_at DateTime  @db.Timestamptz(6)
  used       Boolean?  @default(false)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)

  @@index([email], map: "idx_magic_links_email")
  @@index([expires_at], map: "idx_magic_links_expires_at")
  @@index([token], map: "idx_magic_links_token")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model print_tokens {
  id          String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  document_id String?    @db.Uuid
  user_id     String
  token       String     @unique
  created_at  DateTime?  @default(now()) @db.Timestamptz(6)
  expires_at  DateTime   @db.Timestamptz(6)
  used        Boolean?   @default(false)
  documents   documents? @relation(fields: [document_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([token], map: "idx_print_tokens_token")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model public_sessions {
  id            String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  session_token String       @unique @db.VarChar(255)
  user_id       String       @db.Uuid
  expires       DateTime     @db.Timestamptz(6)
  created_at    DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at    DateTime?    @default(now()) @db.Timestamptz(6)
  users         public_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([session_token])
  @@index([user_id])
  @@map("sessions")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model shareholder_wallets {
  id                     Int                   @id @default(autoincrement())
  investor_id            Int                   @unique(map: "unique_investor_wallet")
  address                String                @unique @db.VarChar(64)
  redeem_script          String
  shareholder_public_key String                @db.VarChar(130)
  company_public_key     String                @db.VarChar(130)
  company_key_path       String                @db.VarChar(50)
  status                 String?               @default("pending") @db.VarChar(20)
  balance_satoshis       BigInt?               @default(0)
  token_balances         Json?                 @default("{}")
  created_at             DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?             @default(now()) @db.Timestamptz(6)
  last_synced_at         DateTime?             @db.Timestamptz(6)
  investors              investors             @relation(fields: [investor_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  signing_requests       signing_requests[]
  wallet_transactions    wallet_transactions[]

  @@index([address], map: "idx_wallets_address")
  @@index([investor_id], map: "idx_wallets_investor")
  @@index([status], map: "idx_wallets_status")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model signing_requests {
  id                    Int                 @id @default(autoincrement())
  wallet_id             Int
  tx_hex                String
  tx_description        String?
  request_type          String              @db.VarChar(50)
  amount_satoshis       BigInt?
  token_symbol          String?             @db.VarChar(20)
  token_amount          BigInt?
  destination_address   String?             @db.VarChar(64)
  shareholder_signed    Boolean?            @default(false)
  shareholder_signature String?
  shareholder_signed_at DateTime?           @db.Timestamptz(6)
  company_signed        Boolean?            @default(false)
  company_signature     String?
  company_signed_at     DateTime?           @db.Timestamptz(6)
  status                String?             @default("pending") @db.VarChar(20)
  broadcast_txid        String?             @db.VarChar(64)
  broadcast_at          DateTime?           @db.Timestamptz(6)
  error_message         String?
  created_at            DateTime?           @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?           @default(now()) @db.Timestamptz(6)
  expires_at            DateTime?           @default(dbgenerated("(now() + '7 days'::interval)")) @db.Timestamptz(6)
  shareholder_wallets   shareholder_wallets @relation(fields: [wallet_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at], map: "idx_signing_created")
  @@index([status], map: "idx_signing_status")
  @@index([wallet_id], map: "idx_signing_wallet")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model token_member_registry {
  id                    String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token_symbol          String
  member_name           String
  email                 String?
  wallet_address        String?
  user_id               String?   @db.Uuid
  allocation_tokens     BigInt    @default(0)
  allocation_percentage Decimal?  @default(0) @db.Decimal(10, 6)
  allocation_date       DateTime? @default(now()) @db.Timestamptz(6)
  tranche               Int?      @default(0)
  price_per_token       Decimal?  @default(0) @db.Decimal(20, 10)
  total_paid            Decimal?  @default(0) @db.Decimal(20, 2)
  currency              String?   @default("GBP")
  payment_reference     String?
  status                String?   @default("pending")
  is_public             Boolean?  @default(false)
  notes                 String?
  metadata              Json?     @default("{}")
  created_at            DateTime  @default(now()) @db.Timestamptz(6)
  updated_at            DateTime  @default(now()) @db.Timestamptz(6)
  users                 users?    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([is_public], map: "idx_token_member_registry_public")
  @@index([status], map: "idx_token_member_registry_status")
  @@index([token_symbol], map: "idx_token_member_registry_symbol")
  @@index([user_id], map: "idx_token_member_registry_user")
  @@index([wallet_address], map: "idx_token_member_registry_wallet")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model public_users {
  id              String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name            String?           @db.VarChar(255)
  email           String?           @unique @db.VarChar(255)
  email_verified  DateTime?         @db.Timestamptz(6)
  image           String?           @db.VarChar(255)
  created_at      DateTime?         @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?         @default(now()) @db.Timestamptz(6)
  handcash_handle String?           @unique
  accounts        accounts[]
  sessions        public_sessions[]

  @@map("users")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model verification_tokens {
  identifier String    @db.VarChar(255)
  token      String    @unique @db.VarChar(255)
  expires    DateTime  @db.Timestamptz(6)
  created_at DateTime? @default(now()) @db.Timestamptz(6)

  @@id([identifier, token])
  @@index([token])
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model wallet_transactions {
  id                  Int                 @id @default(autoincrement())
  wallet_id           Int
  txid                String              @db.VarChar(64)
  tx_type             String              @db.VarChar(30)
  satoshis            BigInt?
  token_symbol        String?             @db.VarChar(20)
  token_amount        BigInt?
  from_address        String?             @db.VarChar(64)
  to_address          String?             @db.VarChar(64)
  confirmations       Int?                @default(0)
  status              String?             @default("pending") @db.VarChar(20)
  block_height        Int?
  block_time          DateTime?           @db.Timestamptz(6)
  created_at          DateTime?           @default(now()) @db.Timestamptz(6)
  shareholder_wallets shareholder_wallets @relation(fields: [wallet_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at], map: "idx_tx_created")
  @@index([txid], map: "idx_tx_txid")
  @@index([wallet_id], map: "idx_tx_wallet")
  @@schema("public")
}

model kintsugi_chat_sessions {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  session_id   String   @unique
  session_code String
  title        String?
  messages     Json
  context      Json?    @default("{}")
  user_id      String?  @db.Uuid
  last_txid    String?
  created_at   DateTime @default(now()) @db.Timestamptz(6)
  updated_at   DateTime @default(now()) @db.Timestamptz(6)

  @@index([session_code])
  @@index([user_id])
  @@schema("public")
}

/// Accepted proposals from Kintsugi conversations
model kintsugi_proposals {
  id                   String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  session_id           String
  session_code         String?
  email                String?
  wallet_address       String?
  project_slug         String?
  github_issue_number  Int?
  github_issue_url     String?
  proposal_type        String   @default("new_project") @db.VarChar(50)
  title                String
  description          String?
  terms                Json?    @default("{}")
  status               String   @default("pending") @db.VarChar(50)
  notes                String?
  converted_to_type    String?  @db.VarChar(50)
  converted_to_id      String?  @db.Uuid
  created_at           DateTime @default(now()) @db.Timestamptz(6)
  updated_at           DateTime @default(now()) @db.Timestamptz(6)

  @@index([session_id], map: "idx_kintsugi_proposals_session")
  @@index([project_slug], map: "idx_kintsugi_proposals_project")
  @@index([status], map: "idx_kintsugi_proposals_status")
  @@index([email], map: "idx_kintsugi_proposals_email")
  @@schema("public")
}

/// Market data snapshots for developer tokens (price, volume, market cap)
model token_market_data {
  id                 String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token_id           String          @db.Uuid
  price_usd          Decimal         @db.Decimal(20, 8)
  price_bsv          Decimal?        @db.Decimal(20, 8)
  volume_24h         Decimal?        @default(0) @db.Decimal(20, 2)
  market_cap         Decimal?        @default(0) @db.Decimal(20, 2)
  circulating_supply BigInt?         @default(0)
  change_24h         Decimal?        @default(0) @db.Decimal(10, 4)
  change_7d          Decimal?        @default(0) @db.Decimal(10, 4)
  high_24h           Decimal?        @db.Decimal(20, 8)
  low_24h            Decimal?        @db.Decimal(20, 8)
  snapshot_at        DateTime        @default(now()) @db.Timestamptz(6)
  identity_tokens    identity_tokens @relation(fields: [token_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([token_id], map: "idx_market_data_token")
  @@index([snapshot_at], map: "idx_market_data_snapshot")
  @@schema("public")
}

/// Trade history for developer tokens
model token_trades {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token_id        String          @db.Uuid
  buyer_id        String?         @db.Uuid
  seller_id       String?         @db.Uuid
  amount          BigInt
  price_per_token Decimal         @db.Decimal(20, 8)
  total_value     Decimal         @db.Decimal(20, 8)
  trade_type      String          @default("market") @db.VarChar(20)
  blockchain      String?         @db.VarChar(20)
  tx_hash         String?
  status          String          @default("completed") @db.VarChar(20)
  created_at      DateTime        @default(now()) @db.Timestamptz(6)
  buyer           users?          @relation("token_trades_buyer", fields: [buyer_id], references: [id], onUpdate: NoAction)
  seller          users?          @relation("token_trades_seller", fields: [seller_id], references: [id], onUpdate: NoAction)
  identity_tokens identity_tokens @relation(fields: [token_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([token_id], map: "idx_trades_token")
  @@index([buyer_id], map: "idx_trades_buyer")
  @@index([seller_id], map: "idx_trades_seller")
  @@index([created_at], map: "idx_trades_created")
  @@schema("public")
}

/// Developer token holder balances
model developer_token_holders {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token_id        String          @db.Uuid
  holder_id       String          @db.Uuid
  balance         BigInt          @default(0)
  locked_balance  BigInt?         @default(0)
  acquired_at     DateTime        @default(now()) @db.Timestamptz(6)
  updated_at      DateTime        @default(now()) @db.Timestamptz(6)
  holder          users           @relation(fields: [holder_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  identity_tokens identity_tokens @relation(fields: [token_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([token_id, holder_id])
  @@index([token_id], map: "idx_dev_holders_token")
  @@index([holder_id], map: "idx_dev_holders_holder")
  @@schema("public")
}

/// Investor self-certification for UK FCA exemptions (High Net Worth / Sophisticated Investor)
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model investor_certifications {
  id                         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                    String    @db.Uuid
  certification_type         String    @db.VarChar(50)
  income_threshold_met       Boolean?  @default(false)
  assets_threshold_met       Boolean?  @default(false)
  angel_network_member       Boolean?  @default(false)
  previous_investments_count Int?      @default(0)
  relevant_work_experience   String?
  director_of_qualifying_co  Boolean?  @default(false)
  statement_text             String
  full_name                  String    @db.VarChar(255)
  signed_at                  DateTime  @db.Timestamptz(6)
  wallet_address             String    @db.VarChar(255)
  signature_hash             String
  inscription_txid           String?
  valid_from                 DateTime  @default(now()) @db.Timestamptz(6)
  valid_until                DateTime  @db.Timestamptz(6)
  revoked_at                 DateTime? @db.Timestamptz(6)
  revocation_reason          String?
  veriff_session_id          String?
  veriff_status              String?   @db.VarChar(50)
  veriff_verified_at         DateTime? @db.Timestamptz(6)
  ip_address                 String?   @db.VarChar(45)
  user_agent                 String?
  created_at                 DateTime  @default(now()) @db.Timestamptz(6)
  updated_at                 DateTime  @default(now()) @db.Timestamptz(6)
  users                      users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id], map: "idx_investor_cert_user_id")
  @@index([valid_until], map: "idx_investor_cert_valid_until")
  @@index([certification_type], map: "idx_investor_cert_type")
  @@schema("public")
}

/// This model handles user signatures for bit/sign tool
model user_signatures {
  id                   String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id              String                @db.Uuid
  signature_name       String?               @default("Default")
  signature_type       String
  svg_data             String?
  svg_thumbnail        String?
  image_data           String?
  typed_text           String?
  typed_font           String?
  wallet_type          String?
  wallet_address       String?
  verification_message String?
  wallet_signature     String?
  is_default           Boolean?              @default(false)
  is_active            Boolean?              @default(true)
  created_at           DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?             @default(now()) @db.Timestamptz(6)
  certificates         certificates[]
  document_signatures  document_signatures[]
  users                users                 @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id], map: "idx_user_signatures_user_id")
  @@schema("public")
}

/// This model handles signed document history for bit/sign tool
model document_signatures {
  id               String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  signer_user_id   String           @db.Uuid
  signature_id     String?          @db.Uuid
  document_type    String?
  document_id      String?
  document_hash    String?
  document_title   String?
  wallet_address   String?
  wallet_type      String?
  signed_at        DateTime?        @default(now()) @db.Timestamptz(6)
  inscription_txid String?
  inscription_url  String?
  inscribed_at     DateTime?        @db.Timestamptz(6)
  status           String?          @default("signed")
  user_signatures  user_signatures? @relation(fields: [signature_id], references: [id], onUpdate: NoAction)
  users            users            @relation(fields: [signer_user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([document_hash], map: "idx_document_signatures_hash")
  @@index([signer_user_id], map: "idx_document_signatures_signer")
  @@schema("public")
}

/// This model handles issued certificates for bit/certificates tool
model certificates {
  id                        String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  serial_number             String           @unique
  shareholder_name          String
  share_class               String
  share_amount              Decimal          @db.Decimal
  director_signature_id     String?          @db.Uuid
  issuance_date             DateTime?        @default(now()) @db.Timestamptz(6)
  pdf_url                   String?
  pdf_hash                  String?
  director_wallet_signature String?
  status                    String?          @default("active")
  inscription_txid          String?
  inscription_url           String?
  created_at                DateTime?        @default(now()) @db.Timestamptz(6)
  created_by                String?          @db.Uuid
  users                     users?           @relation(fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_signatures           user_signatures? @relation(fields: [director_signature_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([shareholder_name])
  @@index([serial_number])
  @@schema("public")
}

model OutreachContact {
  id              String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name            String
  email           String
  company         String?
  source          String?
  status          contact_status @default(new)
  notes           String?
  lastContactedAt DateTime?      @db.Timestamptz(6)
  userId          String?        @db.Uuid
  createdAt       DateTime       @default(now()) @db.Timestamptz(6)
  updatedAt       DateTime       @default(now()) @db.Timestamptz(6)

  @@unique([email, userId])
  @@index([source])
  @@index([status])
  @@index([userId])
  @@schema("public")
}

model OutreachEmail {
  id        String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  contactId String       @db.Uuid
  subject   String
  body      String
  status    email_status @default(draft)
  sentAt    DateTime?    @db.Timestamptz(6)
  openedAt  DateTime?    @db.Timestamptz(6)
  repliedAt DateTime?    @db.Timestamptz(6)
  createdAt DateTime     @default(now()) @db.Timestamptz(6)
  updatedAt DateTime     @default(now()) @db.Timestamptz(6)

  @@index([contactId])
  @@index([status])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model agreement_performance_logs {
  id                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agreement_id      String   @db.Uuid
  log_type          String   @db.VarChar(50)
  log_date          DateTime @default(now()) @db.Timestamptz(6)
  amount_usd        Decimal? @db.Decimal(15, 2)
  amount_bsv        Decimal? @db.Decimal(18, 8)
  description       String
  evidence_url      String?  @db.VarChar(500)
  evidence_type     String?  @db.VarChar(50)
  logged_by_user_id String?  @db.Uuid
  logged_by_name    String?  @db.VarChar(255)
  metadata          Json?    @default("{}")
  created_at        DateTime @default(now()) @db.Timestamptz(6)

  @@index([agreement_id], map: "idx_performance_logs_agreement_id")
  @@index([log_date], map: "idx_performance_logs_log_date")
  @@index([log_type], map: "idx_performance_logs_log_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bwriter_cap_table {
  id                          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stake_id                    String    @unique @db.Uuid
  user_id                     String    @db.Uuid
  tokens_staked               BigInt
  percentage_of_total         Decimal?  @db.Decimal(10, 6)
  last_dividend_amount        BigInt?
  lifetime_dividends_received BigInt?   @default(0)
  status                      String?   @default("active")
  created_at                  DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                  DateTime? @default(now()) @db.Timestamptz(6)

  @@index([status], map: "idx_cap_table_status")
  @@index([user_id], map: "idx_cap_table_user_id")
  @@schema("public")
}

model bwriter_dividend_distributions {
  id                        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  distribution_round        Int
  block_height              Int
  total_revenue_bsv         BigInt
  dividend_pool_bsv         BigInt
  total_tokens_staked       BigInt
  tokens_per_satoshi        Decimal?  @db.Decimal(20, 10)
  distribution_completed_at DateTime? @default(now()) @db.Timestamptz(6)
  created_at                DateTime? @default(now()) @db.Timestamptz(6)

  @@schema("public")
}

model bwriter_multisig_deposits {
  id                      String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stake_id                String    @unique @db.Uuid
  user_id                 String    @db.Uuid
  deposit_txid            String?
  deposit_address         String
  target_multisig_address String
  amount_expected         BigInt
  amount_received         BigInt?   @default(0)
  confirmations           Int?      @default(0)
  confirmed_at            DateTime? @db.Timestamptz(6)
  status                  String?   @default("waiting")
  created_at              DateTime? @default(now()) @db.Timestamptz(6)
  updated_at              DateTime? @default(now()) @db.Timestamptz(6)

  @@index([confirmed_at], map: "idx_multisig_deposits_confirmed_at")
  @@index([status], map: "idx_multisig_deposits_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bwriter_revenue_accumulated {
  id                   String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  revenue_source       String
  source_reference     String?
  amount_satoshis      BigInt
  revenue_period_start DateTime? @default(now()) @db.Timestamptz(6)
  last_distributed_at  DateTime? @db.Timestamptz(6)
  status               String?   @default("pending")
  created_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at           DateTime? @default(now()) @db.Timestamptz(6)

  @@index([created_at(sort: Desc)], map: "idx_bwriter_revenue_created_at")
  @@index([revenue_source], map: "idx_bwriter_revenue_source")
  @@index([status], map: "idx_bwriter_revenue_status")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model domain_exit_tokens {
  id                      String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  agreement_id            String    @db.Uuid
  domain_name             String    @db.VarChar(255)
  domain_registrar        String?   @db.VarChar(255)
  domain_registered_at    DateTime? @db.Timestamptz(6)
  domain_expires_at       DateTime? @db.Timestamptz(6)
  token_name              String    @db.VarChar(100)
  token_symbol            String    @db.VarChar(20)
  total_supply            BigInt    @default(1000000000)
  founder_tokens          BigInt
  founder_wallet_address  String?   @db.VarChar(255)
  investor_tokens         BigInt
  investor_wallet_address String?   @db.VarChar(255)
  token_status            String    @default("active") @db.VarChar(50)
  forfeited_at            DateTime? @db.Timestamptz(6)
  forfeited_reason        String?
  minting_txid            String?   @db.VarChar(64)
  inscription_id          String?   @db.VarChar(100)
  inscription_number      BigInt?
  block_height            BigInt?
  exit_triggered          Boolean?  @default(false)
  exit_sale_price_usd     Decimal?  @db.Decimal(15, 2)
  exit_sale_date          DateTime? @db.Timestamptz(6)
  exit_buyer              String?   @db.VarChar(255)
  founder_payout_usd      Decimal?  @db.Decimal(15, 2)
  founder_payout_txid     String?   @db.VarChar(64)
  investor_payout_usd     Decimal?  @db.Decimal(15, 2)
  investor_payout_txid    String?   @db.VarChar(64)
  created_at              DateTime  @default(now()) @db.Timestamptz(6)
  updated_at              DateTime  @default(now()) @db.Timestamptz(6)

  @@unique([agreement_id, domain_name], map: "unique_domain_per_agreement")
  @@index([agreement_id], map: "idx_domain_exit_tokens_agreement_id")
  @@index([domain_name], map: "idx_domain_exit_tokens_domain_name")
  @@index([minting_txid], map: "idx_domain_exit_tokens_minting_txid")
  @@index([token_status], map: "idx_domain_exit_tokens_token_status")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model investor_agreements {
  id                         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                    String    @db.Uuid
  investor_name              String    @db.VarChar(255)
  investor_email             String    @db.VarChar(255)
  investor_wallet_address    String?   @db.VarChar(255)
  agreement_type             String    @default("domain_exit_rights") @db.VarChar(50)
  properties                 Json      @default("[]")
  investment_amount_bsv      Decimal   @db.Decimal(18, 8)
  investment_amount_usd      Decimal?  @db.Decimal(15, 2)
  investment_txid            String?   @db.VarChar(64)
  investment_date            DateTime? @default(now()) @db.Timestamptz(6)
  initial_equity_percentage  Decimal   @db.Decimal(7, 4)
  current_equity_percentage  Decimal   @db.Decimal(7, 4)
  performance_obligations    Json      @default("{}")
  performance_deadline       DateTime  @db.Timestamptz(6)
  performance_status         String    @default("pending") @db.VarChar(50)
  performance_notes          String?
  performance_evidence       Json?     @default("[]")
  clawback_status            String    @default("active") @db.VarChar(50)
  clawback_triggered_at      DateTime? @db.Timestamptz(6)
  clawback_reason            String?
  contract_json              Json
  contract_html_path         String?   @db.VarChar(500)
  contract_pdf_path          String?   @db.VarChar(500)
  contract_txid              String?   @db.VarChar(64)
  contract_inscription_id    String?   @db.VarChar(100)
  monthly_sync_schedule      String?   @default("1st Wednesday 10:00 AM PT") @db.VarChar(100)
  monthly_sync_history       Json?     @default("[]")
  next_sync_date             DateTime? @db.Timestamptz(6)
  six_month_review_date      DateTime? @db.Timestamptz(6)
  six_month_review_status    String?   @default("pending") @db.VarChar(50)
  twelve_month_decision_date DateTime? @db.Timestamptz(6)
  twelve_month_decision      String?   @default("pending") @db.VarChar(50)
  founder_user_id            String?   @db.Uuid
  created_at                 DateTime  @default(now()) @db.Timestamptz(6)
  updated_at                 DateTime  @default(now()) @db.Timestamptz(6)

  @@index([agreement_type], map: "idx_investor_agreements_agreement_type")
  @@index([clawback_status], map: "idx_investor_agreements_clawback_status")
  @@index([created_at], map: "idx_investor_agreements_created_at")
  @@index([performance_deadline], map: "idx_investor_agreements_performance_deadline")
  @@index([performance_status], map: "idx_investor_agreements_performance_status")
  @@index([user_id], map: "idx_investor_agreements_user_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_bwriter_balance {
  id                      String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                 String    @unique @db.Uuid
  platform                String
  balance                 BigInt?   @default(0)
  total_earned            BigInt?   @default(0)
  total_purchased         BigInt?   @default(0)
  total_withdrawn         BigInt?   @default(0)
  total_staked_ever       BigInt?   @default(0)
  created_at              DateTime? @default(now()) @db.Timestamptz(6)
  updated_at              DateTime? @default(now()) @db.Timestamptz(6)
  first_token_credited    Boolean?  @default(false)
  first_token_credited_at DateTime? @db.Timestamptz(6)
  tier_001_purchased_at   DateTime? @db.Timestamptz(6)
  tier_010_purchased_at   DateTime? @db.Timestamptz(6)

  @@index([first_token_credited], map: "idx_user_bwriter_balance_first_token")
  @@index([platform], map: "idx_user_bwriter_balance_platform")
  @@index([user_id], map: "idx_user_bwriter_balance_user_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_bwriter_dividend_addresses {
  id                            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                       String    @unique @db.Uuid
  bsv_withdrawal_address        String
  address_verified              Boolean?  @default(false)
  last_dividend_paid_to_address DateTime? @db.Timestamptz(6)
  created_at                    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                    DateTime? @default(now()) @db.Timestamptz(6)

  @@index([user_id], map: "idx_dividend_addresses_user_id")
  @@index([address_verified], map: "idx_dividend_addresses_verified")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_bwriter_dividends_owed {
  id                      String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                 String    @unique @db.Uuid
  dividends_pending       BigInt?   @default(0)
  dividends_claimed       BigInt?   @default(0)
  last_claim_at           DateTime? @db.Timestamptz(6)
  requires_kyc            Boolean?  @default(true)
  requires_staked_balance Boolean?  @default(false)
  created_at              DateTime? @default(now()) @db.Timestamptz(6)
  updated_at              DateTime? @default(now()) @db.Timestamptz(6)

  @@index([user_id], map: "idx_bwriter_dividends_owed_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_bwriter_stakes {
  id                       String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                  String    @db.Uuid
  platform_staked_on       String
  kyc_id                   String    @db.Uuid
  amount                   BigInt
  status                   String    @default("pending_deposit")
  deposit_deadline         DateTime? @db.Timestamptz(6)
  blockchain_confirmations Int?      @default(0)
  staked_at                DateTime? @db.Timestamptz(6)
  unstaked_at              DateTime? @db.Timestamptz(6)
  dividends_accumulated    BigInt?   @default(0)
  dividends_claimed        BigInt?   @default(0)
  last_dividend_block      Int?
  created_at               DateTime? @default(now()) @db.Timestamptz(6)
  updated_at               DateTime? @default(now()) @db.Timestamptz(6)

  @@index([staked_at], map: "idx_user_bwriter_stakes_staked_at")
  @@index([status], map: "idx_user_bwriter_stakes_status")
  @@index([user_id], map: "idx_user_bwriter_stakes_user_id")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_kyc {
  id                        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                   String    @unique @db.Uuid
  full_name                 String
  date_of_birth             DateTime  @db.Date
  id_document_base64        String
  id_document_filename      String
  id_document_mimetype      String
  proof_of_address_base64   String
  proof_of_address_filename String
  proof_of_address_mimetype String
  status                    String    @default("pending")
  submitted_at              DateTime? @default(now()) @db.Timestamptz(6)
  verified_at               DateTime? @db.Timestamptz(6)
  verified_by               String?
  rejected_reason           String?
  created_at                DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                DateTime? @default(now()) @db.Timestamptz(6)

  @@index([status], map: "idx_user_kyc_status")
  @@index([submitted_at(sort: Desc)], map: "idx_user_kyc_submitted_at")
  @@index([user_id], map: "idx_user_kyc_user_id")
  @@schema("public")
}

enum aal_level {
  aal1
  aal2
  aal3

  @@schema("auth")
}

enum code_challenge_method {
  s256
  plain

  @@schema("auth")
}

enum factor_status {
  unverified
  verified

  @@schema("auth")
}

enum factor_type {
  totp
  webauthn
  phone

  @@schema("auth")
}

enum oauth_authorization_status {
  pending
  approved
  denied
  expired

  @@schema("auth")
}

enum oauth_client_type {
  public
  confidential

  @@schema("auth")
}

enum oauth_registration_type {
  dynamic
  manual

  @@schema("auth")
}

enum oauth_response_type {
  code

  @@schema("auth")
}

enum one_time_token_type {
  confirmation_token
  reauthentication_token
  recovery_token
  email_change_token_new
  email_change_token_current
  phone_change_token

  @@schema("auth")
}

enum blog_post_status {
  draft
  published
  archived
  scheduled

  @@schema("public")
}

enum comment_status {
  pending_moderation
  approved
  rejected
  spam

  @@schema("public")
}

enum comment_target_type {
  blog_post
  product
  project
  youtube_video

  @@schema("public")
}

enum enrollment_status {
  active
  completed
  cancelled
  pending_payment

  @@schema("public")
}

enum lesson_content_type {
  video
  text
  quiz
  downloadable_resource
  external_link

  @@schema("public")
}

enum order_status {
  pending_payment
  processing
  awaiting_shipment
  shipped
  delivered
  completed
  cancelled
  refunded
  failed

  @@schema("public")
}

enum subscription_status {
  active
  past_due
  cancelled
  trialing
  paused

  @@schema("public")
}

enum contact_status {
  new
  contacted
  responded
  meeting_scheduled
  converted
  not_interested
  inactive

  @@schema("public")
}

enum email_status {
  draft
  sent
  opened
  replied
  bounced

  @@schema("public")
}

/// Investment orders for token purchases
model investor_orders {
  id                    String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  investor_email        String    @db.VarChar(255)
  investor_wallet       String?   @db.VarChar(255)
  token_symbol          String    @db.VarChar(50)
  token_amount          BigInt
  price_per_token       Decimal   @db.Decimal(20, 10)
  total_price_gbp       Decimal   @db.Decimal(20, 2)
  payment_chain         String    @db.VarChar(10)
  payment_address       String    @db.VarChar(255)
  payment_amount_crypto Decimal   @db.Decimal(30, 18)
  payment_currency      String    @db.VarChar(10)
  status                String    @default("pending") @db.VarChar(50)
  payment_txid          String?   @db.VarChar(255)
  transfer_txid         String?   @db.VarChar(255)
  created_at            DateTime  @default(now()) @db.Timestamptz(6)
  expires_at            DateTime  @db.Timestamptz(6)
  updated_at            DateTime  @default(now()) @db.Timestamptz(6)

  @@index([investor_email], map: "idx_investor_orders_email")
  @@index([status], map: "idx_investor_orders_status")
  @@index([token_symbol], map: "idx_investor_orders_token")
  @@index([created_at(sort: Desc)], map: "idx_investor_orders_created")
  @@schema("public")
}

