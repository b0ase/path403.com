{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/price-service\n *\n * Real-time cryptocurrency price service with caching.\n *\n * @example\n * ```typescript\n * import { PriceService, createPriceService } from '@b0ase/price-service';\n *\n * const prices = createPriceService();\n *\n * // Get single price\n * const bsvPrice = await prices.getPrice('BSV');\n * console.log(`BSV: $${bsvPrice.usd}`);\n *\n * // Get multiple prices\n * const allPrices = await prices.getPrices(['BTC', 'ETH', 'BSV', 'SOL']);\n *\n * // Convert amounts\n * const usdAmount = await prices.convert(1, 'BTC', 'USD');\n * console.log(`1 BTC = $${usdAmount}`);\n *\n * // Get with 24h change\n * const btcData = await prices.getPriceWithChange('BTC');\n * console.log(`BTC: $${btcData.usd} (${btcData.change24h}%)`);\n * ```\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Supported cryptocurrency symbols */\nexport type CryptoSymbol =\n  | 'BTC'\n  | 'ETH'\n  | 'BSV'\n  | 'SOL'\n  | 'USDT'\n  | 'USDC'\n  | 'MNEE'\n  | 'XRP'\n  | 'ADA'\n  | 'DOT'\n  | 'AVAX'\n  | 'MATIC'\n  | 'LINK'\n  | string;\n\n/** Supported fiat currencies */\nexport type FiatCurrency = 'USD' | 'EUR' | 'GBP' | 'JPY' | 'CNY' | 'AUD' | 'CAD';\n\n/** Price data */\nexport interface PriceData {\n  symbol: string;\n  usd: number;\n  eur?: number;\n  gbp?: number;\n  btc?: number;\n  updatedAt: Date;\n}\n\n/** Price with 24h change */\nexport interface PriceWithChange extends PriceData {\n  change24h: number;\n  changePercent24h: number;\n  high24h: number;\n  low24h: number;\n  volume24h: number;\n  marketCap?: number;\n}\n\n/** Price service configuration */\nexport interface PriceServiceConfig {\n  /** Cache TTL in milliseconds (default: 60000 = 1 minute) */\n  cacheTtlMs: number;\n  /** API base URL */\n  apiBaseUrl: string;\n  /** Fallback prices for offline mode */\n  fallbackPrices?: Record<string, number>;\n  /** Request timeout in ms */\n  timeout: number;\n}\n\n/** Cache entry */\ninterface CacheEntry<T> {\n  data: T;\n  expiresAt: number;\n}\n\n// ============================================================================\n// Default Configuration\n// ============================================================================\n\nconst DEFAULT_CONFIG: PriceServiceConfig = {\n  cacheTtlMs: 60000, // 1 minute\n  apiBaseUrl: 'https://api.coingecko.com/api/v3',\n  timeout: 10000,\n  fallbackPrices: {\n    BTC: 45000,\n    ETH: 2500,\n    BSV: 50,\n    SOL: 100,\n    USDT: 1,\n    USDC: 1,\n  },\n};\n\n// CoinGecko ID mapping\nconst COINGECKO_IDS: Record<string, string> = {\n  BTC: 'bitcoin',\n  ETH: 'ethereum',\n  BSV: 'bitcoin-sv',\n  SOL: 'solana',\n  USDT: 'tether',\n  USDC: 'usd-coin',\n  XRP: 'ripple',\n  ADA: 'cardano',\n  DOT: 'polkadot',\n  AVAX: 'avalanche-2',\n  MATIC: 'matic-network',\n  LINK: 'chainlink',\n  MNEE: 'money-network', // May not exist on CoinGecko\n};\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\n/**\n * Fetch with timeout\n */\nasync function fetchWithTimeout(\n  url: string,\n  options: RequestInit = {},\n  timeoutMs: number\n): Promise<Response> {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeoutMs);\n\n  try {\n    const response = await fetch(url, {\n      ...options,\n      signal: controller.signal,\n    });\n    clearTimeout(timeoutId);\n    return response;\n  } catch (error) {\n    clearTimeout(timeoutId);\n    if (error instanceof Error && error.name === 'AbortError') {\n      throw new Error(`Request timeout after ${timeoutMs}ms`);\n    }\n    throw error;\n  }\n}\n\n// ============================================================================\n// Price Service Class\n// ============================================================================\n\n/**\n * Price Service\n *\n * Fetches and caches cryptocurrency prices.\n */\nexport class PriceService {\n  private config: PriceServiceConfig;\n  private cache: Map<string, CacheEntry<PriceData>> = new Map();\n  private multiCache: CacheEntry<Record<string, PriceData>> | null = null;\n\n  constructor(config: Partial<PriceServiceConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  /**\n   * Check if cache entry is valid\n   */\n  private isCacheValid<T>(entry: CacheEntry<T> | null | undefined): entry is CacheEntry<T> {\n    if (!entry) return false;\n    return Date.now() < entry.expiresAt;\n  }\n\n  /**\n   * Get CoinGecko ID for symbol\n   */\n  private getCoinGeckoId(symbol: string): string {\n    return COINGECKO_IDS[symbol.toUpperCase()] || symbol.toLowerCase();\n  }\n\n  /**\n   * Get price for a single cryptocurrency\n   */\n  async getPrice(symbol: string): Promise<PriceData> {\n    const upperSymbol = symbol.toUpperCase();\n    const cacheKey = `price:${upperSymbol}`;\n\n    // Check cache\n    const cached = this.cache.get(cacheKey);\n    if (this.isCacheValid(cached)) {\n      return cached!.data;\n    }\n\n    try {\n      const coinId = this.getCoinGeckoId(upperSymbol);\n      const url = `${this.config.apiBaseUrl}/simple/price?ids=${coinId}&vs_currencies=usd,eur,gbp,btc`;\n\n      const response = await fetchWithTimeout(url, {}, this.config.timeout);\n      if (!response.ok) {\n        throw new Error(`API error: ${response.statusText}`);\n      }\n\n      const data = (await response.json()) as Record<\n        string,\n        Record<string, number>\n      >;\n      const prices = data[coinId];\n\n      if (!prices) {\n        throw new Error(`No price data for ${symbol}`);\n      }\n\n      const priceData: PriceData = {\n        symbol: upperSymbol,\n        usd: prices.usd,\n        eur: prices.eur,\n        gbp: prices.gbp,\n        btc: prices.btc,\n        updatedAt: new Date(),\n      };\n\n      // Cache result\n      this.cache.set(cacheKey, {\n        data: priceData,\n        expiresAt: Date.now() + this.config.cacheTtlMs,\n      });\n\n      return priceData;\n    } catch (error) {\n      // Return fallback price if available\n      const fallback = this.config.fallbackPrices?.[upperSymbol];\n      if (fallback !== undefined) {\n        return {\n          symbol: upperSymbol,\n          usd: fallback,\n          updatedAt: new Date(),\n        };\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Get prices for multiple cryptocurrencies\n   */\n  async getPrices(symbols: string[]): Promise<Record<string, PriceData>> {\n    // Check multi-cache\n    if (this.isCacheValid(this.multiCache)) {\n      const result: Record<string, PriceData> = {};\n      for (const symbol of symbols) {\n        const upper = symbol.toUpperCase();\n        if (this.multiCache!.data[upper]) {\n          result[upper] = this.multiCache!.data[upper];\n        }\n      }\n      if (Object.keys(result).length === symbols.length) {\n        return result;\n      }\n    }\n\n    try {\n      const coinIds = symbols.map((s) => this.getCoinGeckoId(s)).join(',');\n      const url = `${this.config.apiBaseUrl}/simple/price?ids=${coinIds}&vs_currencies=usd,eur,gbp,btc`;\n\n      const response = await fetchWithTimeout(url, {}, this.config.timeout);\n      if (!response.ok) {\n        throw new Error(`API error: ${response.statusText}`);\n      }\n\n      const data = (await response.json()) as Record<\n        string,\n        Record<string, number>\n      >;\n      const result: Record<string, PriceData> = {};\n      const now = new Date();\n\n      for (const symbol of symbols) {\n        const upper = symbol.toUpperCase();\n        const coinId = this.getCoinGeckoId(upper);\n        const prices = data[coinId];\n\n        if (prices) {\n          result[upper] = {\n            symbol: upper,\n            usd: prices.usd,\n            eur: prices.eur,\n            gbp: prices.gbp,\n            btc: prices.btc,\n            updatedAt: now,\n          };\n        } else if (this.config.fallbackPrices?.[upper]) {\n          result[upper] = {\n            symbol: upper,\n            usd: this.config.fallbackPrices[upper],\n            updatedAt: now,\n          };\n        }\n      }\n\n      // Update multi-cache\n      this.multiCache = {\n        data: { ...this.multiCache?.data, ...result },\n        expiresAt: Date.now() + this.config.cacheTtlMs,\n      };\n\n      return result;\n    } catch (error) {\n      // Return fallback prices\n      const result: Record<string, PriceData> = {};\n      const now = new Date();\n      for (const symbol of symbols) {\n        const upper = symbol.toUpperCase();\n        const fallback = this.config.fallbackPrices?.[upper];\n        if (fallback !== undefined) {\n          result[upper] = {\n            symbol: upper,\n            usd: fallback,\n            updatedAt: now,\n          };\n        }\n      }\n      if (Object.keys(result).length > 0) {\n        return result;\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Get price with 24h change data\n   */\n  async getPriceWithChange(symbol: string): Promise<PriceWithChange> {\n    const coinId = this.getCoinGeckoId(symbol.toUpperCase());\n    const url = `${this.config.apiBaseUrl}/coins/${coinId}?localization=false&tickers=false&community_data=false&developer_data=false`;\n\n    const response = await fetchWithTimeout(url, {}, this.config.timeout);\n    if (!response.ok) {\n      throw new Error(`API error: ${response.statusText}`);\n    }\n\n    const data = (await response.json()) as {\n      symbol: string;\n      market_data: {\n        current_price: Record<string, number>;\n        price_change_24h: number;\n        price_change_percentage_24h: number;\n        high_24h: Record<string, number>;\n        low_24h: Record<string, number>;\n        total_volume: Record<string, number>;\n        market_cap: Record<string, number>;\n      };\n    };\n\n    const marketData = data.market_data;\n\n    return {\n      symbol: symbol.toUpperCase(),\n      usd: marketData.current_price.usd,\n      eur: marketData.current_price.eur,\n      gbp: marketData.current_price.gbp,\n      btc: marketData.current_price.btc,\n      change24h: marketData.price_change_24h,\n      changePercent24h: marketData.price_change_percentage_24h,\n      high24h: marketData.high_24h.usd,\n      low24h: marketData.low_24h.usd,\n      volume24h: marketData.total_volume.usd,\n      marketCap: marketData.market_cap.usd,\n      updatedAt: new Date(),\n    };\n  }\n\n  /**\n   * Convert amount between currencies\n   */\n  async convert(\n    amount: number,\n    from: string,\n    to: string\n  ): Promise<number> {\n    const fromUpper = from.toUpperCase();\n    const toUpper = to.toUpperCase();\n\n    // Handle fiat currencies\n    const fiatCurrencies = ['USD', 'EUR', 'GBP', 'JPY', 'CNY', 'AUD', 'CAD'];\n\n    if (fromUpper === toUpper) return amount;\n\n    // Crypto to fiat\n    if (!fiatCurrencies.includes(fromUpper) && fiatCurrencies.includes(toUpper)) {\n      const price = await this.getPrice(fromUpper);\n      const rate =\n        toUpper === 'USD'\n          ? price.usd\n          : toUpper === 'EUR'\n          ? price.eur || price.usd * 0.92\n          : toUpper === 'GBP'\n          ? price.gbp || price.usd * 0.79\n          : price.usd;\n      return amount * rate;\n    }\n\n    // Fiat to crypto\n    if (fiatCurrencies.includes(fromUpper) && !fiatCurrencies.includes(toUpper)) {\n      const price = await this.getPrice(toUpper);\n      const rate =\n        fromUpper === 'USD'\n          ? price.usd\n          : fromUpper === 'EUR'\n          ? price.eur || price.usd * 0.92\n          : fromUpper === 'GBP'\n          ? price.gbp || price.usd * 0.79\n          : price.usd;\n      return amount / rate;\n    }\n\n    // Crypto to crypto\n    const [fromPrice, toPrice] = await Promise.all([\n      this.getPrice(fromUpper),\n      this.getPrice(toUpper),\n    ]);\n\n    const usdValue = amount * fromPrice.usd;\n    return usdValue / toPrice.usd;\n  }\n\n  /**\n   * Clear cache\n   */\n  clearCache(): void {\n    this.cache.clear();\n    this.multiCache = null;\n  }\n\n  /**\n   * Set fallback price\n   */\n  setFallbackPrice(symbol: string, usdPrice: number): void {\n    if (!this.config.fallbackPrices) {\n      this.config.fallbackPrices = {};\n    }\n    this.config.fallbackPrices[symbol.toUpperCase()] = usdPrice;\n  }\n}\n\n// ============================================================================\n// Factory Function\n// ============================================================================\n\n/**\n * Create a price service instance\n */\nexport function createPriceService(\n  config?: Partial<PriceServiceConfig>\n): PriceService {\n  return new PriceService(config);\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\n/**\n * Format price for display\n */\nexport function formatPrice(\n  price: number,\n  currency: string = 'USD',\n  options?: { minimumFractionDigits?: number; maximumFractionDigits?: number }\n): string {\n  const currencySymbols: Record<string, string> = {\n    USD: '$',\n    EUR: '€',\n    GBP: '£',\n    JPY: '¥',\n    CNY: '¥',\n    AUD: 'A$',\n    CAD: 'C$',\n  };\n\n  const symbol = currencySymbols[currency.toUpperCase()] || '$';\n  const minDigits = options?.minimumFractionDigits ?? (price < 1 ? 4 : 2);\n  const maxDigits = options?.maximumFractionDigits ?? (price < 1 ? 6 : 2);\n\n  const formatted = price.toLocaleString('en-US', {\n    minimumFractionDigits: minDigits,\n    maximumFractionDigits: maxDigits,\n  });\n\n  return `${symbol}${formatted}`;\n}\n\n/**\n * Format percentage change\n */\nexport function formatChange(change: number): string {\n  const sign = change >= 0 ? '+' : '';\n  return `${sign}${change.toFixed(2)}%`;\n}\n\n/**\n * Format large numbers (1K, 1M, 1B)\n */\nexport function formatLargeNumber(num: number): string {\n  if (num >= 1e12) return `${(num / 1e12).toFixed(2)}T`;\n  if (num >= 1e9) return `${(num / 1e9).toFixed(2)}B`;\n  if (num >= 1e6) return `${(num / 1e6).toFixed(2)}M`;\n  if (num >= 1e3) return `${(num / 1e3).toFixed(2)}K`;\n  return num.toFixed(2);\n}\n"],"mappings":"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","names":[]}