{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/queue-manager\n *\n * Job queue with priority, delay, retries, and concurrency control.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Job status */\nexport type JobStatus = 'pending' | 'processing' | 'completed' | 'failed' | 'cancelled';\n\n/** Job priority */\nexport type Priority = 'low' | 'normal' | 'high' | 'critical';\n\n/** Priority numeric values */\nexport const PRIORITY_VALUES: Record<Priority, number> = {\n  low: 1,\n  normal: 5,\n  high: 10,\n  critical: 100,\n};\n\n/** Job options */\nexport interface JobOptions {\n  priority?: Priority;\n  delay?: number;\n  maxRetries?: number;\n  retryDelay?: number;\n  timeout?: number;\n  metadata?: Record<string, unknown>;\n}\n\n/** Job definition */\nexport interface Job<T = unknown, R = unknown> {\n  id: string;\n  data: T;\n  status: JobStatus;\n  priority: Priority;\n  attempts: number;\n  maxRetries: number;\n  createdAt: number;\n  scheduledAt: number;\n  startedAt?: number;\n  completedAt?: number;\n  result?: R;\n  error?: Error;\n  metadata?: Record<string, unknown>;\n}\n\n/** Job handler function */\nexport type JobHandler<T = unknown, R = unknown> = (data: T, job: Job<T, R>) => Promise<R>;\n\n/** Queue options */\nexport interface QueueOptions {\n  concurrency?: number;\n  defaultPriority?: Priority;\n  defaultRetries?: number;\n  defaultRetryDelay?: number;\n  defaultTimeout?: number;\n}\n\n/** Queue events */\nexport type QueueEvent = 'job:added' | 'job:started' | 'job:completed' | 'job:failed' | 'job:retry' | 'queue:empty' | 'queue:drained';\n\n/** Event listener */\nexport type QueueEventListener<T = unknown, R = unknown> = (job: Job<T, R>) => void;\n\n/** Queue stats */\nexport interface QueueStats {\n  pending: number;\n  processing: number;\n  completed: number;\n  failed: number;\n  total: number;\n}\n\n// ============================================================================\n// Job Queue\n// ============================================================================\n\nexport class JobQueue<T = unknown, R = unknown> {\n  private jobs: Map<string, Job<T, R>> = new Map();\n  private pending: Job<T, R>[] = [];\n  private processing: Set<string> = new Set();\n  private handler: JobHandler<T, R>;\n  private options: Required<QueueOptions>;\n  private paused = false;\n  private listeners: Map<QueueEvent, Set<QueueEventListener<T, R>>> = new Map();\n  private jobIdCounter = 0;\n\n  constructor(handler: JobHandler<T, R>, options: QueueOptions = {}) {\n    this.handler = handler;\n    this.options = {\n      concurrency: options.concurrency ?? 1,\n      defaultPriority: options.defaultPriority ?? 'normal',\n      defaultRetries: options.defaultRetries ?? 0,\n      defaultRetryDelay: options.defaultRetryDelay ?? 1000,\n      defaultTimeout: options.defaultTimeout ?? 0,\n    };\n  }\n\n  // ==========================================================================\n  // Job Management\n  // ==========================================================================\n\n  add(data: T, options: JobOptions = {}): Job<T, R> {\n    const id = this.generateId();\n    const now = Date.now();\n    const delay = options.delay ?? 0;\n\n    const job: Job<T, R> = {\n      id,\n      data,\n      status: 'pending',\n      priority: options.priority ?? this.options.defaultPriority,\n      attempts: 0,\n      maxRetries: options.maxRetries ?? this.options.defaultRetries,\n      createdAt: now,\n      scheduledAt: now + delay,\n      metadata: options.metadata,\n    };\n\n    this.jobs.set(id, job);\n    this.insertByPriority(job);\n    this.emit('job:added', job);\n\n    if (!this.paused) {\n      this.process();\n    }\n\n    return job;\n  }\n\n  addBulk(items: Array<{ data: T; options?: JobOptions }>): Job<T, R>[] {\n    return items.map(({ data, options }) => this.add(data, options));\n  }\n\n  getJob(id: string): Job<T, R> | undefined {\n    return this.jobs.get(id);\n  }\n\n  removeJob(id: string): boolean {\n    const job = this.jobs.get(id);\n    if (!job) return false;\n\n    if (job.status === 'processing') {\n      return false; // Cannot remove processing job\n    }\n\n    this.pending = this.pending.filter((j) => j.id !== id);\n    this.jobs.delete(id);\n    return true;\n  }\n\n  cancelJob(id: string): boolean {\n    const job = this.jobs.get(id);\n    if (!job) return false;\n\n    if (job.status === 'processing') {\n      return false; // Cannot cancel processing job\n    }\n\n    job.status = 'cancelled';\n    this.pending = this.pending.filter((j) => j.id !== id);\n    return true;\n  }\n\n  // ==========================================================================\n  // Queue Control\n  // ==========================================================================\n\n  pause(): void {\n    this.paused = true;\n  }\n\n  resume(): void {\n    this.paused = false;\n    this.process();\n  }\n\n  isPaused(): boolean {\n    return this.paused;\n  }\n\n  clear(): void {\n    for (const job of this.pending) {\n      job.status = 'cancelled';\n    }\n    this.pending = [];\n  }\n\n  // ==========================================================================\n  // Processing\n  // ==========================================================================\n\n  private async process(): Promise<void> {\n    if (this.paused) return;\n\n    while (\n      this.processing.size < this.options.concurrency &&\n      this.pending.length > 0\n    ) {\n      const job = this.getNextJob();\n      if (!job) break;\n\n      this.processJob(job);\n    }\n  }\n\n  private getNextJob(): Job<T, R> | undefined {\n    const now = Date.now();\n\n    for (let i = 0; i < this.pending.length; i++) {\n      const job = this.pending[i];\n      if (job.scheduledAt <= now) {\n        this.pending.splice(i, 1);\n        return job;\n      }\n    }\n\n    // Schedule delayed job processing\n    if (this.pending.length > 0) {\n      const nextJob = this.pending[0];\n      const delay = nextJob.scheduledAt - now;\n      setTimeout(() => this.process(), delay);\n    }\n\n    return undefined;\n  }\n\n  private async processJob(job: Job<T, R>): Promise<void> {\n    job.status = 'processing';\n    job.startedAt = Date.now();\n    job.attempts++;\n    this.processing.add(job.id);\n\n    this.emit('job:started', job);\n\n    try {\n      let result: R;\n\n      if (this.options.defaultTimeout > 0) {\n        result = await this.withTimeout(\n          this.handler(job.data, job),\n          this.options.defaultTimeout\n        );\n      } else {\n        result = await this.handler(job.data, job);\n      }\n\n      job.status = 'completed';\n      job.completedAt = Date.now();\n      job.result = result;\n\n      this.emit('job:completed', job);\n    } catch (error) {\n      job.error = error instanceof Error ? error : new Error(String(error));\n\n      if (job.attempts < job.maxRetries + 1) {\n        // Retry\n        job.status = 'pending';\n        job.scheduledAt = Date.now() + this.options.defaultRetryDelay;\n        this.insertByPriority(job);\n        this.emit('job:retry', job);\n      } else {\n        // Failed permanently\n        job.status = 'failed';\n        job.completedAt = Date.now();\n        this.emit('job:failed', job);\n      }\n    } finally {\n      this.processing.delete(job.id);\n\n      if (this.pending.length === 0 && this.processing.size === 0) {\n        this.emit('queue:drained', job);\n      } else if (this.pending.length === 0) {\n        this.emit('queue:empty', job);\n      }\n\n      this.process();\n    }\n  }\n\n  private async withTimeout<T>(promise: Promise<T>, ms: number): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n      const timer = setTimeout(() => {\n        reject(new Error(`Job timeout after ${ms}ms`));\n      }, ms);\n\n      promise\n        .then((result) => {\n          clearTimeout(timer);\n          resolve(result);\n        })\n        .catch((error) => {\n          clearTimeout(timer);\n          reject(error);\n        });\n    });\n  }\n\n  // ==========================================================================\n  // Priority Sorting\n  // ==========================================================================\n\n  private insertByPriority(job: Job<T, R>): void {\n    const jobPriority = PRIORITY_VALUES[job.priority];\n    const insertIndex = this.pending.findIndex(\n      (j) => PRIORITY_VALUES[j.priority] < jobPriority\n    );\n\n    if (insertIndex === -1) {\n      this.pending.push(job);\n    } else {\n      this.pending.splice(insertIndex, 0, job);\n    }\n  }\n\n  // ==========================================================================\n  // Events\n  // ==========================================================================\n\n  on(event: QueueEvent, listener: QueueEventListener<T, R>): () => void {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    this.listeners.get(event)!.add(listener);\n\n    return () => this.off(event, listener);\n  }\n\n  off(event: QueueEvent, listener: QueueEventListener<T, R>): void {\n    this.listeners.get(event)?.delete(listener);\n  }\n\n  private emit(event: QueueEvent, job: Job<T, R>): void {\n    const listeners = this.listeners.get(event);\n    if (listeners) {\n      for (const listener of listeners) {\n        try {\n          listener(job);\n        } catch {\n          // Ignore listener errors\n        }\n      }\n    }\n  }\n\n  // ==========================================================================\n  // Stats\n  // ==========================================================================\n\n  getStats(): QueueStats {\n    let pending = 0;\n    let completed = 0;\n    let failed = 0;\n\n    for (const job of this.jobs.values()) {\n      switch (job.status) {\n        case 'pending':\n          pending++;\n          break;\n        case 'completed':\n          completed++;\n          break;\n        case 'failed':\n          failed++;\n          break;\n      }\n    }\n\n    return {\n      pending,\n      processing: this.processing.size,\n      completed,\n      failed,\n      total: this.jobs.size,\n    };\n  }\n\n  getPending(): Job<T, R>[] {\n    return [...this.pending];\n  }\n\n  getProcessing(): Job<T, R>[] {\n    return Array.from(this.processing)\n      .map((id) => this.jobs.get(id))\n      .filter((j): j is Job<T, R> => j !== undefined);\n  }\n\n  getCompleted(): Job<T, R>[] {\n    return Array.from(this.jobs.values()).filter((j) => j.status === 'completed');\n  }\n\n  getFailed(): Job<T, R>[] {\n    return Array.from(this.jobs.values()).filter((j) => j.status === 'failed');\n  }\n\n  // ==========================================================================\n  // Utilities\n  // ==========================================================================\n\n  private generateId(): string {\n    return `job_${Date.now()}_${++this.jobIdCounter}`;\n  }\n\n  async drain(): Promise<void> {\n    if (this.pending.length === 0 && this.processing.size === 0) {\n      return;\n    }\n\n    return new Promise((resolve) => {\n      const unsubscribe = this.on('queue:drained', () => {\n        unsubscribe();\n        resolve();\n      });\n    });\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createQueue<T = unknown, R = unknown>(\n  handler: JobHandler<T, R>,\n  options?: QueueOptions\n): JobQueue<T, R> {\n  return new JobQueue<T, R>(handler, options);\n}\n\n// ============================================================================\n// Simple FIFO Queue\n// ============================================================================\n\nexport class SimpleQueue<T> {\n  private items: T[] = [];\n\n  enqueue(item: T): void {\n    this.items.push(item);\n  }\n\n  dequeue(): T | undefined {\n    return this.items.shift();\n  }\n\n  peek(): T | undefined {\n    return this.items[0];\n  }\n\n  isEmpty(): boolean {\n    return this.items.length === 0;\n  }\n\n  size(): number {\n    return this.items.length;\n  }\n\n  clear(): void {\n    this.items = [];\n  }\n\n  toArray(): T[] {\n    return [...this.items];\n  }\n}\n\n// ============================================================================\n// Priority Queue\n// ============================================================================\n\nexport class PriorityQueue<T> {\n  private items: Array<{ item: T; priority: number }> = [];\n\n  enqueue(item: T, priority: number = 0): void {\n    const entry = { item, priority };\n    const index = this.items.findIndex((e) => e.priority < priority);\n\n    if (index === -1) {\n      this.items.push(entry);\n    } else {\n      this.items.splice(index, 0, entry);\n    }\n  }\n\n  dequeue(): T | undefined {\n    return this.items.shift()?.item;\n  }\n\n  peek(): T | undefined {\n    return this.items[0]?.item;\n  }\n\n  isEmpty(): boolean {\n    return this.items.length === 0;\n  }\n\n  size(): number {\n    return this.items.length;\n  }\n\n  clear(): void {\n    this.items = [];\n  }\n}\n\n// ============================================================================\n// Deque (Double-ended queue)\n// ============================================================================\n\nexport class Deque<T> {\n  private items: T[] = [];\n\n  pushFront(item: T): void {\n    this.items.unshift(item);\n  }\n\n  pushBack(item: T): void {\n    this.items.push(item);\n  }\n\n  popFront(): T | undefined {\n    return this.items.shift();\n  }\n\n  popBack(): T | undefined {\n    return this.items.pop();\n  }\n\n  peekFront(): T | undefined {\n    return this.items[0];\n  }\n\n  peekBack(): T | undefined {\n    return this.items[this.items.length - 1];\n  }\n\n  isEmpty(): boolean {\n    return this.items.length === 0;\n  }\n\n  size(): number {\n    return this.items.length;\n  }\n\n  clear(): void {\n    this.items = [];\n  }\n\n  toArray(): T[] {\n    return [...this.items];\n  }\n}\n"],"mappings":"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","names":[]}