{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/validation\n *\n * Input validation utilities and schema builders.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Validation result */\nexport interface ValidationResult<T = unknown> {\n  success: boolean;\n  data?: T;\n  errors: ValidationError[];\n}\n\n/** Validation error */\nexport interface ValidationError {\n  path: string;\n  message: string;\n  code: string;\n  value?: unknown;\n}\n\n/** Validator function */\nexport type ValidatorFn<T = unknown> = (value: T, path: string) => ValidationError | null;\n\n/** Schema interface */\nexport interface Schema<T = unknown> {\n  optional: boolean;\n  nullable: boolean;\n  validate(value: unknown, path?: string): ValidationResult<T>;\n}\n\n// ============================================================================\n// Schema Builder Base\n// ============================================================================\n\nclass SchemaBuilder<T> implements Schema<T> {\n  optional = false;\n  nullable = false;\n  protected defaultValue?: T;\n  protected validators: ValidatorFn<T>[] = [];\n\n  isOptional(): this {\n    this.optional = true;\n    return this;\n  }\n\n  isNullable(): this {\n    this.nullable = true;\n    return this;\n  }\n\n  withDefault(value: T): this {\n    this.defaultValue = value;\n    this.optional = true;\n    return this;\n  }\n\n  protected addValidator(fn: ValidatorFn<T>): this {\n    this.validators.push(fn);\n    return this;\n  }\n\n  validate(value: unknown, path: string = ''): ValidationResult<T> {\n    const errors: ValidationError[] = [];\n\n    // Handle undefined\n    if (value === undefined) {\n      if (this.defaultValue !== undefined) {\n        return { success: true, data: this.defaultValue, errors: [] };\n      }\n      if (this.optional) {\n        return { success: true, data: undefined as unknown as T, errors: [] };\n      }\n      errors.push({ path, message: 'Value is required', code: 'required' });\n      return { success: false, errors };\n    }\n\n    // Handle null\n    if (value === null) {\n      if (this.nullable) {\n        return { success: true, data: null as unknown as T, errors: [] };\n      }\n      errors.push({ path, message: 'Value cannot be null', code: 'null' });\n      return { success: false, errors };\n    }\n\n    // Run validators\n    for (const validator of this.validators) {\n      const error = validator(value as T, path);\n      if (error) {\n        errors.push(error);\n      }\n    }\n\n    if (errors.length > 0) {\n      return { success: false, errors };\n    }\n\n    return { success: true, data: value as T, errors: [] };\n  }\n}\n\n// ============================================================================\n// String Schema\n// ============================================================================\n\nexport class StringSchema extends SchemaBuilder<string> {\n  constructor() {\n    super();\n    this.addValidator((value, path) => {\n      if (typeof value !== 'string') {\n        return { path, message: 'Expected string', code: 'type', value };\n      }\n      return null;\n    });\n  }\n\n  min(length: number): this {\n    return this.addValidator((value, path) => {\n      if (typeof value === 'string' && value.length < length) {\n        return { path, message: `Minimum length is ${length}`, code: 'minLength', value };\n      }\n      return null;\n    });\n  }\n\n  max(length: number): this {\n    return this.addValidator((value, path) => {\n      if (typeof value === 'string' && value.length > length) {\n        return { path, message: `Maximum length is ${length}`, code: 'maxLength', value };\n      }\n      return null;\n    });\n  }\n\n  length(min: number, max?: number): this {\n    this.min(min);\n    if (max !== undefined) {\n      this.max(max);\n    }\n    return this;\n  }\n\n  pattern(regex: RegExp, message?: string): this {\n    return this.addValidator((value, path) => {\n      if (typeof value === 'string' && !regex.test(value)) {\n        return { path, message: message || 'Does not match pattern', code: 'pattern', value };\n      }\n      return null;\n    });\n  }\n\n  enum(values: string[]): this {\n    return this.addValidator((value, path) => {\n      if (typeof value === 'string' && !values.includes(value)) {\n        return { path, message: `Must be one of: ${values.join(', ')}`, code: 'enum', value };\n      }\n      return null;\n    });\n  }\n\n  email(): this {\n    return this.pattern(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/, 'Invalid email address');\n  }\n\n  url(): this {\n    return this.pattern(/^https?:\\/\\/[^\\s/$.?#].[^\\s]*$/, 'Invalid URL');\n  }\n\n  uuid(): this {\n    return this.pattern(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i, 'Invalid UUID');\n  }\n\n  nonempty(): this {\n    return this.min(1);\n  }\n}\n\n// ============================================================================\n// Number Schema\n// ============================================================================\n\nexport class NumberSchema extends SchemaBuilder<number> {\n  constructor() {\n    super();\n    this.addValidator((value, path) => {\n      if (typeof value !== 'number' || isNaN(value)) {\n        return { path, message: 'Expected number', code: 'type', value };\n      }\n      return null;\n    });\n  }\n\n  min(value: number): this {\n    return this.addValidator((v, path) => {\n      if (typeof v === 'number' && v < value) {\n        return { path, message: `Minimum value is ${value}`, code: 'min', value: v };\n      }\n      return null;\n    });\n  }\n\n  max(value: number): this {\n    return this.addValidator((v, path) => {\n      if (typeof v === 'number' && v > value) {\n        return { path, message: `Maximum value is ${value}`, code: 'max', value: v };\n      }\n      return null;\n    });\n  }\n\n  integer(): this {\n    return this.addValidator((value, path) => {\n      if (typeof value === 'number' && !Number.isInteger(value)) {\n        return { path, message: 'Must be an integer', code: 'integer', value };\n      }\n      return null;\n    });\n  }\n\n  positive(): this {\n    return this.addValidator((value, path) => {\n      if (typeof value === 'number' && value <= 0) {\n        return { path, message: 'Must be positive', code: 'positive', value };\n      }\n      return null;\n    });\n  }\n\n  negative(): this {\n    return this.addValidator((value, path) => {\n      if (typeof value === 'number' && value >= 0) {\n        return { path, message: 'Must be negative', code: 'negative', value };\n      }\n      return null;\n    });\n  }\n\n  finite(): this {\n    return this.addValidator((value, path) => {\n      if (typeof value === 'number' && !Number.isFinite(value)) {\n        return { path, message: 'Must be finite', code: 'finite', value };\n      }\n      return null;\n    });\n  }\n}\n\n// ============================================================================\n// Boolean Schema\n// ============================================================================\n\nexport class BooleanSchema extends SchemaBuilder<boolean> {\n  constructor() {\n    super();\n    this.addValidator((value, path) => {\n      if (typeof value !== 'boolean') {\n        return { path, message: 'Expected boolean', code: 'type', value };\n      }\n      return null;\n    });\n  }\n}\n\n// ============================================================================\n// Array Schema\n// ============================================================================\n\nexport class ArraySchema<T> extends SchemaBuilder<T[]> {\n  private itemSchema?: Schema<T>;\n\n  constructor(items?: Schema<T>) {\n    super();\n    this.itemSchema = items;\n    this.addValidator((value, path) => {\n      if (!Array.isArray(value)) {\n        return { path, message: 'Expected array', code: 'type', value };\n      }\n      return null;\n    });\n  }\n\n  min(length: number): this {\n    return this.addValidator((value, path) => {\n      if (Array.isArray(value) && value.length < length) {\n        return { path, message: `Minimum length is ${length}`, code: 'minLength', value };\n      }\n      return null;\n    });\n  }\n\n  max(length: number): this {\n    return this.addValidator((value, path) => {\n      if (Array.isArray(value) && value.length > length) {\n        return { path, message: `Maximum length is ${length}`, code: 'maxLength', value };\n      }\n      return null;\n    });\n  }\n\n  nonempty(): this {\n    return this.min(1);\n  }\n\n  validate(value: unknown, path: string = ''): ValidationResult<T[]> {\n    const baseResult = super.validate(value, path);\n    if (!baseResult.success || !baseResult.data) {\n      return baseResult;\n    }\n\n    if (this.itemSchema && Array.isArray(baseResult.data)) {\n      const errors: ValidationError[] = [];\n      const validatedItems: T[] = [];\n\n      for (let i = 0; i < baseResult.data.length; i++) {\n        const itemPath = `${path}[${i}]`;\n        const itemResult = this.itemSchema.validate(baseResult.data[i], itemPath);\n\n        if (!itemResult.success) {\n          errors.push(...itemResult.errors);\n        } else if (itemResult.data !== undefined) {\n          validatedItems.push(itemResult.data);\n        }\n      }\n\n      if (errors.length > 0) {\n        return { success: false, errors };\n      }\n\n      return { success: true, data: validatedItems, errors: [] };\n    }\n\n    return baseResult;\n  }\n}\n\n// ============================================================================\n// Object Schema\n// ============================================================================\n\nexport class ObjectSchema<T extends Record<string, unknown>> extends SchemaBuilder<T> {\n  private shape: Record<string, Schema<unknown>>;\n  private strict = false;\n  private allowUnknown = false;\n\n  constructor(shape: Record<string, Schema<unknown>> = {}) {\n    super();\n    this.shape = shape;\n    this.addValidator((value, path) => {\n      if (typeof value !== 'object' || value === null || Array.isArray(value)) {\n        return { path, message: 'Expected object', code: 'type', value };\n      }\n      return null;\n    });\n  }\n\n  strictMode(): this {\n    this.strict = true;\n    return this;\n  }\n\n  passthrough(): this {\n    this.allowUnknown = true;\n    return this;\n  }\n\n  validate(value: unknown, path: string = ''): ValidationResult<T> {\n    const baseResult = super.validate(value, path);\n    if (!baseResult.success || !baseResult.data) {\n      return baseResult;\n    }\n\n    const obj = baseResult.data as Record<string, unknown>;\n    const errors: ValidationError[] = [];\n    const validated: Record<string, unknown> = {};\n\n    // Validate known keys\n    for (const [key, schema] of Object.entries(this.shape)) {\n      const keyPath = path ? `${path}.${key}` : key;\n      const result = schema.validate(obj[key], keyPath);\n\n      if (!result.success) {\n        errors.push(...result.errors);\n      } else if (result.data !== undefined) {\n        validated[key] = result.data;\n      }\n    }\n\n    // Check for unknown keys\n    if (this.strict) {\n      for (const key of Object.keys(obj)) {\n        if (!(key in this.shape)) {\n          const keyPath = path ? `${path}.${key}` : key;\n          errors.push({ path: keyPath, message: 'Unknown key', code: 'unknown', value: obj[key] });\n        }\n      }\n    } else if (this.allowUnknown) {\n      for (const key of Object.keys(obj)) {\n        if (!(key in this.shape)) {\n          validated[key] = obj[key];\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return { success: false, errors };\n    }\n\n    return { success: true, data: validated as T, errors: [] };\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport const v = {\n  string: () => new StringSchema(),\n  number: () => new NumberSchema(),\n  boolean: () => new BooleanSchema(),\n  array: <T>(items?: Schema<T>) => new ArraySchema<T>(items),\n  object: <T extends Record<string, unknown>>(shape?: Record<string, Schema<unknown>>) =>\n    new ObjectSchema<T>(shape),\n\n  // Shortcuts\n  email: () => new StringSchema().email(),\n  url: () => new StringSchema().url(),\n  uuid: () => new StringSchema().uuid(),\n  int: () => new NumberSchema().integer(),\n  positive: () => new NumberSchema().positive(),\n};\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nexport function validate<T>(schema: Schema<T>, value: unknown): ValidationResult<T> {\n  return schema.validate(value);\n}\n\nexport function isValid<T>(schema: Schema<T>, value: unknown): boolean {\n  return schema.validate(value).success;\n}\n\nexport function parse<T>(schema: Schema<T>, value: unknown): T {\n  const result = schema.validate(value);\n  if (!result.success) {\n    throw new ValidationException(result.errors);\n  }\n  return result.data as T;\n}\n\nexport function safeParse<T>(\n  schema: Schema<T>,\n  value: unknown\n): { success: true; data: T } | { success: false; errors: ValidationError[] } {\n  const result = schema.validate(value);\n  if (result.success) {\n    return { success: true, data: result.data as T };\n  }\n  return { success: false, errors: result.errors };\n}\n\nexport class ValidationException extends Error {\n  errors: ValidationError[];\n\n  constructor(errors: ValidationError[]) {\n    super(`Validation failed: ${errors.map(e => e.message).join(', ')}`);\n    this.name = 'ValidationException';\n    this.errors = errors;\n  }\n}\n\nexport function formatErrors(errors: ValidationError[]): string {\n  return errors.map(e => `${e.path || 'value'}: ${e.message}`).join('\\n');\n}\n\n// ============================================================================\n// Common Validators\n// ============================================================================\n\nexport const validators = {\n  isEmail: (value: string): boolean => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value),\n  isUrl: (value: string): boolean => /^https?:\\/\\/[^\\s/$.?#].[^\\s]*$/.test(value),\n  isUuid: (value: string): boolean =>\n    /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(value),\n  isHex: (value: string): boolean => /^[0-9a-fA-F]+$/.test(value),\n  isBase64: (value: string): boolean => /^[A-Za-z0-9+/]*={0,2}$/.test(value),\n  isAlpha: (value: string): boolean => /^[a-zA-Z]+$/.test(value),\n  isAlphanumeric: (value: string): boolean => /^[a-zA-Z0-9]+$/.test(value),\n  isNumeric: (value: string): boolean => /^[0-9]+$/.test(value),\n  isSlug: (value: string): boolean => /^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(value),\n  isBitcoinAddress: (value: string): boolean => /^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/.test(value),\n  isEthereumAddress: (value: string): boolean => /^0x[a-fA-F0-9]{40}$/.test(value),\n};\n\n// ============================================================================\n// Sanitizers\n// ============================================================================\n\nexport const sanitize = {\n  trim: (value: string): string => value.trim(),\n  lowercase: (value: string): string => value.toLowerCase(),\n  uppercase: (value: string): string => value.toUpperCase(),\n  escape: (value: string): string =>\n    value.replace(/[&<>\"']/g, c =>\n      ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#39;' })[c] || c\n    ),\n  stripHtml: (value: string): string => value.replace(/<[^>]*>/g, ''),\n  normalizeEmail: (value: string): string => value.toLowerCase().trim(),\n  slug: (value: string): string =>\n    value\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s-]/g, '')\n      .replace(/[\\s_-]+/g, '-')\n      .replace(/^-+|-+$/g, ''),\n};\n"],"mappings":"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","names":["v"]}