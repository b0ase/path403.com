{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/supabase-service\n *\n * Supabase client patterns and typed database utilities.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Database table names */\nexport type TableName = string;\n\n/** Query operator */\nexport type QueryOperator =\n  | 'eq'\n  | 'neq'\n  | 'gt'\n  | 'gte'\n  | 'lt'\n  | 'lte'\n  | 'like'\n  | 'ilike'\n  | 'is'\n  | 'in'\n  | 'contains'\n  | 'containedBy'\n  | 'overlap';\n\n/** Sort direction */\nexport type SortDirection = 'asc' | 'desc';\n\n/** Realtime event type */\nexport type RealtimeEvent = 'INSERT' | 'UPDATE' | 'DELETE' | '*';\n\n/** Auth provider */\nexport type AuthProvider =\n  | 'email'\n  | 'phone'\n  | 'google'\n  | 'github'\n  | 'gitlab'\n  | 'bitbucket'\n  | 'discord'\n  | 'twitter'\n  | 'facebook'\n  | 'apple'\n  | 'azure';\n\n/** Storage bucket */\nexport interface StorageBucket {\n  id: string;\n  name: string;\n  public: boolean;\n  fileSizeLimit?: number;\n  allowedMimeTypes?: string[];\n}\n\n/** Query filter */\nexport interface QueryFilter {\n  column: string;\n  operator: QueryOperator;\n  value: unknown;\n}\n\n/** Query options */\nexport interface QueryOptions {\n  filters?: QueryFilter[];\n  orderBy?: { column: string; direction: SortDirection }[];\n  limit?: number;\n  offset?: number;\n  select?: string;\n  count?: 'exact' | 'planned' | 'estimated';\n}\n\n/** Realtime subscription */\nexport interface RealtimeSubscription {\n  id: string;\n  table: string;\n  event: RealtimeEvent;\n  filter?: string;\n  callback: (payload: RealtimePayload) => void;\n  unsubscribe: () => void;\n}\n\n/** Realtime payload */\nexport interface RealtimePayload<T = Record<string, unknown>> {\n  eventType: RealtimeEvent;\n  new: T | null;\n  old: T | null;\n  table: string;\n  schema: string;\n  commitTimestamp: string;\n}\n\n/** User session */\nexport interface UserSession {\n  accessToken: string;\n  refreshToken: string;\n  expiresAt: number;\n  expiresIn: number;\n  user: UserProfile;\n}\n\n/** User profile */\nexport interface UserProfile {\n  id: string;\n  email?: string;\n  phone?: string;\n  emailConfirmedAt?: string;\n  phoneConfirmedAt?: string;\n  createdAt: string;\n  updatedAt: string;\n  userMetadata: Record<string, unknown>;\n  appMetadata: Record<string, unknown>;\n}\n\n/** Auth state */\nexport interface AuthState {\n  session: UserSession | null;\n  user: UserProfile | null;\n  isLoading: boolean;\n  error: string | null;\n}\n\n/** Database error */\nexport interface DatabaseError {\n  code: string;\n  message: string;\n  details?: string;\n  hint?: string;\n}\n\n/** Query result */\nexport interface QueryResult<T> {\n  data: T[] | null;\n  error: DatabaseError | null;\n  count: number | null;\n  status: number;\n  statusText: string;\n}\n\n/** Single result */\nexport interface SingleResult<T> {\n  data: T | null;\n  error: DatabaseError | null;\n}\n\n/** Mutation result */\nexport interface MutationResult<T> {\n  data: T | null;\n  error: DatabaseError | null;\n}\n\n/** Storage file */\nexport interface StorageFile {\n  id: string;\n  name: string;\n  bucket: string;\n  path: string;\n  size: number;\n  mimeType: string;\n  createdAt: string;\n  updatedAt: string;\n  publicUrl?: string;\n}\n\n/** Upload options */\nexport interface UploadOptions {\n  cacheControl?: string;\n  contentType?: string;\n  upsert?: boolean;\n}\n\n/** RPC function */\nexport interface RPCFunction {\n  name: string;\n  args?: Record<string, unknown>;\n}\n\n/** Service config */\nexport interface ServiceConfig {\n  url: string;\n  anonKey: string;\n  serviceRoleKey?: string;\n  schema?: string;\n  autoRefreshToken?: boolean;\n  persistSession?: boolean;\n  detectSessionInUrl?: boolean;\n}\n\n// ============================================================================\n// Query Builder\n// ============================================================================\n\nexport class QueryBuilder<T = Record<string, unknown>> {\n  private tableName: string;\n  private options: QueryOptions = {};\n  private isSingle = false;\n\n  constructor(table: string) {\n    this.tableName = table;\n  }\n\n  select(columns: string = '*'): this {\n    this.options.select = columns;\n    return this;\n  }\n\n  eq(column: string, value: unknown): this {\n    this.addFilter(column, 'eq', value);\n    return this;\n  }\n\n  neq(column: string, value: unknown): this {\n    this.addFilter(column, 'neq', value);\n    return this;\n  }\n\n  gt(column: string, value: unknown): this {\n    this.addFilter(column, 'gt', value);\n    return this;\n  }\n\n  gte(column: string, value: unknown): this {\n    this.addFilter(column, 'gte', value);\n    return this;\n  }\n\n  lt(column: string, value: unknown): this {\n    this.addFilter(column, 'lt', value);\n    return this;\n  }\n\n  lte(column: string, value: unknown): this {\n    this.addFilter(column, 'lte', value);\n    return this;\n  }\n\n  like(column: string, pattern: string): this {\n    this.addFilter(column, 'like', pattern);\n    return this;\n  }\n\n  ilike(column: string, pattern: string): this {\n    this.addFilter(column, 'ilike', pattern);\n    return this;\n  }\n\n  is(column: string, value: boolean | null): this {\n    this.addFilter(column, 'is', value);\n    return this;\n  }\n\n  in(column: string, values: unknown[]): this {\n    this.addFilter(column, 'in', values);\n    return this;\n  }\n\n  contains(column: string, value: unknown): this {\n    this.addFilter(column, 'contains', value);\n    return this;\n  }\n\n  containedBy(column: string, value: unknown): this {\n    this.addFilter(column, 'containedBy', value);\n    return this;\n  }\n\n  overlap(column: string, value: unknown[]): this {\n    this.addFilter(column, 'overlap', value);\n    return this;\n  }\n\n  order(column: string, options?: { ascending?: boolean }): this {\n    if (!this.options.orderBy) {\n      this.options.orderBy = [];\n    }\n    this.options.orderBy.push({\n      column,\n      direction: options?.ascending === false ? 'desc' : 'asc',\n    });\n    return this;\n  }\n\n  limit(count: number): this {\n    this.options.limit = count;\n    return this;\n  }\n\n  range(from: number, to: number): this {\n    this.options.offset = from;\n    this.options.limit = to - from + 1;\n    return this;\n  }\n\n  single(): this {\n    this.isSingle = true;\n    this.options.limit = 1;\n    return this;\n  }\n\n  maybeSingle(): this {\n    this.isSingle = true;\n    this.options.limit = 1;\n    return this;\n  }\n\n  private addFilter(column: string, operator: QueryOperator, value: unknown): void {\n    if (!this.options.filters) {\n      this.options.filters = [];\n    }\n    this.options.filters.push({ column, operator, value });\n  }\n\n  getTable(): string {\n    return this.tableName;\n  }\n\n  getOptions(): QueryOptions {\n    return { ...this.options };\n  }\n\n  isSingleResult(): boolean {\n    return this.isSingle;\n  }\n}\n\n// ============================================================================\n// Service Manager\n// ============================================================================\n\nexport class SupabaseService {\n  private config: ServiceConfig;\n  private authState: AuthState = {\n    session: null,\n    user: null,\n    isLoading: true,\n    error: null,\n  };\n  private subscriptions: Map<string, RealtimeSubscription> = new Map();\n  private authListeners: Set<(state: AuthState) => void> = new Set();\n\n  constructor(config: ServiceConfig) {\n    this.config = {\n      schema: 'public',\n      autoRefreshToken: true,\n      persistSession: true,\n      detectSessionInUrl: true,\n      ...config,\n    };\n  }\n\n  // ==========================================================================\n  // Database Operations\n  // ==========================================================================\n\n  from<T = Record<string, unknown>>(table: string): QueryBuilder<T> {\n    return new QueryBuilder<T>(table);\n  }\n\n  buildSelectUrl(query: QueryBuilder): string {\n    const table = query.getTable();\n    const options = query.getOptions();\n    const params = new URLSearchParams();\n\n    if (options.select) {\n      params.set('select', options.select);\n    }\n\n    if (options.filters) {\n      for (const filter of options.filters) {\n        const value = this.formatFilterValue(filter.operator, filter.value);\n        params.append(filter.column, `${filter.operator}.${value}`);\n      }\n    }\n\n    if (options.orderBy) {\n      const orderStr = options.orderBy\n        .map(o => `${o.column}.${o.direction}`)\n        .join(',');\n      params.set('order', orderStr);\n    }\n\n    if (options.limit !== undefined) {\n      params.set('limit', String(options.limit));\n    }\n\n    if (options.offset !== undefined) {\n      params.set('offset', String(options.offset));\n    }\n\n    return `${this.config.url}/rest/v1/${table}?${params.toString()}`;\n  }\n\n  private formatFilterValue(operator: QueryOperator, value: unknown): string {\n    if (operator === 'in' && Array.isArray(value)) {\n      return `(${value.join(',')})`;\n    }\n    if (value === null) {\n      return 'null';\n    }\n    return String(value);\n  }\n\n  buildInsertUrl(table: string): string {\n    return `${this.config.url}/rest/v1/${table}`;\n  }\n\n  buildUpdateUrl(table: string): string {\n    return `${this.config.url}/rest/v1/${table}`;\n  }\n\n  buildDeleteUrl(table: string): string {\n    return `${this.config.url}/rest/v1/${table}`;\n  }\n\n  buildRpcUrl(functionName: string): string {\n    return `${this.config.url}/rest/v1/rpc/${functionName}`;\n  }\n\n  getHeaders(options?: { preferReturn?: 'minimal' | 'representation' }): Record<string, string> {\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      apikey: this.config.anonKey,\n      Authorization: `Bearer ${this.authState.session?.accessToken || this.config.anonKey}`,\n    };\n\n    if (options?.preferReturn) {\n      headers['Prefer'] = `return=${options.preferReturn}`;\n    }\n\n    return headers;\n  }\n\n  // ==========================================================================\n  // Auth Operations\n  // ==========================================================================\n\n  getAuthState(): AuthState {\n    return { ...this.authState };\n  }\n\n  onAuthStateChange(callback: (state: AuthState) => void): () => void {\n    this.authListeners.add(callback);\n    callback(this.authState);\n    return () => this.authListeners.delete(callback);\n  }\n\n  private notifyAuthListeners(): void {\n    const state = this.getAuthState();\n    for (const listener of this.authListeners) {\n      listener(state);\n    }\n  }\n\n  setSession(session: UserSession | null): void {\n    this.authState = {\n      session,\n      user: session?.user || null,\n      isLoading: false,\n      error: null,\n    };\n    this.notifyAuthListeners();\n  }\n\n  setAuthError(error: string): void {\n    this.authState = {\n      ...this.authState,\n      isLoading: false,\n      error,\n    };\n    this.notifyAuthListeners();\n  }\n\n  setAuthLoading(isLoading: boolean): void {\n    this.authState = {\n      ...this.authState,\n      isLoading,\n    };\n    this.notifyAuthListeners();\n  }\n\n  signOut(): void {\n    this.authState = {\n      session: null,\n      user: null,\n      isLoading: false,\n      error: null,\n    };\n    this.notifyAuthListeners();\n  }\n\n  buildAuthUrl(path: string): string {\n    return `${this.config.url}/auth/v1${path}`;\n  }\n\n  // ==========================================================================\n  // Realtime Operations\n  // ==========================================================================\n\n  subscribe(\n    table: string,\n    event: RealtimeEvent,\n    callback: (payload: RealtimePayload) => void,\n    filter?: string\n  ): RealtimeSubscription {\n    const id = `${table}:${event}:${Date.now()}`;\n\n    const subscription: RealtimeSubscription = {\n      id,\n      table,\n      event,\n      filter,\n      callback,\n      unsubscribe: () => {\n        this.subscriptions.delete(id);\n      },\n    };\n\n    this.subscriptions.set(id, subscription);\n    return subscription;\n  }\n\n  getSubscriptions(): RealtimeSubscription[] {\n    return Array.from(this.subscriptions.values());\n  }\n\n  unsubscribeAll(): void {\n    this.subscriptions.clear();\n  }\n\n  buildRealtimeUrl(): string {\n    const wsUrl = this.config.url.replace('https://', 'wss://').replace('http://', 'ws://');\n    return `${wsUrl}/realtime/v1/websocket?apikey=${this.config.anonKey}`;\n  }\n\n  // ==========================================================================\n  // Storage Operations\n  // ==========================================================================\n\n  buildStorageUrl(bucket: string, path: string): string {\n    return `${this.config.url}/storage/v1/object/${bucket}/${path}`;\n  }\n\n  buildPublicUrl(bucket: string, path: string): string {\n    return `${this.config.url}/storage/v1/object/public/${bucket}/${path}`;\n  }\n\n  buildSignedUrl(bucket: string, path: string, expiresIn: number): string {\n    return `${this.config.url}/storage/v1/object/sign/${bucket}/${path}?expiresIn=${expiresIn}`;\n  }\n\n  // ==========================================================================\n  // Edge Functions\n  // ==========================================================================\n\n  buildFunctionUrl(functionName: string): string {\n    return `${this.config.url}/functions/v1/${functionName}`;\n  }\n\n  // ==========================================================================\n  // Utilities\n  // ==========================================================================\n\n  getConfig(): ServiceConfig {\n    return { ...this.config };\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createSupabaseService(config: ServiceConfig): SupabaseService {\n  return new SupabaseService(config);\n}\n\nexport function createQueryBuilder<T = Record<string, unknown>>(table: string): QueryBuilder<T> {\n  return new QueryBuilder<T>(table);\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nexport function parsePostgrestError(error: unknown): DatabaseError {\n  if (typeof error === 'object' && error !== null) {\n    const e = error as Record<string, unknown>;\n    return {\n      code: String(e.code || 'UNKNOWN'),\n      message: String(e.message || 'An unknown error occurred'),\n      details: e.details ? String(e.details) : undefined,\n      hint: e.hint ? String(e.hint) : undefined,\n    };\n  }\n  return {\n    code: 'UNKNOWN',\n    message: String(error),\n  };\n}\n\nexport function isAuthError(error: DatabaseError): boolean {\n  return error.code.startsWith('PGRST3') || error.code === '401' || error.code === '403';\n}\n\nexport function isNotFoundError(error: DatabaseError): boolean {\n  return error.code === 'PGRST116' || error.code === '404';\n}\n\nexport function isConflictError(error: DatabaseError): boolean {\n  return error.code === '23505' || error.code === '409';\n}\n\nexport function isValidationError(error: DatabaseError): boolean {\n  return error.code.startsWith('22') || error.code.startsWith('23');\n}\n\nexport function formatFilterParams(filters: QueryFilter[]): Record<string, string> {\n  const params: Record<string, string> = {};\n  for (const filter of filters) {\n    const value = Array.isArray(filter.value)\n      ? `(${filter.value.join(',')})`\n      : String(filter.value);\n    params[filter.column] = `${filter.operator}.${value}`;\n  }\n  return params;\n}\n\nexport function parseJwtPayload(token: string): Record<string, unknown> | null {\n  try {\n    const parts = token.split('.');\n    if (parts.length !== 3) return null;\n    const payload = parts[1];\n    const decoded = atob(payload.replace(/-/g, '+').replace(/_/g, '/'));\n    return JSON.parse(decoded);\n  } catch {\n    return null;\n  }\n}\n\nexport function isTokenExpired(token: string, bufferSeconds: number = 60): boolean {\n  const payload = parseJwtPayload(token);\n  if (!payload || typeof payload.exp !== 'number') return true;\n  const now = Math.floor(Date.now() / 1000);\n  return payload.exp - bufferSeconds <= now;\n}\n\nexport function generateUUID(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n"],"mappings":"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","names":[]}