{"version":3,"sources":["../src/types.ts","../src/canvas.tsx","../src/hooks.ts"],"sourcesContent":["/**\n * @b0ase/flow-canvas - Types\n *\n * Type definitions for the flow canvas system.\n */\n\nimport { ReactNode } from 'react';\n\n// ============================================================================\n// Node Types\n// ============================================================================\n\n/** Built-in node categories */\nexport type NodeCategory =\n  | 'basic'\n  | 'business'\n  | 'integration'\n  | 'communication'\n  | 'logic'\n  | 'process';\n\n/** Node status */\nexport type NodeStatus = 'pending' | 'active' | 'completed' | 'failed' | 'paused';\n\n/** Built-in node types */\nexport type BuiltInNodeType =\n  // Basic\n  | 'payment'\n  | 'contract'\n  | 'task'\n  | 'decision'\n  | 'milestone'\n  | 'team'\n  // Business\n  | 'organization'\n  | 'role'\n  | 'member'\n  | 'instrument'\n  | 'asset'\n  // Integration\n  | 'api'\n  | 'webhook'\n  | 'database'\n  | 'email'\n  | 'sms'\n  // Logic\n  | 'condition'\n  | 'loop'\n  | 'switch'\n  | 'delay'\n  | 'trigger'\n  // Process\n  | 'approval'\n  | 'review'\n  | 'notification'\n  | 'timer'\n  | 'queue';\n\n/** Node definition */\nexport interface FlowNode<T extends string = string> {\n  id: string;\n  type: T;\n  name: string;\n  description?: string;\n  x: number;\n  y: number;\n  width?: number;\n  height?: number;\n  status: NodeStatus;\n  /** Node-specific data */\n  data?: Record<string, unknown>;\n  /** IDs of connected nodes (outgoing) */\n  connections: string[];\n  /** Custom metadata */\n  metadata?: Record<string, unknown>;\n}\n\n/** Node type definition (for registration) */\nexport interface NodeTypeDefinition<T extends string = string> {\n  type: T;\n  name: string;\n  description?: string;\n  category: NodeCategory | string;\n  icon?: ReactNode;\n  color?: string;\n  /** Default width */\n  defaultWidth?: number;\n  /** Default height */\n  defaultHeight?: number;\n  /** Fields that can be edited */\n  fields?: NodeFieldDefinition[];\n}\n\n/** Field definition for node editing */\nexport interface NodeFieldDefinition {\n  name: string;\n  label: string;\n  type: 'text' | 'number' | 'select' | 'boolean' | 'date' | 'money';\n  options?: { value: string; label: string }[];\n  placeholder?: string;\n  required?: boolean;\n}\n\n// ============================================================================\n// Connection Types\n// ============================================================================\n\n/** Connection type */\nexport type ConnectionType =\n  | 'default'\n  | 'success'\n  | 'failure'\n  | 'conditional'\n  | 'payment'\n  | 'task';\n\n/** Connection definition */\nexport interface Connection {\n  id: string;\n  from: string;\n  to: string;\n  type: ConnectionType;\n  /** Condition for conditional connections */\n  condition?: string;\n  /** Amount for payment connections */\n  amount?: number;\n  /** Label to show on connection */\n  label?: string;\n}\n\n// ============================================================================\n// Canvas State\n// ============================================================================\n\n/** Canvas tool modes */\nexport type CanvasTool = 'select' | 'pan' | 'connect' | 'delete' | 'zoom';\n\n/** Canvas state */\nexport interface CanvasState<T extends string = string> {\n  nodes: FlowNode<T>[];\n  connections: Connection[];\n  /** Currently selected node ID */\n  selectedNode: string | null;\n  /** Multi-selected node IDs */\n  selectedNodes: string[];\n  /** Node being connected from */\n  connectingFrom: string | null;\n  /** Node being dragged */\n  dragging: string | null;\n  /** Current tool mode */\n  tool: CanvasTool;\n  /** Canvas zoom scale */\n  scale: number;\n  /** Canvas offset (pan) */\n  offset: { x: number; y: number };\n  /** Whether to snap to grid */\n  gridSnap: boolean;\n  /** Whether to show grid */\n  showGrid: boolean;\n  /** Grid size in pixels */\n  gridSize: number;\n  /** Clipboard for copy/paste */\n  clipboard: FlowNode<T>[];\n}\n\n// ============================================================================\n// Event Types\n// ============================================================================\n\n/** Node event */\nexport interface NodeEvent<T extends string = string> {\n  node: FlowNode<T>;\n  /** Mouse position relative to canvas */\n  position?: { x: number; y: number };\n}\n\n/** Connection event */\nexport interface ConnectionEvent {\n  connection: Connection;\n  fromNode: FlowNode;\n  toNode: FlowNode;\n}\n\n/** Canvas event handlers */\nexport interface CanvasEventHandlers<T extends string = string> {\n  onNodeAdd?: (type: T, position: { x: number; y: number }) => void;\n  onNodeUpdate?: (id: string, updates: Partial<FlowNode<T>>) => void;\n  onNodeDelete?: (id: string) => void;\n  onNodeSelect?: (ids: string[]) => void;\n  onNodeDoubleClick?: (node: FlowNode<T>) => void;\n  onConnectionAdd?: (from: string, to: string, type?: ConnectionType) => void;\n  onConnectionDelete?: (id: string) => void;\n  onCanvasClick?: (position: { x: number; y: number }) => void;\n  onCanvasPan?: (offset: { x: number; y: number }) => void;\n  onCanvasZoom?: (scale: number) => void;\n}\n\n// ============================================================================\n// Component Props\n// ============================================================================\n\n/** Flow canvas props */\nexport interface FlowCanvasProps<T extends string = string> {\n  /** Canvas state */\n  state: CanvasState<T>;\n  /** Registered node types */\n  nodeTypes: NodeTypeDefinition<T>[];\n  /** Event handlers */\n  handlers: CanvasEventHandlers<T>;\n  /** Custom node renderer */\n  renderNode?: (\n    node: FlowNode<T>,\n    nodeType: NodeTypeDefinition<T> | undefined,\n    isSelected: boolean,\n    isDragging: boolean\n  ) => ReactNode;\n  /** Custom connection renderer */\n  renderConnection?: (\n    connection: Connection,\n    fromNode: FlowNode<T>,\n    toNode: FlowNode<T>\n  ) => ReactNode;\n  /** Whether mobile mode */\n  isMobile?: boolean;\n  /** CSS class name */\n  className?: string;\n}\n\n/** Node palette props */\nexport interface NodePaletteProps<T extends string = string> {\n  nodeTypes: NodeTypeDefinition<T>[];\n  onNodeAdd: (type: T) => void;\n  collapsed?: boolean;\n  onToggleCollapse?: () => void;\n}\n\n// ============================================================================\n// Utility Types\n// ============================================================================\n\n/** Point in 2D space */\nexport interface Point {\n  x: number;\n  y: number;\n}\n\n/** Rectangle bounds */\nexport interface Bounds {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n/** Get bounds of all nodes */\nexport function getNodesBounds<T extends string>(nodes: FlowNode<T>[]): Bounds {\n  if (nodes.length === 0) {\n    return { x: 0, y: 0, width: 0, height: 0 };\n  }\n\n  const xs = nodes.map((n) => n.x);\n  const ys = nodes.map((n) => n.y);\n  const xEnds = nodes.map((n) => n.x + (n.width || 240));\n  const yEnds = nodes.map((n) => n.y + (n.height || 60));\n\n  const minX = Math.min(...xs);\n  const minY = Math.min(...ys);\n  const maxX = Math.max(...xEnds);\n  const maxY = Math.max(...yEnds);\n\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n","'use client';\n\n/**\n * @b0ase/flow-canvas - Canvas Component\n *\n * SVG-based workflow canvas with nodes, connections, and drag-drop support.\n */\n\nimport React, {\n  useRef,\n  useState,\n  useCallback,\n  useEffect,\n  MouseEvent,\n  TouchEvent,\n} from 'react';\nimport type {\n  FlowCanvasProps,\n  FlowNode,\n  Connection,\n  NodeTypeDefinition,\n  Point,\n  CanvasTool,\n} from './types';\n\n// ============================================================================\n// Styles\n// ============================================================================\n\nconst defaultNodeColors: Record<string, string> = {\n  payment: '#eab308',\n  contract: '#3b82f6',\n  task: '#22c55e',\n  decision: '#a855f7',\n  milestone: '#6366f1',\n  team: '#ec4899',\n  organization: '#06b6d4',\n  role: '#f97316',\n  member: '#84cc16',\n  api: '#8b5cf6',\n  webhook: '#14b8a6',\n  condition: '#f59e0b',\n  default: '#6b7280',\n};\n\nconst connectionColors: Record<string, string> = {\n  default: 'stroke-gray-400',\n  success: 'stroke-green-400',\n  failure: 'stroke-red-400',\n  conditional: 'stroke-purple-400',\n  payment: 'stroke-yellow-400',\n  task: 'stroke-blue-400',\n};\n\nconst statusColors: Record<string, string> = {\n  pending: 'bg-yellow-400',\n  active: 'bg-green-400',\n  completed: 'bg-blue-400',\n  failed: 'bg-red-400',\n  paused: 'bg-gray-400',\n};\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\nfunction getNodeColor<T extends string>(\n  type: T,\n  nodeTypes: NodeTypeDefinition<T>[]\n): string {\n  const def = nodeTypes.find((n) => n.type === type);\n  return def?.color || defaultNodeColors[type] || defaultNodeColors.default;\n}\n\nfunction getConnectionColor(type: string): string {\n  return connectionColors[type] || connectionColors.default;\n}\n\nfunction getStatusColor(status: string): string {\n  return statusColors[status] || statusColors.pending;\n}\n\nfunction snapToGrid(value: number, gridSize: number, enabled: boolean): number {\n  if (!enabled) return value;\n  return Math.round(value / gridSize) * gridSize;\n}\n\n// ============================================================================\n// Canvas Component\n// ============================================================================\n\n/**\n * Flow Canvas\n *\n * A draggable, zoomable canvas for rendering workflow diagrams.\n *\n * @example\n * ```tsx\n * import { FlowCanvas, useFlowCanvas } from '@b0ase/flow-canvas';\n *\n * function WorkflowEditor() {\n *   const { state, nodeTypes, handlers } = useFlowCanvas();\n *\n *   return (\n *     <FlowCanvas\n *       state={state}\n *       nodeTypes={nodeTypes}\n *       handlers={handlers}\n *     />\n *   );\n * }\n * ```\n */\nexport function FlowCanvas<T extends string = string>({\n  state,\n  nodeTypes,\n  handlers,\n  renderNode,\n  renderConnection,\n  isMobile = false,\n  className = '',\n}: FlowCanvasProps<T>) {\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const [isPanning, setIsPanning] = useState(false);\n  const [panStart, setPanStart] = useState<Point | null>(null);\n  const [dragStart, setDragStart] = useState<Point | null>(null);\n  const [dragOffset, setDragOffset] = useState<Point | null>(null);\n\n  // Get node position helper\n  const getNodePosition = useCallback(\n    (id: string): FlowNode<T> | undefined => {\n      return state.nodes.find((n) => n.id === id);\n    },\n    [state.nodes]\n  );\n\n  // Mouse handlers\n  const handleMouseDown = useCallback(\n    (e: MouseEvent) => {\n      if (e.button !== 0) return; // Only left click\n\n      const rect = canvasRef.current?.getBoundingClientRect();\n      if (!rect) return;\n\n      const x = (e.clientX - rect.left - state.offset.x) / state.scale;\n      const y = (e.clientY - rect.top - state.offset.y) / state.scale;\n\n      // Start panning if pan tool or clicking empty space with select tool\n      if (state.tool === 'pan' || (state.tool === 'select' && e.target === e.currentTarget)) {\n        setIsPanning(true);\n        setPanStart({ x: e.clientX - state.offset.x, y: e.clientY - state.offset.y });\n      }\n    },\n    [state.tool, state.offset, state.scale]\n  );\n\n  const handleMouseMove = useCallback(\n    (e: MouseEvent) => {\n      if (isPanning && panStart) {\n        const newOffset = {\n          x: e.clientX - panStart.x,\n          y: e.clientY - panStart.y,\n        };\n        handlers.onCanvasPan?.(newOffset);\n      }\n\n      if (state.dragging && dragStart && dragOffset) {\n        const rect = canvasRef.current?.getBoundingClientRect();\n        if (!rect) return;\n\n        const x = (e.clientX - rect.left - state.offset.x) / state.scale - dragOffset.x;\n        const y = (e.clientY - rect.top - state.offset.y) / state.scale - dragOffset.y;\n\n        const snappedX = snapToGrid(x, state.gridSize, state.gridSnap);\n        const snappedY = snapToGrid(y, state.gridSize, state.gridSnap);\n\n        handlers.onNodeUpdate?.(state.dragging, { x: snappedX, y: snappedY });\n      }\n    },\n    [\n      isPanning,\n      panStart,\n      state.dragging,\n      dragStart,\n      dragOffset,\n      state.offset,\n      state.scale,\n      state.gridSize,\n      state.gridSnap,\n      handlers,\n    ]\n  );\n\n  const handleMouseUp = useCallback(() => {\n    setIsPanning(false);\n    setPanStart(null);\n    setDragStart(null);\n    setDragOffset(null);\n  }, []);\n\n  // Node mouse handlers\n  const handleNodeMouseDown = useCallback(\n    (e: MouseEvent, nodeId: string) => {\n      e.stopPropagation();\n\n      const rect = canvasRef.current?.getBoundingClientRect();\n      if (!rect) return;\n\n      const node = state.nodes.find((n) => n.id === nodeId);\n      if (!node) return;\n\n      const clientX = (e.clientX - rect.left - state.offset.x) / state.scale;\n      const clientY = (e.clientY - rect.top - state.offset.y) / state.scale;\n\n      if (state.tool === 'delete') {\n        handlers.onNodeDelete?.(nodeId);\n        return;\n      }\n\n      if (state.tool === 'connect') {\n        if (state.connectingFrom) {\n          handlers.onConnectionAdd?.(state.connectingFrom, nodeId);\n        } else {\n          // Start connecting (handled by parent)\n          handlers.onNodeSelect?.([nodeId]);\n        }\n        return;\n      }\n\n      if (state.tool === 'select') {\n        // Multi-select with ctrl/cmd\n        if (e.ctrlKey || e.metaKey) {\n          const isSelected = state.selectedNodes.includes(nodeId);\n          const newSelection = isSelected\n            ? state.selectedNodes.filter((id) => id !== nodeId)\n            : [...state.selectedNodes, nodeId];\n          handlers.onNodeSelect?.(newSelection);\n        } else {\n          handlers.onNodeSelect?.([nodeId]);\n        }\n\n        // Start dragging\n        setDragStart({ x: clientX, y: clientY });\n        setDragOffset({ x: clientX - node.x, y: clientY - node.y });\n      }\n    },\n    [state, handlers]\n  );\n\n  // Wheel handler for zoom\n  const handleWheel = useCallback(\n    (e: React.WheelEvent) => {\n      e.preventDefault();\n\n      const delta = e.deltaY > 0 ? 0.9 : 1.1;\n      const newScale = Math.min(Math.max(state.scale * delta, 0.1), 3);\n\n      const rect = canvasRef.current?.getBoundingClientRect();\n      if (!rect) return;\n\n      // Zoom toward cursor position\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n\n      const newOffset = {\n        x: mouseX - (mouseX - state.offset.x) * (newScale / state.scale),\n        y: mouseY - (mouseY - state.offset.y) * (newScale / state.scale),\n      };\n\n      handlers.onCanvasZoom?.(newScale);\n      handlers.onCanvasPan?.(newOffset);\n    },\n    [state.scale, state.offset, handlers]\n  );\n\n  // Canvas click handler\n  const handleCanvasClick = useCallback(\n    (e: MouseEvent) => {\n      if (e.target !== e.currentTarget) return;\n\n      const rect = canvasRef.current?.getBoundingClientRect();\n      if (!rect) return;\n\n      const x = (e.clientX - rect.left - state.offset.x) / state.scale;\n      const y = (e.clientY - rect.top - state.offset.y) / state.scale;\n\n      handlers.onCanvasClick?.({ x, y });\n\n      // Clear selection on canvas click\n      if (state.tool === 'select') {\n        handlers.onNodeSelect?.([]);\n      }\n    },\n    [state.offset, state.scale, state.tool, handlers]\n  );\n\n  // Get cursor style based on tool\n  const getCursor = (): string => {\n    if (isPanning) return 'grabbing';\n    switch (state.tool) {\n      case 'pan':\n        return 'grab';\n      case 'connect':\n        return 'crosshair';\n      case 'delete':\n        return 'not-allowed';\n      case 'zoom':\n        return 'zoom-in';\n      default:\n        return 'default';\n    }\n  };\n\n  return (\n    <div\n      ref={canvasRef}\n      className={`relative overflow-hidden bg-black/20 ${className}`}\n      style={{ cursor: getCursor() }}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onMouseLeave={handleMouseUp}\n      onClick={handleCanvasClick}\n      onWheel={handleWheel}\n    >\n      {/* Transformed content layer */}\n      <div\n        style={{\n          transform: `scale(${state.scale}) translate(${state.offset.x / state.scale}px, ${state.offset.y / state.scale}px)`,\n          transformOrigin: '0 0',\n          width: '100%',\n          height: '100%',\n          position: 'absolute',\n        }}\n      >\n        {/* Grid background */}\n        {state.showGrid && (\n          <svg className=\"absolute inset-0 w-full h-full pointer-events-none opacity-20\">\n            <defs>\n              <pattern\n                id=\"flow-canvas-grid\"\n                width={state.gridSize}\n                height={state.gridSize}\n                patternUnits=\"userSpaceOnUse\"\n              >\n                <path\n                  d={`M ${state.gridSize} 0 L 0 0 0 ${state.gridSize}`}\n                  fill=\"none\"\n                  stroke=\"white\"\n                  strokeWidth=\"0.5\"\n                  opacity=\"0.3\"\n                />\n              </pattern>\n            </defs>\n            <rect width=\"100%\" height=\"100%\" fill=\"url(#flow-canvas-grid)\" />\n          </svg>\n        )}\n\n        {/* SVG for connections */}\n        <svg className=\"absolute inset-0 w-full h-full pointer-events-none\">\n          <defs>\n            <marker\n              id=\"flow-canvas-arrow\"\n              markerWidth=\"8\"\n              markerHeight=\"6\"\n              refX=\"7\"\n              refY=\"3\"\n              orient=\"auto\"\n            >\n              <polygon points=\"0 0, 8 3, 0 6\" fill=\"currentColor\" className=\"text-white\" />\n            </marker>\n          </defs>\n\n          {state.connections.map((connection) => {\n            const from = getNodePosition(connection.from);\n            const to = getNodePosition(connection.to);\n            if (!from || !to) return null;\n\n            const fromX = from.x + (from.width || 240) / 2;\n            const fromY = from.y + (from.height || 60) / 2;\n            const toX = to.x + (to.width || 240) / 2;\n            const toY = to.y + (to.height || 60) / 2;\n\n            if (renderConnection) {\n              return renderConnection(connection, from, to);\n            }\n\n            return (\n              <g key={connection.id}>\n                {/* Shadow line */}\n                <line\n                  x1={fromX}\n                  y1={fromY}\n                  x2={toX}\n                  y2={toY}\n                  stroke=\"rgba(255, 255, 255, 0.1)\"\n                  strokeWidth=\"4\"\n                  strokeDasharray=\"5,5\"\n                />\n                {/* Main line */}\n                <line\n                  x1={fromX}\n                  y1={fromY}\n                  x2={toX}\n                  y2={toY}\n                  className={getConnectionColor(connection.type)}\n                  strokeWidth=\"2\"\n                  markerEnd=\"url(#flow-canvas-arrow)\"\n                />\n                {/* Label */}\n                {connection.label && (\n                  <text\n                    x={(fromX + toX) / 2}\n                    y={(fromY + toY) / 2 - 10}\n                    className=\"text-xs fill-white\"\n                    textAnchor=\"middle\"\n                  >\n                    {connection.label}\n                  </text>\n                )}\n                {connection.amount !== undefined && (\n                  <text\n                    x={(fromX + toX) / 2}\n                    y={(fromY + toY) / 2 + 5}\n                    className=\"text-xs fill-yellow-400\"\n                    textAnchor=\"middle\"\n                  >\n                    ${connection.amount.toLocaleString()}\n                  </text>\n                )}\n              </g>\n            );\n          })}\n\n          {/* Connection in progress */}\n          {state.connectingFrom && (\n            <line\n              x1={getNodePosition(state.connectingFrom)?.x || 0}\n              y1={getNodePosition(state.connectingFrom)?.y || 0}\n              x2={getNodePosition(state.connectingFrom)?.x || 0}\n              y2={getNodePosition(state.connectingFrom)?.y || 0}\n              className=\"stroke-green-400\"\n              strokeWidth=\"2\"\n              strokeDasharray=\"5,5\"\n            />\n          )}\n        </svg>\n\n        {/* Nodes */}\n        {state.nodes.map((node) => {\n          const nodeType = nodeTypes.find((n) => n.type === node.type);\n          const isSelected =\n            state.selectedNode === node.id || state.selectedNodes.includes(node.id);\n          const isDragging = state.dragging === node.id;\n          const isConnecting = state.connectingFrom === node.id;\n          const nodeColor = getNodeColor(node.type, nodeTypes);\n\n          if (renderNode) {\n            return renderNode(node, nodeType, isSelected, isDragging);\n          }\n\n          return (\n            <div\n              key={node.id}\n              className={`absolute bg-black/60 backdrop-blur-xl border rounded-xl transition-all duration-200 shadow-2xl hover:shadow-white/5 ${\n                isSelected\n                  ? 'border-blue-400/60 ring-2 ring-blue-400/30'\n                  : isConnecting\n                    ? 'ring-2 ring-green-400/50 border-green-400/60'\n                    : 'border-white/20'\n              } ${state.tool === 'delete' ? 'hover:border-red-400/60 hover:ring-2 hover:ring-red-400/30' : ''}`}\n              style={{\n                left: snapToGrid(node.x, state.gridSize, state.gridSnap),\n                top: snapToGrid(node.y, state.gridSize, state.gridSnap),\n                width: node.width || 240,\n                minHeight: node.height || 60,\n                transform: isDragging ? 'scale(1.05)' : 'scale(1)',\n                zIndex: isDragging ? 1000 : isSelected ? 100 : 10,\n                cursor:\n                  state.tool === 'select'\n                    ? 'move'\n                    : state.tool === 'connect'\n                      ? 'crosshair'\n                      : state.tool === 'delete'\n                        ? 'not-allowed'\n                        : 'pointer',\n              }}\n              onMouseDown={(e) => handleNodeMouseDown(e, node.id)}\n              onDoubleClick={() => handlers.onNodeDoubleClick?.(node)}\n            >\n              {/* Node header */}\n              <div className=\"flex items-center justify-between p-3\">\n                <div className=\"flex items-center space-x-2\">\n                  {/* Status indicator */}\n                  <div className={`w-2 h-2 rounded-full ${getStatusColor(node.status)}`} />\n                  {/* Node icon */}\n                  <div\n                    className=\"w-6 h-6 rounded-lg flex items-center justify-center\"\n                    style={{ backgroundColor: `${nodeColor}20` }}\n                  >\n                    {nodeType?.icon ? (\n                      nodeType.icon\n                    ) : (\n                      <span style={{ color: nodeColor }} className=\"text-xs font-bold\">\n                        {node.type[0].toUpperCase()}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                {/* Type badge */}\n                <span\n                  className=\"text-xs px-2 py-0.5 rounded-full\"\n                  style={{ backgroundColor: `${nodeColor}20`, color: nodeColor }}\n                >\n                  {nodeType?.name || node.type}\n                </span>\n              </div>\n\n              {/* Node content */}\n              <div className=\"px-3 pb-3 space-y-1\">\n                <div className=\"text-white text-sm font-medium truncate\">{node.name}</div>\n                {node.description && (\n                  <div className=\"text-gray-400 text-xs truncate\">{node.description}</div>\n                )}\n                {/* Payment amount */}\n                {node.data?.amount != null && (\n                  <div className=\"text-yellow-400 text-sm font-medium\">\n                    ${Number(node.data.amount).toLocaleString()}\n                  </div>\n                )}\n                {/* Deadline */}\n                {node.data?.deadline != null && (\n                  <div className=\"text-gray-400 text-xs\">\n                    Due: {new Date(String(node.data.deadline)).toLocaleDateString()}\n                  </div>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Canvas info overlay */}\n      <div className=\"absolute bottom-4 right-4 bg-black/50 backdrop-blur-sm rounded-lg px-3 py-2 text-xs text-gray-300 pointer-events-none\">\n        {state.nodes.length} nodes &bull; {state.connections.length} connections &bull;{' '}\n        {Math.round(state.scale * 100)}%\n      </div>\n    </div>\n  );\n}\n\nexport default FlowCanvas;\n","'use client';\n\n/**\n * @b0ase/flow-canvas - Hooks\n *\n * React hooks for managing flow canvas state.\n */\n\nimport { useState, useCallback, useMemo } from 'react';\nimport type {\n  CanvasState,\n  FlowNode,\n  Connection,\n  NodeTypeDefinition,\n  CanvasEventHandlers,\n  CanvasTool,\n  ConnectionType,\n} from './types';\n\n// ============================================================================\n// Default State\n// ============================================================================\n\nfunction createDefaultState<T extends string>(): CanvasState<T> {\n  return {\n    nodes: [],\n    connections: [],\n    selectedNode: null,\n    selectedNodes: [],\n    connectingFrom: null,\n    dragging: null,\n    tool: 'select',\n    scale: 1,\n    offset: { x: 0, y: 0 },\n    gridSnap: true,\n    showGrid: true,\n    gridSize: 20,\n    clipboard: [],\n  };\n}\n\n// ============================================================================\n// useFlowCanvas Hook\n// ============================================================================\n\nexport interface UseFlowCanvasOptions<T extends string> {\n  /** Initial state */\n  initialState?: Partial<CanvasState<T>>;\n  /** Node type definitions */\n  nodeTypes?: NodeTypeDefinition<T>[];\n  /** Callback when state changes */\n  onChange?: (state: CanvasState<T>) => void;\n}\n\nexport interface UseFlowCanvasReturn<T extends string> {\n  state: CanvasState<T>;\n  nodeTypes: NodeTypeDefinition<T>[];\n  handlers: CanvasEventHandlers<T>;\n  // State setters\n  setState: React.Dispatch<React.SetStateAction<CanvasState<T>>>;\n  setTool: (tool: CanvasTool) => void;\n  setScale: (scale: number) => void;\n  resetView: () => void;\n  // Node operations\n  addNode: (type: T, position: { x: number; y: number }, data?: Partial<FlowNode<T>>) => string;\n  updateNode: (id: string, updates: Partial<FlowNode<T>>) => void;\n  deleteNode: (id: string) => void;\n  deleteNodes: (ids: string[]) => void;\n  // Connection operations\n  addConnection: (from: string, to: string, type?: ConnectionType) => string;\n  deleteConnection: (id: string) => void;\n  // Selection\n  selectNodes: (ids: string[]) => void;\n  selectAll: () => void;\n  clearSelection: () => void;\n  // Clipboard\n  copy: () => void;\n  paste: (offset?: { x: number; y: number }) => void;\n  cut: () => void;\n  // Grid\n  toggleGrid: () => void;\n  toggleGridSnap: () => void;\n  // Serialization\n  toJSON: () => string;\n  fromJSON: (json: string) => void;\n}\n\n/**\n * Hook for managing flow canvas state\n *\n * @example\n * ```tsx\n * const { state, handlers, addNode, setTool } = useFlowCanvas({\n *   nodeTypes: myNodeTypes,\n *   onChange: (state) => saveToDatabase(state),\n * });\n *\n * return <FlowCanvas state={state} nodeTypes={nodeTypes} handlers={handlers} />;\n * ```\n */\nexport function useFlowCanvas<T extends string = string>(\n  options: UseFlowCanvasOptions<T> = {}\n): UseFlowCanvasReturn<T> {\n  const { initialState, nodeTypes = [], onChange } = options;\n\n  const [state, setState] = useState<CanvasState<T>>(() => ({\n    ...createDefaultState<T>(),\n    ...initialState,\n  }));\n\n  // Notify on state change\n  const updateState = useCallback(\n    (updater: (prev: CanvasState<T>) => CanvasState<T>) => {\n      setState((prev) => {\n        const next = updater(prev);\n        onChange?.(next);\n        return next;\n      });\n    },\n    [onChange]\n  );\n\n  // Generate unique ID\n  const generateId = useCallback(() => {\n    return `node-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }, []);\n\n  // Node operations\n  const addNode = useCallback(\n    (type: T, position: { x: number; y: number }, data?: Partial<FlowNode<T>>): string => {\n      const id = generateId();\n      const nodeDef = nodeTypes.find((n) => n.type === type);\n\n      const newNode: FlowNode<T> = {\n        id,\n        type,\n        name: data?.name || nodeDef?.name || type,\n        description: data?.description || nodeDef?.description,\n        x: position.x,\n        y: position.y,\n        width: data?.width || nodeDef?.defaultWidth || 240,\n        height: data?.height || nodeDef?.defaultHeight || 60,\n        status: data?.status || 'pending',\n        data: data?.data || {},\n        connections: data?.connections || [],\n        metadata: data?.metadata || {},\n      };\n\n      updateState((prev) => ({\n        ...prev,\n        nodes: [...prev.nodes, newNode],\n        selectedNode: id,\n        selectedNodes: [id],\n      }));\n\n      return id;\n    },\n    [generateId, nodeTypes, updateState]\n  );\n\n  const updateNode = useCallback(\n    (id: string, updates: Partial<FlowNode<T>>) => {\n      updateState((prev) => ({\n        ...prev,\n        nodes: prev.nodes.map((n) => (n.id === id ? { ...n, ...updates } : n)),\n      }));\n    },\n    [updateState]\n  );\n\n  const deleteNode = useCallback(\n    (id: string) => {\n      updateState((prev) => ({\n        ...prev,\n        nodes: prev.nodes.filter((n) => n.id !== id),\n        connections: prev.connections.filter((c) => c.from !== id && c.to !== id),\n        selectedNode: prev.selectedNode === id ? null : prev.selectedNode,\n        selectedNodes: prev.selectedNodes.filter((nid) => nid !== id),\n        dragging: prev.dragging === id ? null : prev.dragging,\n        connectingFrom: prev.connectingFrom === id ? null : prev.connectingFrom,\n      }));\n    },\n    [updateState]\n  );\n\n  const deleteNodes = useCallback(\n    (ids: string[]) => {\n      updateState((prev) => ({\n        ...prev,\n        nodes: prev.nodes.filter((n) => !ids.includes(n.id)),\n        connections: prev.connections.filter((c) => !ids.includes(c.from) && !ids.includes(c.to)),\n        selectedNode: ids.includes(prev.selectedNode || '') ? null : prev.selectedNode,\n        selectedNodes: prev.selectedNodes.filter((id) => !ids.includes(id)),\n        dragging: ids.includes(prev.dragging || '') ? null : prev.dragging,\n        connectingFrom: ids.includes(prev.connectingFrom || '') ? null : prev.connectingFrom,\n      }));\n    },\n    [updateState]\n  );\n\n  // Connection operations\n  const addConnection = useCallback(\n    (from: string, to: string, type: ConnectionType = 'default'): string => {\n      // Don't allow self-connections or duplicate connections\n      if (from === to) return '';\n\n      const id = `conn-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n      updateState((prev) => {\n        const exists = prev.connections.some((c) => c.from === from && c.to === to);\n        if (exists) return prev;\n\n        const newConnection: Connection = { id, from, to, type };\n        return {\n          ...prev,\n          connections: [...prev.connections, newConnection],\n          connectingFrom: null,\n        };\n      });\n\n      return id;\n    },\n    [updateState]\n  );\n\n  const deleteConnection = useCallback(\n    (id: string) => {\n      updateState((prev) => ({\n        ...prev,\n        connections: prev.connections.filter((c) => c.id !== id),\n      }));\n    },\n    [updateState]\n  );\n\n  // Selection\n  const selectNodes = useCallback(\n    (ids: string[]) => {\n      updateState((prev) => ({\n        ...prev,\n        selectedNode: ids.length === 1 ? ids[0] : null,\n        selectedNodes: ids,\n      }));\n    },\n    [updateState]\n  );\n\n  const selectAll = useCallback(() => {\n    updateState((prev) => ({\n      ...prev,\n      selectedNode: null,\n      selectedNodes: prev.nodes.map((n) => n.id),\n    }));\n  }, [updateState]);\n\n  const clearSelection = useCallback(() => {\n    updateState((prev) => ({\n      ...prev,\n      selectedNode: null,\n      selectedNodes: [],\n    }));\n  }, [updateState]);\n\n  // Tool\n  const setTool = useCallback(\n    (tool: CanvasTool) => {\n      updateState((prev) => ({\n        ...prev,\n        tool,\n        connectingFrom: tool !== 'connect' ? null : prev.connectingFrom,\n      }));\n    },\n    [updateState]\n  );\n\n  // Scale/View\n  const setScale = useCallback(\n    (scale: number) => {\n      updateState((prev) => ({\n        ...prev,\n        scale: Math.min(Math.max(scale, 0.1), 3),\n      }));\n    },\n    [updateState]\n  );\n\n  const resetView = useCallback(() => {\n    updateState((prev) => ({\n      ...prev,\n      scale: 1,\n      offset: { x: 0, y: 0 },\n    }));\n  }, [updateState]);\n\n  // Clipboard\n  const copy = useCallback(() => {\n    updateState((prev) => ({\n      ...prev,\n      clipboard: prev.nodes.filter((n) => prev.selectedNodes.includes(n.id)),\n    }));\n  }, [updateState]);\n\n  const paste = useCallback(\n    (offset = { x: 20, y: 20 }) => {\n      updateState((prev) => {\n        if (prev.clipboard.length === 0) return prev;\n\n        const idMap = new Map<string, string>();\n        const newNodes = prev.clipboard.map((n) => {\n          const newId = generateId();\n          idMap.set(n.id, newId);\n          return {\n            ...n,\n            id: newId,\n            x: n.x + offset.x,\n            y: n.y + offset.y,\n            connections: [],\n          };\n        });\n\n        return {\n          ...prev,\n          nodes: [...prev.nodes, ...newNodes],\n          selectedNode: null,\n          selectedNodes: newNodes.map((n) => n.id),\n        };\n      });\n    },\n    [generateId, updateState]\n  );\n\n  const cut = useCallback(() => {\n    updateState((prev) => {\n      const clipboard = prev.nodes.filter((n) => prev.selectedNodes.includes(n.id));\n      return {\n        ...prev,\n        clipboard,\n        nodes: prev.nodes.filter((n) => !prev.selectedNodes.includes(n.id)),\n        connections: prev.connections.filter(\n          (c) => !prev.selectedNodes.includes(c.from) && !prev.selectedNodes.includes(c.to)\n        ),\n        selectedNode: null,\n        selectedNodes: [],\n      };\n    });\n  }, [updateState]);\n\n  // Grid\n  const toggleGrid = useCallback(() => {\n    updateState((prev) => ({ ...prev, showGrid: !prev.showGrid }));\n  }, [updateState]);\n\n  const toggleGridSnap = useCallback(() => {\n    updateState((prev) => ({ ...prev, gridSnap: !prev.gridSnap }));\n  }, [updateState]);\n\n  // Serialization\n  const toJSON = useCallback(() => {\n    return JSON.stringify({\n      nodes: state.nodes,\n      connections: state.connections,\n    });\n  }, [state.nodes, state.connections]);\n\n  const fromJSON = useCallback(\n    (json: string) => {\n      try {\n        const data = JSON.parse(json);\n        updateState((prev) => ({\n          ...prev,\n          nodes: data.nodes || [],\n          connections: data.connections || [],\n          selectedNode: null,\n          selectedNodes: [],\n        }));\n      } catch (e) {\n        console.error('Failed to parse flow JSON:', e);\n      }\n    },\n    [updateState]\n  );\n\n  // Event handlers for canvas component\n  const handlers: CanvasEventHandlers<T> = useMemo(\n    () => ({\n      onNodeAdd: (type, position) => addNode(type, position),\n      onNodeUpdate: updateNode,\n      onNodeDelete: deleteNode,\n      onNodeSelect: selectNodes,\n      onNodeDoubleClick: (node) => {\n        // Can be overridden by consumer\n      },\n      onConnectionAdd: addConnection,\n      onConnectionDelete: deleteConnection,\n      onCanvasClick: () => clearSelection(),\n      onCanvasPan: (offset) => updateState((prev) => ({ ...prev, offset })),\n      onCanvasZoom: setScale,\n    }),\n    [addNode, updateNode, deleteNode, selectNodes, addConnection, deleteConnection, clearSelection, updateState, setScale]\n  );\n\n  return {\n    state,\n    nodeTypes,\n    handlers,\n    setState,\n    setTool,\n    setScale,\n    resetView,\n    addNode,\n    updateNode,\n    deleteNode,\n    deleteNodes,\n    addConnection,\n    deleteConnection,\n    selectNodes,\n    selectAll,\n    clearSelection,\n    copy,\n    paste,\n    cut,\n    toggleGrid,\n    toggleGridSnap,\n    toJSON,\n    fromJSON,\n  };\n}\n"],"mappings":"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","names":["useState","useCallback"]}