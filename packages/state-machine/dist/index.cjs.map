{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/state-machine\n *\n * Type-safe finite state machine with guards and actions.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** State machine context */\nexport type MachineContext = Record<string, unknown>;\n\n/** Event object */\nexport interface MachineEvent<T extends string = string> {\n  type: T;\n  data?: unknown;\n}\n\n/** Guard function */\nexport type Guard<TContext extends MachineContext, TEvent extends MachineEvent> = (\n  context: TContext,\n  event: TEvent\n) => boolean;\n\n/** Action function */\nexport type Action<TContext extends MachineContext, TEvent extends MachineEvent> = (\n  context: TContext,\n  event: TEvent\n) => void | Partial<TContext> | Promise<void | Partial<TContext>>;\n\n/** Transition definition */\nexport interface Transition<\n  TContext extends MachineContext = MachineContext,\n  TEvent extends MachineEvent = MachineEvent\n> {\n  target: string;\n  guard?: Guard<TContext, TEvent>;\n  actions?: Array<Action<TContext, TEvent>>;\n}\n\n/** State definition */\nexport interface StateDefinition<\n  TContext extends MachineContext = MachineContext,\n  TEvent extends MachineEvent = MachineEvent\n> {\n  on?: Record<string, string | Transition<TContext, TEvent> | Array<Transition<TContext, TEvent>>>;\n  entry?: Array<Action<TContext, TEvent>>;\n  exit?: Array<Action<TContext, TEvent>>;\n  meta?: Record<string, unknown>;\n}\n\n/** Machine configuration */\nexport interface MachineConfig<\n  TContext extends MachineContext = MachineContext,\n  TEvent extends MachineEvent = MachineEvent\n> {\n  id: string;\n  initial: string;\n  context: TContext;\n  states: Record<string, StateDefinition<TContext, TEvent>>;\n}\n\n/** Machine snapshot */\nexport interface MachineSnapshot<TContext extends MachineContext = MachineContext> {\n  value: string;\n  context: TContext;\n  history: string[];\n}\n\n/** Transition listener */\nexport type TransitionListener<TContext extends MachineContext = MachineContext> = (\n  snapshot: MachineSnapshot<TContext>\n) => void;\n\n// ============================================================================\n// State Machine\n// ============================================================================\n\nexport class StateMachine<\n  TContext extends MachineContext = MachineContext,\n  TEvent extends MachineEvent = MachineEvent\n> {\n  private config: MachineConfig<TContext, TEvent>;\n  private currentState: string;\n  private context: TContext;\n  private history: string[] = [];\n  private listeners: Set<TransitionListener<TContext>> = new Set();\n\n  constructor(config: MachineConfig<TContext, TEvent>) {\n    this.config = config;\n    this.currentState = config.initial;\n    this.context = { ...config.context };\n\n    // Execute entry actions for initial state\n    const initialState = this.config.states[this.currentState];\n    if (initialState?.entry) {\n      this.executeActions(initialState.entry, { type: '__init__' } as TEvent);\n    }\n  }\n\n  // ==========================================================================\n  // State Management\n  // ==========================================================================\n\n  getState(): string {\n    return this.currentState;\n  }\n\n  getContext(): TContext {\n    return { ...this.context };\n  }\n\n  getSnapshot(): MachineSnapshot<TContext> {\n    return {\n      value: this.currentState,\n      context: { ...this.context },\n      history: [...this.history],\n    };\n  }\n\n  matches(state: string): boolean {\n    return this.currentState === state;\n  }\n\n  can(eventType: string): boolean {\n    const stateDefinition = this.config.states[this.currentState];\n    if (!stateDefinition?.on) return false;\n\n    const transition = stateDefinition.on[eventType];\n    if (!transition) return false;\n\n    const transitions = this.normalizeTransitions(transition);\n    const event = { type: eventType } as TEvent;\n\n    return transitions.some((t) => !t.guard || t.guard(this.context, event));\n  }\n\n  // ==========================================================================\n  // Transitions\n  // ==========================================================================\n\n  async send(event: TEvent | string): Promise<MachineSnapshot<TContext>> {\n    const normalizedEvent: TEvent =\n      typeof event === 'string' ? ({ type: event } as TEvent) : event;\n\n    const stateDefinition = this.config.states[this.currentState];\n    if (!stateDefinition?.on) {\n      return this.getSnapshot();\n    }\n\n    const transitionConfig = stateDefinition.on[normalizedEvent.type];\n    if (!transitionConfig) {\n      return this.getSnapshot();\n    }\n\n    const transitions = this.normalizeTransitions(transitionConfig);\n    const transition = transitions.find(\n      (t) => !t.guard || t.guard(this.context, normalizedEvent)\n    );\n\n    if (!transition) {\n      return this.getSnapshot();\n    }\n\n    // Execute exit actions\n    if (stateDefinition.exit) {\n      await this.executeActions(stateDefinition.exit, normalizedEvent);\n    }\n\n    // Update history\n    this.history.push(this.currentState);\n\n    // Execute transition actions\n    if (transition.actions) {\n      await this.executeActions(transition.actions, normalizedEvent);\n    }\n\n    // Transition to new state\n    this.currentState = transition.target;\n\n    // Execute entry actions for new state\n    const newStateDefinition = this.config.states[this.currentState];\n    if (newStateDefinition?.entry) {\n      await this.executeActions(newStateDefinition.entry, normalizedEvent);\n    }\n\n    // Notify listeners\n    const snapshot = this.getSnapshot();\n    this.notifyListeners(snapshot);\n\n    return snapshot;\n  }\n\n  private normalizeTransitions(\n    config: string | Transition<TContext, TEvent> | Array<Transition<TContext, TEvent>>\n  ): Array<Transition<TContext, TEvent>> {\n    if (typeof config === 'string') {\n      return [{ target: config }];\n    }\n    if (Array.isArray(config)) {\n      return config;\n    }\n    return [config];\n  }\n\n  private async executeActions(\n    actions: Array<Action<TContext, TEvent>>,\n    event: TEvent\n  ): Promise<void> {\n    for (const action of actions) {\n      const result = await action(this.context, event);\n      if (result && typeof result === 'object') {\n        this.context = { ...this.context, ...result };\n      }\n    }\n  }\n\n  // ==========================================================================\n  // Context Updates\n  // ==========================================================================\n\n  setContext(update: Partial<TContext> | ((context: TContext) => Partial<TContext>)): void {\n    if (typeof update === 'function') {\n      this.context = { ...this.context, ...update(this.context) };\n    } else {\n      this.context = { ...this.context, ...update };\n    }\n  }\n\n  // ==========================================================================\n  // Subscriptions\n  // ==========================================================================\n\n  subscribe(listener: TransitionListener<TContext>): () => void {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n\n  private notifyListeners(snapshot: MachineSnapshot<TContext>): void {\n    for (const listener of this.listeners) {\n      try {\n        listener(snapshot);\n      } catch {\n        // Silently ignore listener errors\n      }\n    }\n  }\n\n  // ==========================================================================\n  // Introspection\n  // ==========================================================================\n\n  getStates(): string[] {\n    return Object.keys(this.config.states);\n  }\n\n  getEvents(): string[] {\n    const events = new Set<string>();\n    for (const state of Object.values(this.config.states)) {\n      if (state.on) {\n        for (const eventType of Object.keys(state.on)) {\n          events.add(eventType);\n        }\n      }\n    }\n    return Array.from(events);\n  }\n\n  getTransitions(): Array<{ from: string; to: string; event: string }> {\n    const transitions: Array<{ from: string; to: string; event: string }> = [];\n\n    for (const [state, definition] of Object.entries(this.config.states)) {\n      if (definition.on) {\n        for (const [eventType, transitionConfig] of Object.entries(definition.on)) {\n          const normalized = this.normalizeTransitions(transitionConfig);\n          for (const t of normalized) {\n            transitions.push({ from: state, to: t.target, event: eventType });\n          }\n        }\n      }\n    }\n\n    return transitions;\n  }\n\n  getMeta(state?: string): Record<string, unknown> | undefined {\n    const targetState = state || this.currentState;\n    return this.config.states[targetState]?.meta;\n  }\n\n  // ==========================================================================\n  // Reset\n  // ==========================================================================\n\n  reset(): MachineSnapshot<TContext> {\n    this.currentState = this.config.initial;\n    this.context = { ...this.config.context };\n    this.history = [];\n\n    // Execute entry actions for initial state\n    const initialState = this.config.states[this.currentState];\n    if (initialState?.entry) {\n      this.executeActions(initialState.entry, { type: '__reset__' } as TEvent);\n    }\n\n    const snapshot = this.getSnapshot();\n    this.notifyListeners(snapshot);\n    return snapshot;\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createMachine<\n  TContext extends MachineContext = MachineContext,\n  TEvent extends MachineEvent = MachineEvent\n>(config: MachineConfig<TContext, TEvent>): StateMachine<TContext, TEvent> {\n  return new StateMachine(config);\n}\n\n// ============================================================================\n// Action Helpers\n// ============================================================================\n\nexport function assign<TContext extends MachineContext, TEvent extends MachineEvent>(\n  assignment: Partial<TContext> | ((context: TContext, event: TEvent) => Partial<TContext>)\n): Action<TContext, TEvent> {\n  return (context, event) => {\n    if (typeof assignment === 'function') {\n      return assignment(context, event);\n    }\n    return assignment;\n  };\n}\n\nexport function log<TContext extends MachineContext, TEvent extends MachineEvent>(\n  message: string | ((context: TContext, event: TEvent) => string)\n): Action<TContext, TEvent> {\n  return (context, event) => {\n    const msg = typeof message === 'function' ? message(context, event) : message;\n    console.log(`[StateMachine] ${msg}`);\n  };\n}\n\n// ============================================================================\n// Guard Helpers\n// ============================================================================\n\nexport function not<TContext extends MachineContext, TEvent extends MachineEvent>(\n  guard: Guard<TContext, TEvent>\n): Guard<TContext, TEvent> {\n  return (context, event) => !guard(context, event);\n}\n\nexport function and<TContext extends MachineContext, TEvent extends MachineEvent>(\n  ...guards: Array<Guard<TContext, TEvent>>\n): Guard<TContext, TEvent> {\n  return (context, event) => guards.every((g) => g(context, event));\n}\n\nexport function or<TContext extends MachineContext, TEvent extends MachineEvent>(\n  ...guards: Array<Guard<TContext, TEvent>>\n): Guard<TContext, TEvent> {\n  return (context, event) => guards.some((g) => g(context, event));\n}\n\n// ============================================================================\n// Common State Machines\n// ============================================================================\n\nexport const commonMachines = {\n  /** Toggle machine (on/off) */\n  toggle: () =>\n    createMachine({\n      id: 'toggle',\n      initial: 'off',\n      context: {},\n      states: {\n        off: { on: { TOGGLE: 'on' } },\n        on: { on: { TOGGLE: 'off' } },\n      },\n    }),\n\n  /** Loading machine (idle, loading, success, error) */\n  loading: <T>(initial: T | null = null) =>\n    createMachine<{ data: T | null; error: Error | null }>({\n      id: 'loading',\n      initial: 'idle',\n      context: { data: initial, error: null },\n      states: {\n        idle: {\n          on: { FETCH: 'loading' },\n        },\n        loading: {\n          on: {\n            SUCCESS: {\n              target: 'success',\n              actions: [assign((_, event) => ({ data: (event.data as T) || null, error: null }))],\n            },\n            ERROR: {\n              target: 'error',\n              actions: [\n                assign((_, event) => ({\n                  error: (event.data as Error) || new Error('Unknown error'),\n                })),\n              ],\n            },\n          },\n        },\n        success: {\n          on: { RESET: 'idle', FETCH: 'loading' },\n        },\n        error: {\n          on: { RESET: 'idle', RETRY: 'loading' },\n        },\n      },\n    }),\n\n  /** Form machine (editing, submitting, success, error) */\n  form: <T extends Record<string, unknown>>(initialData: T) =>\n    createMachine<{ data: T; errors: Record<string, string>; submitError: Error | null }>({\n      id: 'form',\n      initial: 'editing',\n      context: { data: initialData, errors: {}, submitError: null },\n      states: {\n        editing: {\n          on: {\n            UPDATE: {\n              target: 'editing',\n              actions: [\n                assign((context, event) => ({\n                  data: { ...context.data, ...(event.data as Partial<T>) },\n                })),\n              ],\n            },\n            SUBMIT: 'submitting',\n          },\n        },\n        submitting: {\n          on: {\n            SUCCESS: 'success',\n            ERROR: {\n              target: 'editing',\n              actions: [\n                assign((_, event) => ({\n                  submitError: (event.data as Error) || new Error('Submit failed'),\n                })),\n              ],\n            },\n          },\n        },\n        success: {\n          on: { RESET: 'editing' },\n        },\n      },\n    }),\n};\n"],"mappings":"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","names":[]}