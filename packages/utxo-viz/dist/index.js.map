{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/utxo-viz\n *\n * UTXO visualization with 3D bubble representation.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** UTXO status */\nexport type UTXOStatus = 'unspent' | 'pending' | 'spent' | 'locked';\n\n/** Color scheme */\nexport type ColorScheme = 'value' | 'age' | 'type' | 'status' | 'custom';\n\n/** Layout type */\nexport type LayoutType = 'packed' | 'grid' | 'spiral' | 'tree' | 'force';\n\n/** UTXO data */\nexport interface UTXO {\n  txid: string;\n  vout: number;\n  value: bigint;\n  address: string;\n  scriptPubKey: string;\n  confirmations: number;\n  blockHeight?: number;\n  timestamp?: Date;\n  status: UTXOStatus;\n  label?: string;\n  metadata?: Record<string, unknown>;\n}\n\n/** UTXO bubble (visual representation) */\nexport interface UTXOBubble {\n  utxo: UTXO;\n  id: string;\n  x: number;\n  y: number;\n  z: number;\n  radius: number;\n  color: string;\n  opacity: number;\n  scale: number;\n  selected: boolean;\n  hovered: boolean;\n  clusterId?: string;\n}\n\n/** Cluster */\nexport interface UTXOCluster {\n  id: string;\n  label: string;\n  utxos: string[];\n  totalValue: bigint;\n  color: string;\n  center: { x: number; y: number; z: number };\n  radius: number;\n}\n\n/** Visualization config */\nexport interface VisualizationConfig {\n  layout: LayoutType;\n  colorScheme: ColorScheme;\n  minRadius: number;\n  maxRadius: number;\n  spacing: number;\n  use3D: boolean;\n  showLabels: boolean;\n  showValues: boolean;\n  enableClustering: boolean;\n  clusterThreshold: number;\n  animationDuration: number;\n  customColors?: Record<string, string>;\n}\n\n/** Camera state */\nexport interface CameraState {\n  position: { x: number; y: number; z: number };\n  target: { x: number; y: number; z: number };\n  zoom: number;\n  rotation: { x: number; y: number };\n}\n\n/** Selection state */\nexport interface SelectionState {\n  selectedIds: string[];\n  hoveredId?: string;\n  multiSelect: boolean;\n}\n\n/** Stats */\nexport interface UTXOStats {\n  totalCount: number;\n  totalValue: bigint;\n  avgValue: bigint;\n  minValue: bigint;\n  maxValue: bigint;\n  byStatus: Record<UTXOStatus, { count: number; value: bigint }>;\n  byAge: { recent: number; medium: number; old: number };\n}\n\n/** Animation state */\nexport interface AnimationState {\n  isAnimating: boolean;\n  progress: number;\n  startPositions: Map<string, { x: number; y: number; z: number }>;\n  endPositions: Map<string, { x: number; y: number; z: number }>;\n}\n\n// ============================================================================\n// Default Configuration\n// ============================================================================\n\nexport const DEFAULT_CONFIG: VisualizationConfig = {\n  layout: 'packed',\n  colorScheme: 'value',\n  minRadius: 5,\n  maxRadius: 50,\n  spacing: 2,\n  use3D: true,\n  showLabels: true,\n  showValues: true,\n  enableClustering: false,\n  clusterThreshold: 10,\n  animationDuration: 500,\n};\n\nexport const VALUE_COLORS = {\n  dust: '#9CA3AF',      // < 1000 sats\n  small: '#60A5FA',     // < 100k sats\n  medium: '#34D399',    // < 1M sats\n  large: '#FBBF24',     // < 10M sats\n  whale: '#F472B6',     // >= 10M sats\n};\n\nexport const AGE_COLORS = {\n  fresh: '#22C55E',     // < 6 confirmations\n  recent: '#3B82F6',    // < 100 blocks\n  mature: '#8B5CF6',    // < 1000 blocks\n  old: '#F59E0B',       // >= 1000 blocks\n};\n\nexport const STATUS_COLORS: Record<UTXOStatus, string> = {\n  unspent: '#22C55E',\n  pending: '#FBBF24',\n  spent: '#6B7280',\n  locked: '#EF4444',\n};\n\n// ============================================================================\n// UTXO Visualizer\n// ============================================================================\n\nexport class UTXOVisualizer {\n  private utxos: Map<string, UTXO> = new Map();\n  private bubbles: Map<string, UTXOBubble> = new Map();\n  private clusters: Map<string, UTXOCluster> = new Map();\n  private config: VisualizationConfig;\n  private camera: CameraState;\n  private selection: SelectionState;\n  private animation: AnimationState;\n\n  constructor(config?: Partial<VisualizationConfig>) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.camera = {\n      position: { x: 0, y: 0, z: 100 },\n      target: { x: 0, y: 0, z: 0 },\n      zoom: 1,\n      rotation: { x: 0, y: 0 },\n    };\n    this.selection = {\n      selectedIds: [],\n      multiSelect: false,\n    };\n    this.animation = {\n      isAnimating: false,\n      progress: 0,\n      startPositions: new Map(),\n      endPositions: new Map(),\n    };\n  }\n\n  // ==========================================================================\n  // Data Management\n  // ==========================================================================\n\n  setUTXOs(utxos: UTXO[]): void {\n    this.utxos.clear();\n    for (const utxo of utxos) {\n      const id = this.getUTXOId(utxo);\n      this.utxos.set(id, utxo);\n    }\n    this.generateBubbles();\n  }\n\n  addUTXO(utxo: UTXO): void {\n    const id = this.getUTXOId(utxo);\n    this.utxos.set(id, utxo);\n    this.generateBubbles();\n  }\n\n  removeUTXO(txid: string, vout: number): void {\n    const id = `${txid}:${vout}`;\n    this.utxos.delete(id);\n    this.bubbles.delete(id);\n  }\n\n  updateUTXO(utxo: UTXO): void {\n    const id = this.getUTXOId(utxo);\n    this.utxos.set(id, utxo);\n    const bubble = this.bubbles.get(id);\n    if (bubble) {\n      bubble.utxo = utxo;\n      bubble.color = this.getColor(utxo);\n    }\n  }\n\n  getUTXO(id: string): UTXO | undefined {\n    return this.utxos.get(id);\n  }\n\n  getAllUTXOs(): UTXO[] {\n    return Array.from(this.utxos.values());\n  }\n\n  // ==========================================================================\n  // Bubble Generation\n  // ==========================================================================\n\n  private generateBubbles(): void {\n    const utxoArray = Array.from(this.utxos.values());\n    const positions = this.calculateLayout(utxoArray);\n\n    this.bubbles.clear();\n    for (let i = 0; i < utxoArray.length; i++) {\n      const utxo = utxoArray[i];\n      const id = this.getUTXOId(utxo);\n      const pos = positions[i];\n\n      this.bubbles.set(id, {\n        utxo,\n        id,\n        x: pos.x,\n        y: pos.y,\n        z: pos.z,\n        radius: this.calculateRadius(utxo),\n        color: this.getColor(utxo),\n        opacity: utxo.status === 'spent' ? 0.3 : 1,\n        scale: 1,\n        selected: this.selection.selectedIds.includes(id),\n        hovered: this.selection.hoveredId === id,\n      });\n    }\n\n    if (this.config.enableClustering) {\n      this.generateClusters();\n    }\n  }\n\n  private calculateLayout(utxos: UTXO[]): Array<{ x: number; y: number; z: number }> {\n    switch (this.config.layout) {\n      case 'grid':\n        return this.gridLayout(utxos);\n      case 'spiral':\n        return this.spiralLayout(utxos);\n      case 'force':\n        return this.forceLayout(utxos);\n      case 'packed':\n      default:\n        return this.packedLayout(utxos);\n    }\n  }\n\n  private packedLayout(utxos: UTXO[]): Array<{ x: number; y: number; z: number }> {\n    const positions: Array<{ x: number; y: number; z: number }> = [];\n    const placed: Array<{ x: number; y: number; z: number; r: number }> = [];\n\n    // Sort by value (larger first for better packing)\n    const sorted = [...utxos].sort((a, b) => Number(b.value - a.value));\n\n    for (const utxo of sorted) {\n      const radius = this.calculateRadius(utxo);\n      const pos = this.findPackingPosition(placed, radius);\n      positions.push(pos);\n      placed.push({ ...pos, r: radius });\n    }\n\n    // Reorder to match original utxo order\n    const result: Array<{ x: number; y: number; z: number }> = [];\n    for (const utxo of utxos) {\n      const idx = sorted.indexOf(utxo);\n      result.push(positions[idx]);\n    }\n\n    return result;\n  }\n\n  private findPackingPosition(\n    placed: Array<{ x: number; y: number; z: number; r: number }>,\n    radius: number\n  ): { x: number; y: number; z: number } {\n    if (placed.length === 0) {\n      return { x: 0, y: 0, z: 0 };\n    }\n\n    // Simple spiral outward search\n    const spacing = this.config.spacing;\n    for (let angle = 0; angle < Math.PI * 20; angle += 0.1) {\n      const distance = angle * 5;\n      const x = Math.cos(angle) * distance;\n      const y = Math.sin(angle) * distance;\n      const z = this.config.use3D ? (Math.random() - 0.5) * 20 : 0;\n\n      let valid = true;\n      for (const p of placed) {\n        const dx = x - p.x;\n        const dy = y - p.y;\n        const dz = z - p.z;\n        const dist = Math.sqrt(dx * dx + dy * dy + dz * dz);\n        if (dist < radius + p.r + spacing) {\n          valid = false;\n          break;\n        }\n      }\n\n      if (valid) {\n        return { x, y, z };\n      }\n    }\n\n    // Fallback: just place it somewhere\n    return {\n      x: (Math.random() - 0.5) * 200,\n      y: (Math.random() - 0.5) * 200,\n      z: this.config.use3D ? (Math.random() - 0.5) * 50 : 0,\n    };\n  }\n\n  private gridLayout(utxos: UTXO[]): Array<{ x: number; y: number; z: number }> {\n    const cols = Math.ceil(Math.sqrt(utxos.length));\n    const spacing = this.config.maxRadius * 2 + this.config.spacing;\n\n    return utxos.map((_, i) => ({\n      x: (i % cols) * spacing - (cols * spacing) / 2,\n      y: Math.floor(i / cols) * spacing - (Math.ceil(utxos.length / cols) * spacing) / 2,\n      z: 0,\n    }));\n  }\n\n  private spiralLayout(utxos: UTXO[]): Array<{ x: number; y: number; z: number }> {\n    return utxos.map((_, i) => {\n      const angle = i * 0.5;\n      const radius = 10 + i * 3;\n      return {\n        x: Math.cos(angle) * radius,\n        y: Math.sin(angle) * radius,\n        z: this.config.use3D ? i * 0.5 : 0,\n      };\n    });\n  }\n\n  private forceLayout(utxos: UTXO[]): Array<{ x: number; y: number; z: number }> {\n    // Simple force simulation\n    const positions = utxos.map(() => ({\n      x: (Math.random() - 0.5) * 100,\n      y: (Math.random() - 0.5) * 100,\n      z: this.config.use3D ? (Math.random() - 0.5) * 50 : 0,\n    }));\n\n    // Run a few iterations\n    for (let iter = 0; iter < 50; iter++) {\n      for (let i = 0; i < positions.length; i++) {\n        for (let j = i + 1; j < positions.length; j++) {\n          const dx = positions[j].x - positions[i].x;\n          const dy = positions[j].y - positions[i].y;\n          const dz = positions[j].z - positions[i].z;\n          const dist = Math.sqrt(dx * dx + dy * dy + dz * dz) || 1;\n          const minDist = this.config.maxRadius * 2 + this.config.spacing;\n\n          if (dist < minDist) {\n            const force = (minDist - dist) / dist * 0.5;\n            positions[i].x -= dx * force;\n            positions[i].y -= dy * force;\n            positions[i].z -= dz * force;\n            positions[j].x += dx * force;\n            positions[j].y += dy * force;\n            positions[j].z += dz * force;\n          }\n        }\n      }\n    }\n\n    return positions;\n  }\n\n  // ==========================================================================\n  // Clustering\n  // ==========================================================================\n\n  private generateClusters(): void {\n    this.clusters.clear();\n\n    if (!this.config.enableClustering) return;\n\n    // Simple clustering by address\n    const byAddress = new Map<string, UTXO[]>();\n    for (const utxo of this.utxos.values()) {\n      const existing = byAddress.get(utxo.address) || [];\n      existing.push(utxo);\n      byAddress.set(utxo.address, existing);\n    }\n\n    let clusterIndex = 0;\n    for (const [address, utxos] of byAddress) {\n      if (utxos.length < this.config.clusterThreshold) continue;\n\n      const clusterId = `cluster-${clusterIndex++}`;\n      const utxoIds = utxos.map(u => this.getUTXOId(u));\n      const totalValue = utxos.reduce((sum, u) => sum + u.value, BigInt(0));\n\n      // Calculate cluster center\n      let cx = 0, cy = 0, cz = 0;\n      for (const id of utxoIds) {\n        const bubble = this.bubbles.get(id);\n        if (bubble) {\n          cx += bubble.x;\n          cy += bubble.y;\n          cz += bubble.z;\n        }\n      }\n      cx /= utxoIds.length;\n      cy /= utxoIds.length;\n      cz /= utxoIds.length;\n\n      this.clusters.set(clusterId, {\n        id: clusterId,\n        label: `${address.slice(0, 8)}...`,\n        utxos: utxoIds,\n        totalValue,\n        color: this.getValueColor(totalValue),\n        center: { x: cx, y: cy, z: cz },\n        radius: Math.sqrt(utxoIds.length) * this.config.maxRadius,\n      });\n\n      // Mark bubbles with cluster\n      for (const id of utxoIds) {\n        const bubble = this.bubbles.get(id);\n        if (bubble) {\n          bubble.clusterId = clusterId;\n        }\n      }\n    }\n  }\n\n  // ==========================================================================\n  // Styling\n  // ==========================================================================\n\n  private calculateRadius(utxo: UTXO): number {\n    const value = Number(utxo.value);\n    const logValue = Math.log10(value + 1);\n    const maxLog = Math.log10(100000000); // 1 BTC in sats\n    const normalized = Math.min(logValue / maxLog, 1);\n\n    return this.config.minRadius +\n      (this.config.maxRadius - this.config.minRadius) * normalized;\n  }\n\n  private getColor(utxo: UTXO): string {\n    switch (this.config.colorScheme) {\n      case 'value':\n        return this.getValueColor(utxo.value);\n      case 'age':\n        return this.getAgeColor(utxo.confirmations);\n      case 'status':\n        return STATUS_COLORS[utxo.status];\n      case 'custom':\n        return this.config.customColors?.[utxo.address] || VALUE_COLORS.medium;\n      default:\n        return this.getValueColor(utxo.value);\n    }\n  }\n\n  private getValueColor(value: bigint): string {\n    const sats = Number(value);\n    if (sats < 1000) return VALUE_COLORS.dust;\n    if (sats < 100000) return VALUE_COLORS.small;\n    if (sats < 1000000) return VALUE_COLORS.medium;\n    if (sats < 10000000) return VALUE_COLORS.large;\n    return VALUE_COLORS.whale;\n  }\n\n  private getAgeColor(confirmations: number): string {\n    if (confirmations < 6) return AGE_COLORS.fresh;\n    if (confirmations < 100) return AGE_COLORS.recent;\n    if (confirmations < 1000) return AGE_COLORS.mature;\n    return AGE_COLORS.old;\n  }\n\n  // ==========================================================================\n  // Interaction\n  // ==========================================================================\n\n  select(id: string, multi = false): void {\n    if (multi) {\n      const idx = this.selection.selectedIds.indexOf(id);\n      if (idx >= 0) {\n        this.selection.selectedIds.splice(idx, 1);\n      } else {\n        this.selection.selectedIds.push(id);\n      }\n    } else {\n      this.selection.selectedIds = [id];\n    }\n\n    for (const bubble of this.bubbles.values()) {\n      bubble.selected = this.selection.selectedIds.includes(bubble.id);\n    }\n  }\n\n  clearSelection(): void {\n    this.selection.selectedIds = [];\n    for (const bubble of this.bubbles.values()) {\n      bubble.selected = false;\n    }\n  }\n\n  hover(id: string | undefined): void {\n    this.selection.hoveredId = id;\n    for (const bubble of this.bubbles.values()) {\n      bubble.hovered = bubble.id === id;\n    }\n  }\n\n  // ==========================================================================\n  // Output\n  // ==========================================================================\n\n  getBubbles(): UTXOBubble[] {\n    return Array.from(this.bubbles.values());\n  }\n\n  getClusters(): UTXOCluster[] {\n    return Array.from(this.clusters.values());\n  }\n\n  getStats(): UTXOStats {\n    const utxos = Array.from(this.utxos.values());\n    const values = utxos.map(u => u.value);\n\n    const byStatus: Record<UTXOStatus, { count: number; value: bigint }> = {\n      unspent: { count: 0, value: BigInt(0) },\n      pending: { count: 0, value: BigInt(0) },\n      spent: { count: 0, value: BigInt(0) },\n      locked: { count: 0, value: BigInt(0) },\n    };\n\n    let recent = 0, medium = 0, old = 0;\n\n    for (const utxo of utxos) {\n      byStatus[utxo.status].count++;\n      byStatus[utxo.status].value += utxo.value;\n\n      if (utxo.confirmations < 100) recent++;\n      else if (utxo.confirmations < 1000) medium++;\n      else old++;\n    }\n\n    const totalValue = values.reduce((a, b) => a + b, BigInt(0));\n\n    return {\n      totalCount: utxos.length,\n      totalValue,\n      avgValue: utxos.length > 0 ? totalValue / BigInt(utxos.length) : BigInt(0),\n      minValue: values.length > 0 ? values.reduce((a, b) => a < b ? a : b) : BigInt(0),\n      maxValue: values.length > 0 ? values.reduce((a, b) => a > b ? a : b) : BigInt(0),\n      byStatus,\n      byAge: { recent, medium, old },\n    };\n  }\n\n  getCamera(): CameraState {\n    return { ...this.camera };\n  }\n\n  setCamera(camera: Partial<CameraState>): void {\n    Object.assign(this.camera, camera);\n  }\n\n  getConfig(): VisualizationConfig {\n    return { ...this.config };\n  }\n\n  setConfig(config: Partial<VisualizationConfig>): void {\n    this.config = { ...this.config, ...config };\n    this.generateBubbles();\n  }\n\n  private getUTXOId(utxo: UTXO): string {\n    return `${utxo.txid}:${utxo.vout}`;\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createUTXOVisualizer(config?: Partial<VisualizationConfig>): UTXOVisualizer {\n  return new UTXOVisualizer(config);\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nexport function formatSatoshis(sats: bigint): string {\n  const btc = Number(sats) / 100000000;\n  if (btc >= 1) return `${btc.toFixed(8)} BSV`;\n  if (Number(sats) >= 1000000) return `${(Number(sats) / 1000000).toFixed(2)}M sats`;\n  if (Number(sats) >= 1000) return `${(Number(sats) / 1000).toFixed(2)}K sats`;\n  return `${sats} sats`;\n}\n\nexport function getUTXOAge(confirmations: number): string {\n  if (confirmations === 0) return 'Unconfirmed';\n  if (confirmations < 6) return 'Confirming';\n  if (confirmations < 100) return 'Recent';\n  if (confirmations < 1000) return 'Mature';\n  return 'Old';\n}\n\nexport function sortUTXOs(utxos: UTXO[], by: 'value' | 'age' | 'status'): UTXO[] {\n  return [...utxos].sort((a, b) => {\n    switch (by) {\n      case 'value':\n        return Number(b.value - a.value);\n      case 'age':\n        return b.confirmations - a.confirmations;\n      case 'status':\n        return a.status.localeCompare(b.status);\n      default:\n        return 0;\n    }\n  });\n}\n\nexport function filterUTXOs(\n  utxos: UTXO[],\n  filters: {\n    minValue?: bigint;\n    maxValue?: bigint;\n    status?: UTXOStatus[];\n    minConfirmations?: number;\n  }\n): UTXO[] {\n  return utxos.filter(utxo => {\n    if (filters.minValue && utxo.value < filters.minValue) return false;\n    if (filters.maxValue && utxo.value > filters.maxValue) return false;\n    if (filters.status && !filters.status.includes(utxo.status)) return false;\n    if (filters.minConfirmations && utxo.confirmations < filters.minConfirmations) return false;\n    return true;\n  });\n}\n"],"mappings":"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","names":[]}