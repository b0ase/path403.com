{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/mempool-service\n *\n * Mempool monitoring service with fee estimation and transaction tracking.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Network type */\nexport type Network = 'mainnet' | 'testnet' | 'signet';\n\n/** Fee rates in sat/vB */\nexport interface FeeRates {\n  fastestFee: number;\n  halfHourFee: number;\n  hourFee: number;\n  economyFee: number;\n  minimumFee: number;\n}\n\n/** Mempool info */\nexport interface MempoolInfo {\n  count: number;\n  vsize: number;\n  totalFee: number;\n  feeHistogram: Array<[number, number]>;\n}\n\n/** Transaction status */\nexport interface TxStatus {\n  confirmed: boolean;\n  blockHeight?: number;\n  blockHash?: string;\n  blockTime?: number;\n}\n\n/** Transaction details */\nexport interface Transaction {\n  txid: string;\n  version: number;\n  locktime: number;\n  size: number;\n  weight: number;\n  fee: number;\n  status: TxStatus;\n  vin: TxInput[];\n  vout: TxOutput[];\n}\n\n/** Transaction input */\nexport interface TxInput {\n  txid: string;\n  vout: number;\n  prevout?: TxOutput;\n  scriptsig: string;\n  scriptsigAsm: string;\n  witness?: string[];\n  isCoinbase: boolean;\n  sequence: number;\n}\n\n/** Transaction output */\nexport interface TxOutput {\n  scriptpubkey: string;\n  scriptpubkeyAsm: string;\n  scriptpubkeyType: string;\n  scriptpubkeyAddress?: string;\n  value: number;\n}\n\n/** Block details */\nexport interface Block {\n  id: string;\n  height: number;\n  version: number;\n  timestamp: number;\n  txCount: number;\n  size: number;\n  weight: number;\n  merkleRoot: string;\n  previousblockhash: string;\n  mediantime: number;\n  nonce: number;\n  bits: number;\n  difficulty: number;\n}\n\n/** Address info */\nexport interface AddressInfo {\n  address: string;\n  chainStats: {\n    fundedTxoCount: number;\n    fundedTxoSum: number;\n    spentTxoCount: number;\n    spentTxoSum: number;\n    txCount: number;\n  };\n  mempoolStats: {\n    fundedTxoCount: number;\n    fundedTxoSum: number;\n    spentTxoCount: number;\n    spentTxoSum: number;\n    txCount: number;\n  };\n}\n\n/** UTXO */\nexport interface UTXO {\n  txid: string;\n  vout: number;\n  status: TxStatus;\n  value: number;\n}\n\n/** WebSocket message */\nexport interface WSMessage {\n  type: 'block' | 'tx' | 'address-tx' | 'mempool';\n  data: unknown;\n}\n\n/** Client options */\nexport interface MempoolClientOptions {\n  network?: Network;\n  baseUrl?: string;\n  wsUrl?: string;\n  timeout?: number;\n}\n\n/** Event types */\nexport type MempoolEvent = 'block' | 'tx' | 'address-tx' | 'connected' | 'disconnected' | 'error';\n\n/** Event listener */\nexport type MempoolEventListener = (data: unknown) => void;\n\n// ============================================================================\n// Default Configuration\n// ============================================================================\n\nexport const NETWORK_URLS: Record<Network, { api: string; ws: string }> = {\n  mainnet: {\n    api: 'https://mempool.space/api',\n    ws: 'wss://mempool.space/api/v1/ws',\n  },\n  testnet: {\n    api: 'https://mempool.space/testnet/api',\n    ws: 'wss://mempool.space/testnet/api/v1/ws',\n  },\n  signet: {\n    api: 'https://mempool.space/signet/api',\n    ws: 'wss://mempool.space/signet/api/v1/ws',\n  },\n};\n\n// ============================================================================\n// Mempool Client\n// ============================================================================\n\nexport class MempoolClient {\n  private network: Network;\n  private baseUrl: string;\n  private wsUrl: string;\n  private timeout: number;\n  private ws: WebSocket | null = null;\n  private listeners: Map<MempoolEvent, Set<MempoolEventListener>> = new Map();\n  private subscriptions: {\n    blocks: boolean;\n    mempool: boolean;\n    addresses: Set<string>;\n  } = { blocks: false, mempool: false, addresses: new Set() };\n\n  constructor(options: MempoolClientOptions = {}) {\n    this.network = options.network || 'mainnet';\n    this.baseUrl = options.baseUrl || NETWORK_URLS[this.network].api;\n    this.wsUrl = options.wsUrl || NETWORK_URLS[this.network].ws;\n    this.timeout = options.timeout || 30000;\n  }\n\n  // ==========================================================================\n  // HTTP Helpers\n  // ==========================================================================\n\n  private async request<T>(endpoint: string): Promise<T> {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n\n    try {\n      const response = await fetch(`${this.baseUrl}${endpoint}`, {\n        signal: controller.signal,\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      return response.json();\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  // ==========================================================================\n  // Fee Estimation\n  // ==========================================================================\n\n  async getFeeRates(): Promise<FeeRates> {\n    return this.request<FeeRates>('/v1/fees/recommended');\n  }\n\n  async getMempoolBlocks(): Promise<Array<{ blockSize: number; blockVSize: number; feeRange: number[] }>> {\n    return this.request('/v1/fees/mempool-blocks');\n  }\n\n  // ==========================================================================\n  // Mempool\n  // ==========================================================================\n\n  async getMempoolInfo(): Promise<MempoolInfo> {\n    return this.request<MempoolInfo>('/mempool');\n  }\n\n  async getMempoolTxids(): Promise<string[]> {\n    return this.request<string[]>('/mempool/txids');\n  }\n\n  async getRecentMempoolTxs(): Promise<Transaction[]> {\n    return this.request<Transaction[]>('/mempool/recent');\n  }\n\n  // ==========================================================================\n  // Transactions\n  // ==========================================================================\n\n  async getTransaction(txid: string): Promise<Transaction> {\n    return this.request<Transaction>(`/tx/${txid}`);\n  }\n\n  async getTxStatus(txid: string): Promise<TxStatus> {\n    return this.request<TxStatus>(`/tx/${txid}/status`);\n  }\n\n  async getTxHex(txid: string): Promise<string> {\n    return this.request<string>(`/tx/${txid}/hex`);\n  }\n\n  async getTxRaw(txid: string): Promise<Uint8Array> {\n    const response = await fetch(`${this.baseUrl}/tx/${txid}/raw`);\n    const buffer = await response.arrayBuffer();\n    return new Uint8Array(buffer);\n  }\n\n  async broadcastTx(txHex: string): Promise<string> {\n    const response = await fetch(`${this.baseUrl}/tx`, {\n      method: 'POST',\n      body: txHex,\n      headers: { 'Content-Type': 'text/plain' },\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error);\n    }\n\n    return response.text();\n  }\n\n  async getTxOutspends(txid: string): Promise<Array<{ spent: boolean; txid?: string; vin?: number }>> {\n    return this.request(`/tx/${txid}/outspends`);\n  }\n\n  // ==========================================================================\n  // Addresses\n  // ==========================================================================\n\n  async getAddressInfo(address: string): Promise<AddressInfo> {\n    return this.request<AddressInfo>(`/address/${address}`);\n  }\n\n  async getAddressTxs(address: string): Promise<Transaction[]> {\n    return this.request<Transaction[]>(`/address/${address}/txs`);\n  }\n\n  async getAddressTxsChain(address: string, lastTxid?: string): Promise<Transaction[]> {\n    const endpoint = lastTxid\n      ? `/address/${address}/txs/chain/${lastTxid}`\n      : `/address/${address}/txs/chain`;\n    return this.request<Transaction[]>(endpoint);\n  }\n\n  async getAddressTxsMempool(address: string): Promise<Transaction[]> {\n    return this.request<Transaction[]>(`/address/${address}/txs/mempool`);\n  }\n\n  async getAddressUtxos(address: string): Promise<UTXO[]> {\n    return this.request<UTXO[]>(`/address/${address}/utxo`);\n  }\n\n  // ==========================================================================\n  // Blocks\n  // ==========================================================================\n\n  async getBlock(hash: string): Promise<Block> {\n    return this.request<Block>(`/block/${hash}`);\n  }\n\n  async getBlockHeader(hash: string): Promise<string> {\n    return this.request<string>(`/block/${hash}/header`);\n  }\n\n  async getBlockHeight(hash: string): Promise<number> {\n    return this.request<number>(`/block/${hash}/height`);\n  }\n\n  async getBlockTxids(hash: string): Promise<string[]> {\n    return this.request<string[]>(`/block/${hash}/txids`);\n  }\n\n  async getBlockTxs(hash: string, startIndex: number = 0): Promise<Transaction[]> {\n    return this.request<Transaction[]>(`/block/${hash}/txs/${startIndex}`);\n  }\n\n  async getBlockHashByHeight(height: number): Promise<string> {\n    return this.request<string>(`/block-height/${height}`);\n  }\n\n  async getTipHeight(): Promise<number> {\n    return this.request<number>('/blocks/tip/height');\n  }\n\n  async getTipHash(): Promise<string> {\n    return this.request<string>('/blocks/tip/hash');\n  }\n\n  async getRecentBlocks(): Promise<Block[]> {\n    return this.request<Block[]>('/v1/blocks');\n  }\n\n  // ==========================================================================\n  // Mining\n  // ==========================================================================\n\n  async getDifficultyAdjustment(): Promise<{\n    progressPercent: number;\n    difficultyChange: number;\n    estimatedRetargetDate: number;\n    remainingBlocks: number;\n    remainingTime: number;\n    previousRetarget: number;\n    nextRetargetHeight: number;\n    timeAvg: number;\n    timeOffset: number;\n  }> {\n    return this.request('/v1/difficulty-adjustment');\n  }\n\n  async getHashrate(timePeriod?: '1m' | '3m' | '6m' | '1y' | '2y' | '3y'): Promise<{\n    hashrates: Array<{ timestamp: number; avgHashrate: number }>;\n    difficulty: Array<{ timestamp: number; difficulty: number }>;\n    currentHashrate: number;\n    currentDifficulty: number;\n  }> {\n    const endpoint = timePeriod ? `/v1/mining/hashrate/${timePeriod}` : '/v1/mining/hashrate/3m';\n    return this.request(endpoint);\n  }\n\n  // ==========================================================================\n  // WebSocket\n  // ==========================================================================\n\n  connect(): void {\n    if (this.ws?.readyState === WebSocket.OPEN) return;\n\n    this.ws = new WebSocket(this.wsUrl);\n\n    this.ws.onopen = () => {\n      this.emit('connected', null);\n      this.resubscribe();\n    };\n\n    this.ws.onclose = () => {\n      this.emit('disconnected', null);\n    };\n\n    this.ws.onerror = (error) => {\n      this.emit('error', error);\n    };\n\n    this.ws.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n\n        if (data.block) {\n          this.emit('block', data.block);\n        }\n        if (data['address-transactions']) {\n          this.emit('address-tx', data['address-transactions']);\n        }\n        if (data.mempoolInfo) {\n          this.emit('tx', data);\n        }\n      } catch {\n        // Ignore parse errors\n      }\n    };\n  }\n\n  disconnect(): void {\n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n\n  private send(data: unknown): void {\n    if (this.ws?.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(data));\n    }\n  }\n\n  private resubscribe(): void {\n    if (this.subscriptions.blocks) {\n      this.send({ action: 'want', data: ['blocks'] });\n    }\n    if (this.subscriptions.mempool) {\n      this.send({ action: 'want', data: ['mempool-blocks'] });\n    }\n    for (const address of this.subscriptions.addresses) {\n      this.send({ 'track-address': address });\n    }\n  }\n\n  subscribeBlocks(): void {\n    this.subscriptions.blocks = true;\n    this.send({ action: 'want', data: ['blocks'] });\n  }\n\n  subscribeMempool(): void {\n    this.subscriptions.mempool = true;\n    this.send({ action: 'want', data: ['mempool-blocks'] });\n  }\n\n  subscribeAddress(address: string): void {\n    this.subscriptions.addresses.add(address);\n    this.send({ 'track-address': address });\n  }\n\n  unsubscribeAddress(address: string): void {\n    this.subscriptions.addresses.delete(address);\n    this.send({ 'untrack-address': address });\n  }\n\n  // ==========================================================================\n  // Events\n  // ==========================================================================\n\n  on(event: MempoolEvent, listener: MempoolEventListener): () => void {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    this.listeners.get(event)!.add(listener);\n    return () => this.off(event, listener);\n  }\n\n  off(event: MempoolEvent, listener: MempoolEventListener): void {\n    this.listeners.get(event)?.delete(listener);\n  }\n\n  private emit(event: MempoolEvent, data: unknown): void {\n    const eventListeners = this.listeners.get(event);\n    if (eventListeners) {\n      for (const listener of eventListeners) {\n        try {\n          listener(data);\n        } catch {\n          // Ignore listener errors\n        }\n      }\n    }\n  }\n\n  // ==========================================================================\n  // Utilities\n  // ==========================================================================\n\n  async waitForConfirmation(\n    txid: string,\n    options: { timeout?: number; pollInterval?: number } = {}\n  ): Promise<TxStatus> {\n    const { timeout = 3600000, pollInterval = 30000 } = options;\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < timeout) {\n      const status = await this.getTxStatus(txid);\n      if (status.confirmed) {\n        return status;\n      }\n      await new Promise((resolve) => setTimeout(resolve, pollInterval));\n    }\n\n    throw new Error('Confirmation timeout');\n  }\n\n  async estimateFee(vsize: number, priority: 'fastest' | 'halfHour' | 'hour' | 'economy' = 'halfHour'): Promise<number> {\n    const rates = await this.getFeeRates();\n    const feeMap = {\n      fastest: rates.fastestFee,\n      halfHour: rates.halfHourFee,\n      hour: rates.hourFee,\n      economy: rates.economyFee,\n    };\n    return vsize * feeMap[priority];\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createMempoolClient(options?: MempoolClientOptions): MempoolClient {\n  return new MempoolClient(options);\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\n/**\n * Calculate transaction virtual size\n */\nexport function calculateVSize(weight: number): number {\n  return Math.ceil(weight / 4);\n}\n\n/**\n * Calculate fee rate from transaction\n */\nexport function calculateFeeRate(fee: number, vsize: number): number {\n  return Math.round(fee / vsize);\n}\n\n/**\n * Format satoshis as BTC\n */\nexport function satsToBtc(sats: number): string {\n  return (sats / 100_000_000).toFixed(8);\n}\n\n/**\n * Format BTC as satoshis\n */\nexport function btcToSats(btc: number): number {\n  return Math.round(btc * 100_000_000);\n}\n"],"mappings":"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","names":[]}