{"version":3,"sources":["../src/roles.ts","../src/organization.ts"],"sourcesContent":["/**\n * @b0ase/org - Predefined roles and role utilities\n */\n\nimport type { Role, RoleId, PermissionCategory } from './types';\n\n// ============================================================================\n// Predefined Roles\n// ============================================================================\n\n/** CEO - Full administrative access */\nexport const CEO_ROLE: Role = {\n  id: 'ceo',\n  name: 'CEO',\n  description: 'Chief Executive Officer - Full organizational authority',\n  icon: 'crown',\n  permissions: ['admin', 'finance', 'tech', 'marketing', 'legal', 'hr', 'operations', 'read', 'write'],\n  defaultShareAllocation: 20,\n};\n\n/** CTO - Technical leadership */\nexport const CTO_ROLE: Role = {\n  id: 'cto',\n  name: 'CTO',\n  description: 'Chief Technology Officer - Technical strategy and development',\n  icon: 'cpu',\n  permissions: ['tech', 'read', 'write'],\n  defaultShareAllocation: 15,\n};\n\n/** CMO - Marketing leadership */\nexport const CMO_ROLE: Role = {\n  id: 'cmo',\n  name: 'CMO',\n  description: 'Chief Marketing Officer - Marketing and brand strategy',\n  icon: 'megaphone',\n  permissions: ['marketing', 'read', 'write'],\n  defaultShareAllocation: 10,\n};\n\n/** CFO - Financial leadership */\nexport const CFO_ROLE: Role = {\n  id: 'cfo',\n  name: 'CFO',\n  description: 'Chief Financial Officer - Financial strategy and reporting',\n  icon: 'banknote',\n  permissions: ['finance', 'read', 'write'],\n  defaultShareAllocation: 10,\n};\n\n/** COO - Operations leadership */\nexport const COO_ROLE: Role = {\n  id: 'coo',\n  name: 'COO',\n  description: 'Chief Operating Officer - Operations and execution',\n  icon: 'settings',\n  permissions: ['operations', 'hr', 'read', 'write'],\n  defaultShareAllocation: 10,\n};\n\n/** Developer - Technical contributor */\nexport const DEVELOPER_ROLE: Role = {\n  id: 'developer',\n  name: 'Developer',\n  description: 'Software developer - Build and maintain technical systems',\n  icon: 'code',\n  permissions: ['tech', 'read', 'write'],\n  defaultShareAllocation: 3,\n};\n\n/** Designer - Creative contributor */\nexport const DESIGNER_ROLE: Role = {\n  id: 'designer',\n  name: 'Designer',\n  description: 'Product/UI designer - Design user experiences',\n  icon: 'palette',\n  permissions: ['marketing', 'read', 'write'],\n  defaultShareAllocation: 3,\n};\n\n/** Marketer - Marketing contributor */\nexport const MARKETER_ROLE: Role = {\n  id: 'marketer',\n  name: 'Marketer',\n  description: 'Marketing specialist - Execute marketing campaigns',\n  icon: 'trending-up',\n  permissions: ['marketing', 'read', 'write'],\n  defaultShareAllocation: 2,\n};\n\n/** Analyst - Data and business analysis */\nexport const ANALYST_ROLE: Role = {\n  id: 'analyst',\n  name: 'Data Analyst',\n  description: 'Data analyst - Analyze data and provide insights',\n  icon: 'bar-chart',\n  permissions: ['read'],\n  defaultShareAllocation: 2,\n};\n\n/** Legal - Legal affairs */\nexport const LEGAL_ROLE: Role = {\n  id: 'legal',\n  name: 'Legal Counsel',\n  description: 'Legal counsel - Handle legal matters and compliance',\n  icon: 'scale',\n  permissions: ['legal', 'read'],\n  defaultShareAllocation: 2,\n};\n\n/** Advisor - External advisor */\nexport const ADVISOR_ROLE: Role = {\n  id: 'advisor',\n  name: 'Advisor',\n  description: 'Advisor - Provide strategic guidance',\n  icon: 'lightbulb',\n  permissions: ['read'],\n  defaultShareAllocation: 1,\n};\n\n/** Investor - Financial backer */\nexport const INVESTOR_ROLE: Role = {\n  id: 'investor',\n  name: 'Investor',\n  description: 'Investor - Financial backer with share ownership',\n  icon: 'wallet',\n  permissions: ['read'],\n  defaultShareAllocation: 0, // Varies by investment\n};\n\n/** Contributor - Community contributor */\nexport const CONTRIBUTOR_ROLE: Role = {\n  id: 'contributor',\n  name: 'Contributor',\n  description: 'Contributor - Part-time or community contributor',\n  icon: 'users',\n  permissions: ['read', 'write'],\n  defaultShareAllocation: 0.5,\n};\n\n/** Member - Basic member */\nexport const MEMBER_ROLE: Role = {\n  id: 'member',\n  name: 'Member',\n  description: 'Member - Basic organizational membership',\n  icon: 'user',\n  permissions: ['read'],\n  defaultShareAllocation: 0,\n};\n\n// ============================================================================\n// Role Collections\n// ============================================================================\n\n/** All predefined roles */\nexport const PREDEFINED_ROLES: Role[] = [\n  CEO_ROLE,\n  CTO_ROLE,\n  CMO_ROLE,\n  CFO_ROLE,\n  COO_ROLE,\n  DEVELOPER_ROLE,\n  DESIGNER_ROLE,\n  MARKETER_ROLE,\n  ANALYST_ROLE,\n  LEGAL_ROLE,\n  ADVISOR_ROLE,\n  INVESTOR_ROLE,\n  CONTRIBUTOR_ROLE,\n  MEMBER_ROLE,\n];\n\n/** Role lookup by ID */\nexport const ROLES_BY_ID: Record<RoleId, Role> = {\n  ceo: CEO_ROLE,\n  cto: CTO_ROLE,\n  cmo: CMO_ROLE,\n  cfo: CFO_ROLE,\n  coo: COO_ROLE,\n  developer: DEVELOPER_ROLE,\n  designer: DESIGNER_ROLE,\n  marketer: MARKETER_ROLE,\n  analyst: ANALYST_ROLE,\n  legal: LEGAL_ROLE,\n  advisor: ADVISOR_ROLE,\n  investor: INVESTOR_ROLE,\n  contributor: CONTRIBUTOR_ROLE,\n  member: MEMBER_ROLE,\n  custom: {\n    id: 'custom',\n    name: 'Custom Role',\n    description: 'Custom role with configurable permissions',\n    icon: 'settings',\n    permissions: [],\n    defaultShareAllocation: 0,\n    isCustom: true,\n  },\n};\n\n/** Executive roles (C-suite) */\nexport const EXECUTIVE_ROLES: Role[] = [\n  CEO_ROLE,\n  CTO_ROLE,\n  CMO_ROLE,\n  CFO_ROLE,\n  COO_ROLE,\n];\n\n/** Team member roles */\nexport const TEAM_ROLES: Role[] = [\n  DEVELOPER_ROLE,\n  DESIGNER_ROLE,\n  MARKETER_ROLE,\n  ANALYST_ROLE,\n  LEGAL_ROLE,\n];\n\n/** External roles */\nexport const EXTERNAL_ROLES: Role[] = [\n  ADVISOR_ROLE,\n  INVESTOR_ROLE,\n  CONTRIBUTOR_ROLE,\n  MEMBER_ROLE,\n];\n\n// ============================================================================\n// Role Utilities\n// ============================================================================\n\n/**\n * Get role by ID\n */\nexport function getRole(roleId: string): Role | undefined {\n  return PREDEFINED_ROLES.find((r) => r.id === roleId);\n}\n\n/**\n * Get role by ID or throw if not found\n */\nexport function getRoleOrThrow(roleId: string): Role {\n  const role = getRole(roleId);\n  if (!role) {\n    throw new Error(`Role not found: ${roleId}`);\n  }\n  return role;\n}\n\n/**\n * Check if role has specific permission\n */\nexport function roleHasPermission(\n  role: Role,\n  permission: PermissionCategory\n): boolean {\n  return role.permissions.includes(permission);\n}\n\n/**\n * Check if role has any of the specified permissions\n */\nexport function roleHasAnyPermission(\n  role: Role,\n  permissions: PermissionCategory[]\n): boolean {\n  return permissions.some((p) => role.permissions.includes(p));\n}\n\n/**\n * Check if role has all of the specified permissions\n */\nexport function roleHasAllPermissions(\n  role: Role,\n  permissions: PermissionCategory[]\n): boolean {\n  return permissions.every((p) => role.permissions.includes(p));\n}\n\n/**\n * Check if role is an executive role\n */\nexport function isExecutiveRole(roleId: string): boolean {\n  return EXECUTIVE_ROLES.some((r) => r.id === roleId);\n}\n\n/**\n * Check if role has admin permissions\n */\nexport function isAdminRole(role: Role): boolean {\n  return role.permissions.includes('admin');\n}\n\n/**\n * Create a custom role\n */\nexport function createCustomRole(\n  id: string,\n  name: string,\n  description: string,\n  permissions: PermissionCategory[],\n  options?: {\n    icon?: string;\n    defaultShareAllocation?: number;\n  }\n): Role {\n  return {\n    id,\n    name,\n    description,\n    icon: options?.icon || 'settings',\n    permissions,\n    defaultShareAllocation: options?.defaultShareAllocation || 0,\n    isCustom: true,\n  };\n}\n\n/**\n * Get roles with specific permission\n */\nexport function getRolesWithPermission(\n  permission: PermissionCategory\n): Role[] {\n  return PREDEFINED_ROLES.filter((r) => r.permissions.includes(permission));\n}\n\n/**\n * Get all unique permissions from a set of roles\n */\nexport function getCombinedPermissions(roles: Role[]): PermissionCategory[] {\n  const permissions = new Set<PermissionCategory>();\n  for (const role of roles) {\n    for (const perm of role.permissions) {\n      permissions.add(perm);\n    }\n  }\n  return Array.from(permissions);\n}\n","/**\n * @b0ase/org - Organization management\n */\n\nimport type {\n  Organization,\n  OrganizationStatus,\n  OrganizationSettings,\n  CreateOrganizationInput,\n  UpdateOrganizationInput,\n  Member,\n  CreateMemberInput,\n  UpdateMemberInput,\n  Role,\n  ShareDistribution,\n  ShareAllocation,\n  ShareTransfer,\n  PermissionCategory,\n  PermissionCheckResult,\n} from './types';\n\nimport { getRole, PREDEFINED_ROLES, roleHasAnyPermission, roleHasAllPermissions } from './roles';\n\n// ============================================================================\n// Default Settings\n// ============================================================================\n\nconst DEFAULT_SETTINGS: OrganizationSettings = {\n  requireKyc: false,\n  allowCustomRoles: true,\n  minShareAllocation: 0,\n  allowShareTransfers: true,\n};\n\n// ============================================================================\n// Organization Manager Class\n// ============================================================================\n\n/**\n * Organization Manager\n *\n * Manages organizations, members, roles, and permissions.\n * This is an in-memory manager - integrate with your database for persistence.\n */\nexport class OrganizationManager {\n  private organizations: Map<string, Organization> = new Map();\n\n  /**\n   * Generate unique ID\n   */\n  private generateId(prefix: string): string {\n    return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  // ==========================================================================\n  // Organization CRUD\n  // ==========================================================================\n\n  /**\n   * Create a new organization\n   */\n  createOrganization(input: CreateOrganizationInput): Organization {\n    const id = this.generateId('org');\n    const now = new Date();\n\n    const org: Organization = {\n      id,\n      name: input.name,\n      description: input.description,\n      tokenSymbol: input.tokenSymbol.toUpperCase(),\n      tokenAddress: input.tokenAddress,\n      totalShares: input.totalShares || 1000000,\n      status: 'pending',\n      members: [],\n      customRoles: [],\n      createdAt: now,\n      updatedAt: now,\n      settings: { ...DEFAULT_SETTINGS, ...input.settings },\n      metadata: input.metadata,\n    };\n\n    this.organizations.set(id, org);\n    return org;\n  }\n\n  /**\n   * Get organization by ID\n   */\n  getOrganization(id: string): Organization | undefined {\n    return this.organizations.get(id);\n  }\n\n  /**\n   * Get organization or throw if not found\n   */\n  getOrganizationOrThrow(id: string): Organization {\n    const org = this.getOrganization(id);\n    if (!org) {\n      throw new Error(`Organization not found: ${id}`);\n    }\n    return org;\n  }\n\n  /**\n   * Update organization\n   */\n  updateOrganization(\n    id: string,\n    input: UpdateOrganizationInput\n  ): Organization {\n    const org = this.getOrganizationOrThrow(id);\n\n    const updated: Organization = {\n      ...org,\n      name: input.name ?? org.name,\n      description: input.description ?? org.description,\n      tokenSymbol: input.tokenSymbol?.toUpperCase() ?? org.tokenSymbol,\n      tokenAddress: input.tokenAddress ?? org.tokenAddress,\n      totalShares: input.totalShares ?? org.totalShares,\n      status: input.status ?? org.status,\n      settings: input.settings\n        ? { ...DEFAULT_SETTINGS, ...org.settings, ...input.settings }\n        : org.settings ?? DEFAULT_SETTINGS,\n      metadata: input.metadata\n        ? { ...org.metadata, ...input.metadata }\n        : org.metadata,\n      updatedAt: new Date(),\n    };\n\n    this.organizations.set(id, updated);\n    return updated;\n  }\n\n  /**\n   * Delete organization\n   */\n  deleteOrganization(id: string): boolean {\n    return this.organizations.delete(id);\n  }\n\n  /**\n   * List all organizations\n   */\n  listOrganizations(filter?: {\n    status?: OrganizationStatus;\n  }): Organization[] {\n    const orgs = Array.from(this.organizations.values());\n    if (filter?.status) {\n      return orgs.filter((o) => o.status === filter.status);\n    }\n    return orgs;\n  }\n\n  /**\n   * Activate organization\n   */\n  activateOrganization(id: string): Organization {\n    return this.updateOrganization(id, { status: 'active' });\n  }\n\n  /**\n   * Archive organization\n   */\n  archiveOrganization(id: string): Organization {\n    return this.updateOrganization(id, { status: 'archived' });\n  }\n\n  // ==========================================================================\n  // Member Management\n  // ==========================================================================\n\n  /**\n   * Add member to organization\n   */\n  addMember(organizationId: string, input: CreateMemberInput): Member {\n    const org = this.getOrganizationOrThrow(organizationId);\n\n    // Check max members\n    if (\n      org.settings?.maxMembers &&\n      org.members.length >= org.settings.maxMembers\n    ) {\n      throw new Error(\n        `Organization has reached maximum members: ${org.settings.maxMembers}`\n      );\n    }\n\n    // Validate role exists\n    const role = this.getEffectiveRole(org, input.roleId);\n    if (!role) {\n      throw new Error(`Role not found: ${input.roleId}`);\n    }\n\n    const member: Member = {\n      id: this.generateId('mem'),\n      handle: input.handle,\n      displayName: input.displayName,\n      email: input.email,\n      tokenAddress: input.tokenAddress,\n      shareAllocation: input.shareAllocation ?? role.defaultShareAllocation,\n      roleId: input.roleId,\n      organizationId,\n      profileId: input.profileId,\n      kycStatus: 'none',\n      joinedAt: new Date(),\n      metadata: input.metadata,\n    };\n\n    // Validate share allocation\n    this.validateShareAllocation(org, member.shareAllocation, undefined);\n\n    org.members.push(member);\n    org.updatedAt = new Date();\n\n    return member;\n  }\n\n  /**\n   * Get member by ID\n   */\n  getMember(organizationId: string, memberId: string): Member | undefined {\n    const org = this.getOrganization(organizationId);\n    return org?.members.find((m) => m.id === memberId);\n  }\n\n  /**\n   * Get member by handle\n   */\n  getMemberByHandle(\n    organizationId: string,\n    handle: string\n  ): Member | undefined {\n    const org = this.getOrganization(organizationId);\n    return org?.members.find((m) => m.handle === handle);\n  }\n\n  /**\n   * Update member\n   */\n  updateMember(\n    organizationId: string,\n    memberId: string,\n    input: UpdateMemberInput\n  ): Member {\n    const org = this.getOrganizationOrThrow(organizationId);\n    const memberIndex = org.members.findIndex((m) => m.id === memberId);\n\n    if (memberIndex === -1) {\n      throw new Error(`Member not found: ${memberId}`);\n    }\n\n    const member = org.members[memberIndex];\n\n    // Validate new share allocation if provided\n    if (input.shareAllocation !== undefined) {\n      this.validateShareAllocation(org, input.shareAllocation, memberId);\n    }\n\n    // Validate new role if provided\n    if (input.roleId) {\n      const role = this.getEffectiveRole(org, input.roleId);\n      if (!role) {\n        throw new Error(`Role not found: ${input.roleId}`);\n      }\n    }\n\n    const updated: Member = {\n      ...member,\n      displayName: input.displayName ?? member.displayName,\n      email: input.email ?? member.email,\n      tokenAddress: input.tokenAddress ?? member.tokenAddress,\n      shareAllocation: input.shareAllocation ?? member.shareAllocation,\n      roleId: input.roleId ?? member.roleId,\n      kycStatus: input.kycStatus ?? member.kycStatus,\n      metadata: input.metadata\n        ? { ...member.metadata, ...input.metadata }\n        : member.metadata,\n    };\n\n    org.members[memberIndex] = updated;\n    org.updatedAt = new Date();\n\n    return updated;\n  }\n\n  /**\n   * Remove member from organization\n   */\n  removeMember(organizationId: string, memberId: string): boolean {\n    const org = this.getOrganizationOrThrow(organizationId);\n    const initialLength = org.members.length;\n    org.members = org.members.filter((m) => m.id !== memberId);\n    org.updatedAt = new Date();\n    return org.members.length < initialLength;\n  }\n\n  /**\n   * List organization members\n   */\n  listMembers(\n    organizationId: string,\n    filter?: { roleId?: string }\n  ): Member[] {\n    const org = this.getOrganization(organizationId);\n    if (!org) return [];\n\n    if (filter?.roleId) {\n      return org.members.filter((m) => m.roleId === filter.roleId);\n    }\n    return org.members;\n  }\n\n  // ==========================================================================\n  // Share Management\n  // ==========================================================================\n\n  /**\n   * Validate share allocation\n   */\n  private validateShareAllocation(\n    org: Organization,\n    newAllocation: number,\n    excludeMemberId?: string\n  ): void {\n    const minAllocation = org.settings?.minShareAllocation ?? 0;\n    if (newAllocation < minAllocation) {\n      throw new Error(\n        `Share allocation must be at least ${minAllocation}%`\n      );\n    }\n\n    // Check total doesn't exceed 100%\n    const currentTotal = org.members\n      .filter((m) => m.id !== excludeMemberId)\n      .reduce((sum, m) => sum + m.shareAllocation, 0);\n\n    if (currentTotal + newAllocation > 100) {\n      throw new Error(\n        `Total share allocation would exceed 100% (current: ${currentTotal}%, new: ${newAllocation}%)`\n      );\n    }\n  }\n\n  /**\n   * Get share distribution for organization\n   */\n  getShareDistribution(organizationId: string): ShareDistribution {\n    const org = this.getOrganizationOrThrow(organizationId);\n\n    const allocations: ShareAllocation[] = org.members.map((m) => ({\n      memberId: m.id,\n      handle: m.handle,\n      displayName: m.displayName,\n      shares: Math.floor((m.shareAllocation / 100) * org.totalShares),\n      percentage: m.shareAllocation,\n      tokenAddress: m.tokenAddress,\n    }));\n\n    const allocatedPercent = org.members.reduce(\n      (sum, m) => sum + m.shareAllocation,\n      0\n    );\n    const allocatedShares = Math.floor(\n      (allocatedPercent / 100) * org.totalShares\n    );\n\n    return {\n      organizationId,\n      totalShares: org.totalShares,\n      allocatedShares,\n      unallocatedShares: org.totalShares - allocatedShares,\n      allocations,\n    };\n  }\n\n  /**\n   * Transfer shares between members\n   */\n  transferShares(\n    organizationId: string,\n    transfer: ShareTransfer\n  ): { from: Member; to: Member } {\n    const org = this.getOrganizationOrThrow(organizationId);\n\n    if (!org.settings?.allowShareTransfers) {\n      throw new Error('Share transfers are not allowed for this organization');\n    }\n\n    const fromMember = org.members.find((m) => m.id === transfer.fromMemberId);\n    const toMember = org.members.find((m) => m.id === transfer.toMemberId);\n\n    if (!fromMember) {\n      throw new Error(`From member not found: ${transfer.fromMemberId}`);\n    }\n    if (!toMember) {\n      throw new Error(`To member not found: ${transfer.toMemberId}`);\n    }\n\n    // Calculate share percentage from shares\n    const sharePercent = (transfer.shares / org.totalShares) * 100;\n\n    if (fromMember.shareAllocation < sharePercent) {\n      throw new Error(\n        `Insufficient shares: ${fromMember.displayName} has ${fromMember.shareAllocation}%, trying to transfer ${sharePercent}%`\n      );\n    }\n\n    // Perform transfer\n    fromMember.shareAllocation -= sharePercent;\n    toMember.shareAllocation += sharePercent;\n    org.updatedAt = new Date();\n\n    return { from: fromMember, to: toMember };\n  }\n\n  // ==========================================================================\n  // Role Management\n  // ==========================================================================\n\n  /**\n   * Get effective role (predefined or custom)\n   */\n  getEffectiveRole(org: Organization, roleId: string): Role | undefined {\n    // Check predefined roles first\n    const predefined = getRole(roleId);\n    if (predefined) return predefined;\n\n    // Check custom roles\n    return org.customRoles.find((r) => r.id === roleId);\n  }\n\n  /**\n   * Add custom role to organization\n   */\n  addCustomRole(organizationId: string, role: Role): Role {\n    const org = this.getOrganizationOrThrow(organizationId);\n\n    if (!org.settings?.allowCustomRoles) {\n      throw new Error('Custom roles are not allowed for this organization');\n    }\n\n    // Check for duplicate ID\n    if (\n      getRole(role.id) ||\n      org.customRoles.some((r) => r.id === role.id)\n    ) {\n      throw new Error(`Role already exists: ${role.id}`);\n    }\n\n    const customRole = { ...role, isCustom: true };\n    org.customRoles.push(customRole);\n    org.updatedAt = new Date();\n\n    return customRole;\n  }\n\n  /**\n   * Remove custom role from organization\n   */\n  removeCustomRole(organizationId: string, roleId: string): boolean {\n    const org = this.getOrganizationOrThrow(organizationId);\n\n    // Check if any members have this role\n    const membersWithRole = org.members.filter((m) => m.roleId === roleId);\n    if (membersWithRole.length > 0) {\n      throw new Error(\n        `Cannot remove role: ${membersWithRole.length} members have this role`\n      );\n    }\n\n    const initialLength = org.customRoles.length;\n    org.customRoles = org.customRoles.filter((r) => r.id !== roleId);\n    org.updatedAt = new Date();\n\n    return org.customRoles.length < initialLength;\n  }\n\n  /**\n   * List all roles for organization (predefined + custom)\n   */\n  listRoles(organizationId: string): Role[] {\n    const org = this.getOrganization(organizationId);\n    if (!org) return PREDEFINED_ROLES;\n    return [...PREDEFINED_ROLES, ...org.customRoles];\n  }\n\n  // ==========================================================================\n  // Permission Checking\n  // ==========================================================================\n\n  /**\n   * Check if member has permission\n   */\n  checkPermission(\n    organizationId: string,\n    memberId: string,\n    requiredPermissions: PermissionCategory[],\n    options?: { requireAll?: boolean }\n  ): PermissionCheckResult {\n    const org = this.getOrganization(organizationId);\n    if (!org) {\n      return {\n        allowed: false,\n        reason: 'Organization not found',\n        requiredPermissions,\n        memberPermissions: [],\n      };\n    }\n\n    const member = org.members.find((m) => m.id === memberId);\n    if (!member) {\n      return {\n        allowed: false,\n        reason: 'Member not found',\n        requiredPermissions,\n        memberPermissions: [],\n      };\n    }\n\n    const role = this.getEffectiveRole(org, member.roleId);\n    if (!role) {\n      return {\n        allowed: false,\n        reason: 'Role not found',\n        requiredPermissions,\n        memberPermissions: [],\n      };\n    }\n\n    const hasPermission = options?.requireAll\n      ? roleHasAllPermissions(role, requiredPermissions)\n      : roleHasAnyPermission(role, requiredPermissions);\n\n    return {\n      allowed: hasPermission,\n      reason: hasPermission ? undefined : 'Insufficient permissions',\n      requiredPermissions,\n      memberPermissions: role.permissions,\n    };\n  }\n\n  /**\n   * Check if member can perform action\n   */\n  canPerformAction(\n    organizationId: string,\n    memberId: string,\n    action: string\n  ): boolean {\n    // Map actions to required permissions\n    const actionPermissions: Record<string, PermissionCategory[]> = {\n      'org:update': ['admin'],\n      'org:delete': ['admin'],\n      'member:add': ['admin', 'hr'],\n      'member:remove': ['admin', 'hr'],\n      'member:update': ['admin', 'hr'],\n      'role:add': ['admin'],\n      'role:remove': ['admin'],\n      'shares:transfer': ['admin', 'finance'],\n      'finance:view': ['admin', 'finance'],\n      'tech:deploy': ['admin', 'tech'],\n      'marketing:publish': ['admin', 'marketing'],\n    };\n\n    const required = actionPermissions[action];\n    if (!required) return false;\n\n    const result = this.checkPermission(organizationId, memberId, required);\n    return result.allowed;\n  }\n}\n\n// ============================================================================\n// Factory Function\n// ============================================================================\n\n/**\n * Create an organization manager instance\n */\nexport function createOrganizationManager(): OrganizationManager {\n  return new OrganizationManager();\n}\n"],"mappings":"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","names":[]}