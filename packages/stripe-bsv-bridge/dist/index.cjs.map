{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/stripe-bsv-bridge\n *\n * Fiat onramp for BSV via Stripe payment processing.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Supported fiat currencies */\nexport type FiatCurrency = 'USD' | 'EUR' | 'GBP' | 'CAD' | 'AUD' | 'JPY' | 'CHF';\n\n/** Payment status */\nexport type PaymentStatus =\n  | 'pending'\n  | 'processing'\n  | 'paid'\n  | 'failed'\n  | 'refunded'\n  | 'cancelled';\n\n/** BSV delivery status */\nexport type DeliveryStatus =\n  | 'pending'\n  | 'queued'\n  | 'broadcasting'\n  | 'confirmed'\n  | 'failed';\n\n/** Price quote */\nexport interface PriceQuote {\n  id: string;\n  fiatAmount: number;\n  fiatCurrency: FiatCurrency;\n  bsvAmount: number;\n  exchangeRate: number;\n  fee: number;\n  feePercent: number;\n  totalFiat: number;\n  expiresAt: Date;\n  createdAt: Date;\n}\n\n/** Purchase order */\nexport interface PurchaseOrder {\n  id: string;\n  userId?: string;\n  quote: PriceQuote;\n  destinationAddress: string;\n  paymentStatus: PaymentStatus;\n  deliveryStatus: DeliveryStatus;\n  stripeSessionId?: string;\n  stripePaymentIntent?: string;\n  bsvTxid?: string;\n  bsvConfirmations?: number;\n  metadata?: Record<string, unknown>;\n  createdAt: Date;\n  updatedAt: Date;\n  completedAt?: Date;\n}\n\n/** Stripe session config */\nexport interface StripeSessionConfig {\n  orderId: string;\n  fiatAmount: number;\n  fiatCurrency: FiatCurrency;\n  customerEmail?: string;\n  successUrl: string;\n  cancelUrl: string;\n  metadata?: Record<string, string>;\n}\n\n/** Stripe session response */\nexport interface StripeSessionResponse {\n  sessionId: string;\n  url: string;\n}\n\n/** Webhook event type */\nexport type WebhookEventType =\n  | 'checkout.session.completed'\n  | 'payment_intent.succeeded'\n  | 'payment_intent.failed'\n  | 'charge.refunded';\n\n/** Webhook event */\nexport interface WebhookEvent {\n  type: WebhookEventType;\n  orderId: string;\n  stripePaymentIntent?: string;\n  amount?: number;\n  currency?: string;\n  timestamp: Date;\n}\n\n/** Bridge configuration */\nexport interface BridgeConfig {\n  stripeApiKey: string;\n  stripeWebhookSecret: string;\n  bsvWalletAddress: string;\n  feePercent: number;\n  minPurchase: Record<FiatCurrency, number>;\n  maxPurchase: Record<FiatCurrency, number>;\n  exchangeRateProvider?: ExchangeRateProvider;\n}\n\n/** Exchange rate provider interface */\nexport interface ExchangeRateProvider {\n  getRate(currency: FiatCurrency): Promise<number>;\n}\n\n/** Transaction record */\nexport interface TransactionRecord {\n  orderId: string;\n  fiatAmount: number;\n  fiatCurrency: FiatCurrency;\n  bsvAmount: number;\n  exchangeRate: number;\n  fee: number;\n  txid: string;\n  destinationAddress: string;\n  timestamp: Date;\n}\n\n// ============================================================================\n// Default Exchange Rate Provider\n// ============================================================================\n\nexport class CoinGeckoRateProvider implements ExchangeRateProvider {\n  private cache: Map<FiatCurrency, { rate: number; timestamp: number }> = new Map();\n  private cacheTTL = 60000; // 1 minute\n\n  async getRate(currency: FiatCurrency): Promise<number> {\n    const cached = this.cache.get(currency);\n    if (cached && Date.now() - cached.timestamp < this.cacheTTL) {\n      return cached.rate;\n    }\n\n    const currencyId = currency.toLowerCase();\n    const url = `https://api.coingecko.com/api/v3/simple/price?ids=bitcoin-cash-sv&vs_currencies=${currencyId}`;\n\n    try {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch rate: ${response.statusText}`);\n      }\n\n      const data = (await response.json()) as Record<string, Record<string, number>>;\n      const rate = data['bitcoin-cash-sv']?.[currencyId];\n\n      if (!rate) {\n        throw new Error(`No rate found for ${currency}`);\n      }\n\n      this.cache.set(currency, { rate, timestamp: Date.now() });\n      return rate;\n    } catch (error) {\n      // Return cached value if available, even if expired\n      if (cached) {\n        return cached.rate;\n      }\n      throw error;\n    }\n  }\n}\n\n// ============================================================================\n// Stripe BSV Bridge\n// ============================================================================\n\nexport class StripeBSVBridge {\n  private config: BridgeConfig;\n  private orders: Map<string, PurchaseOrder> = new Map();\n  private transactions: TransactionRecord[] = [];\n  private rateProvider: ExchangeRateProvider;\n\n  constructor(config: BridgeConfig) {\n    this.config = config;\n    this.rateProvider = config.exchangeRateProvider || new CoinGeckoRateProvider();\n  }\n\n  /**\n   * Get a price quote for purchasing BSV\n   */\n  async getQuote(fiatAmount: number, currency: FiatCurrency): Promise<PriceQuote> {\n    // Validate limits\n    const min = this.config.minPurchase[currency] || 10;\n    const max = this.config.maxPurchase[currency] || 10000;\n\n    if (fiatAmount < min) {\n      throw new Error(`Minimum purchase is ${min} ${currency}`);\n    }\n    if (fiatAmount > max) {\n      throw new Error(`Maximum purchase is ${max} ${currency}`);\n    }\n\n    // Get exchange rate\n    const exchangeRate = await this.rateProvider.getRate(currency);\n\n    // Calculate fee\n    const fee = fiatAmount * (this.config.feePercent / 100);\n    const netFiat = fiatAmount - fee;\n    const bsvAmount = netFiat / exchangeRate;\n\n    const quote: PriceQuote = {\n      id: this.generateId('quote'),\n      fiatAmount,\n      fiatCurrency: currency,\n      bsvAmount: Math.floor(bsvAmount * 100000000) / 100000000, // 8 decimals\n      exchangeRate,\n      fee,\n      feePercent: this.config.feePercent,\n      totalFiat: fiatAmount,\n      expiresAt: new Date(Date.now() + 5 * 60 * 1000), // 5 minutes\n      createdAt: new Date(),\n    };\n\n    return quote;\n  }\n\n  /**\n   * Create a purchase order\n   */\n  async createOrder(quote: PriceQuote, destinationAddress: string, userId?: string): Promise<PurchaseOrder> {\n    // Validate quote hasn't expired\n    if (new Date() > quote.expiresAt) {\n      throw new Error('Quote has expired');\n    }\n\n    // Validate BSV address (basic check)\n    if (!this.isValidBSVAddress(destinationAddress)) {\n      throw new Error('Invalid BSV address');\n    }\n\n    const order: PurchaseOrder = {\n      id: this.generateId('order'),\n      userId,\n      quote,\n      destinationAddress,\n      paymentStatus: 'pending',\n      deliveryStatus: 'pending',\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    this.orders.set(order.id, order);\n    return order;\n  }\n\n  /**\n   * Create Stripe checkout session for an order\n   */\n  async createStripeSession(\n    orderId: string,\n    successUrl: string,\n    cancelUrl: string,\n    customerEmail?: string\n  ): Promise<StripeSessionResponse> {\n    const order = this.orders.get(orderId);\n    if (!order) {\n      throw new Error('Order not found');\n    }\n\n    if (order.paymentStatus !== 'pending') {\n      throw new Error('Order already processed');\n    }\n\n    // This would call Stripe API - returning mock for types package\n    const sessionConfig: StripeSessionConfig = {\n      orderId: order.id,\n      fiatAmount: order.quote.fiatAmount,\n      fiatCurrency: order.quote.fiatCurrency,\n      customerEmail,\n      successUrl,\n      cancelUrl,\n      metadata: {\n        orderId: order.id,\n        bsvAddress: order.destinationAddress,\n        bsvAmount: order.quote.bsvAmount.toString(),\n      },\n    };\n\n    // In real implementation, this would call stripe.checkout.sessions.create\n    const sessionId = `cs_${this.generateId('session')}`;\n    order.stripeSessionId = sessionId;\n    order.paymentStatus = 'processing';\n    order.updatedAt = new Date();\n\n    return {\n      sessionId,\n      url: `https://checkout.stripe.com/pay/${sessionId}`,\n    };\n  }\n\n  /**\n   * Handle Stripe webhook event\n   */\n  async handleWebhook(event: WebhookEvent): Promise<void> {\n    const order = this.orders.get(event.orderId);\n    if (!order) {\n      console.warn(`Order not found for webhook: ${event.orderId}`);\n      return;\n    }\n\n    switch (event.type) {\n      case 'checkout.session.completed':\n      case 'payment_intent.succeeded':\n        order.paymentStatus = 'paid';\n        order.stripePaymentIntent = event.stripePaymentIntent;\n        order.deliveryStatus = 'queued';\n        order.updatedAt = new Date();\n        // In real implementation, queue BSV delivery\n        break;\n\n      case 'payment_intent.failed':\n        order.paymentStatus = 'failed';\n        order.updatedAt = new Date();\n        break;\n\n      case 'charge.refunded':\n        order.paymentStatus = 'refunded';\n        order.updatedAt = new Date();\n        break;\n    }\n  }\n\n  /**\n   * Record BSV delivery\n   */\n  recordDelivery(orderId: string, txid: string, confirmations: number = 0): void {\n    const order = this.orders.get(orderId);\n    if (!order) {\n      throw new Error('Order not found');\n    }\n\n    order.bsvTxid = txid;\n    order.bsvConfirmations = confirmations;\n    order.deliveryStatus = confirmations > 0 ? 'confirmed' : 'broadcasting';\n    order.updatedAt = new Date();\n\n    if (confirmations > 0) {\n      order.completedAt = new Date();\n\n      // Record transaction\n      this.transactions.push({\n        orderId: order.id,\n        fiatAmount: order.quote.fiatAmount,\n        fiatCurrency: order.quote.fiatCurrency,\n        bsvAmount: order.quote.bsvAmount,\n        exchangeRate: order.quote.exchangeRate,\n        fee: order.quote.fee,\n        txid,\n        destinationAddress: order.destinationAddress,\n        timestamp: new Date(),\n      });\n    }\n  }\n\n  /**\n   * Update BSV confirmation count\n   */\n  updateConfirmations(orderId: string, confirmations: number): void {\n    const order = this.orders.get(orderId);\n    if (!order) return;\n\n    order.bsvConfirmations = confirmations;\n    if (confirmations > 0 && order.deliveryStatus === 'broadcasting') {\n      order.deliveryStatus = 'confirmed';\n      order.completedAt = new Date();\n    }\n    order.updatedAt = new Date();\n  }\n\n  /**\n   * Get order by ID\n   */\n  getOrder(orderId: string): PurchaseOrder | undefined {\n    return this.orders.get(orderId);\n  }\n\n  /**\n   * Get orders for a user\n   */\n  getUserOrders(userId: string): PurchaseOrder[] {\n    return Array.from(this.orders.values())\n      .filter(o => o.userId === userId)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n  }\n\n  /**\n   * Get transaction history\n   */\n  getTransactions(limit?: number): TransactionRecord[] {\n    const sorted = [...this.transactions].sort(\n      (a, b) => b.timestamp.getTime() - a.timestamp.getTime()\n    );\n    return limit ? sorted.slice(0, limit) : sorted;\n  }\n\n  /**\n   * Get bridge statistics\n   */\n  getStats(): {\n    totalOrders: number;\n    completedOrders: number;\n    totalVolume: Record<FiatCurrency, number>;\n    totalBSVSold: number;\n    totalFees: Record<FiatCurrency, number>;\n  } {\n    const orders = Array.from(this.orders.values());\n    const completedOrders = orders.filter(o => o.completedAt);\n\n    const totalVolume: Record<string, number> = {};\n    const totalFees: Record<string, number> = {};\n    let totalBSVSold = 0;\n\n    for (const order of completedOrders) {\n      const currency = order.quote.fiatCurrency;\n      totalVolume[currency] = (totalVolume[currency] || 0) + order.quote.fiatAmount;\n      totalFees[currency] = (totalFees[currency] || 0) + order.quote.fee;\n      totalBSVSold += order.quote.bsvAmount;\n    }\n\n    return {\n      totalOrders: orders.length,\n      completedOrders: completedOrders.length,\n      totalVolume: totalVolume as Record<FiatCurrency, number>,\n      totalBSVSold,\n      totalFees: totalFees as Record<FiatCurrency, number>,\n    };\n  }\n\n  /**\n   * Helper to validate BSV address\n   */\n  private isValidBSVAddress(address: string): boolean {\n    // Basic validation - real implementation would use proper validation\n    return /^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/.test(address) ||\n           /^(bitcoincash:)?[qp][a-z0-9]{41}$/.test(address.toLowerCase());\n  }\n\n  /**\n   * Generate unique ID\n   */\n  private generateId(prefix: string): string {\n    return `${prefix}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createStripeBSVBridge(config: BridgeConfig): StripeBSVBridge {\n  return new StripeBSVBridge(config);\n}\n\nexport function createDefaultConfig(\n  stripeApiKey: string,\n  stripeWebhookSecret: string,\n  bsvWalletAddress: string\n): BridgeConfig {\n  return {\n    stripeApiKey,\n    stripeWebhookSecret,\n    bsvWalletAddress,\n    feePercent: 2.5,\n    minPurchase: {\n      USD: 10,\n      EUR: 10,\n      GBP: 10,\n      CAD: 15,\n      AUD: 15,\n      JPY: 1500,\n      CHF: 10,\n    },\n    maxPurchase: {\n      USD: 10000,\n      EUR: 10000,\n      GBP: 10000,\n      CAD: 15000,\n      AUD: 15000,\n      JPY: 1500000,\n      CHF: 10000,\n    },\n  };\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nexport function formatFiatAmount(amount: number, currency: FiatCurrency): string {\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  });\n  return formatter.format(amount);\n}\n\nexport function formatBSVAmount(amount: number): string {\n  return amount.toFixed(8) + ' BSV';\n}\n\nexport function calculateExchangeRate(fiatAmount: number, bsvAmount: number): number {\n  return fiatAmount / bsvAmount;\n}\n\nexport function estimateBSVForFiat(\n  fiatAmount: number,\n  exchangeRate: number,\n  feePercent: number\n): number {\n  const fee = fiatAmount * (feePercent / 100);\n  const netFiat = fiatAmount - fee;\n  return netFiat / exchangeRate;\n}\n\nexport function estimateFiatForBSV(\n  bsvAmount: number,\n  exchangeRate: number,\n  feePercent: number\n): number {\n  const grossFiat = bsvAmount * exchangeRate;\n  return grossFiat / (1 - feePercent / 100);\n}\n\nexport function isQuoteValid(quote: PriceQuote): boolean {\n  return new Date() < quote.expiresAt;\n}\n\nexport function getQuoteTimeRemaining(quote: PriceQuote): number {\n  const remaining = quote.expiresAt.getTime() - Date.now();\n  return Math.max(0, remaining);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmIO,IAAM,wBAAN,MAA4D;AAAA,EAA5D;AACL,SAAQ,QAAgE,oBAAI,IAAI;AAChF,SAAQ,WAAW;AAAA;AAAA;AAAA,EAEnB,MAAM,QAAQ,UAAyC;AACrD,UAAM,SAAS,KAAK,MAAM,IAAI,QAAQ;AACtC,QAAI,UAAU,KAAK,IAAI,IAAI,OAAO,YAAY,KAAK,UAAU;AAC3D,aAAO,OAAO;AAAA,IAChB;AAEA,UAAM,aAAa,SAAS,YAAY;AACxC,UAAM,MAAM,mFAAmF,UAAU;AAEzG,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,GAAG;AAChC,UAAI,CAAC,SAAS,IAAI;AAChB,cAAM,IAAI,MAAM,yBAAyB,SAAS,UAAU,EAAE;AAAA,MAChE;AAEA,YAAM,OAAQ,MAAM,SAAS,KAAK;AAClC,YAAM,OAAO,KAAK,iBAAiB,IAAI,UAAU;AAEjD,UAAI,CAAC,MAAM;AACT,cAAM,IAAI,MAAM,qBAAqB,QAAQ,EAAE;AAAA,MACjD;AAEA,WAAK,MAAM,IAAI,UAAU,EAAE,MAAM,WAAW,KAAK,IAAI,EAAE,CAAC;AACxD,aAAO;AAAA,IACT,SAAS,OAAO;AAEd,UAAI,QAAQ;AACV,eAAO,OAAO;AAAA,MAChB;AACA,YAAM;AAAA,IACR;AAAA,EACF;AACF;AAMO,IAAM,kBAAN,MAAsB;AAAA,EAM3B,YAAY,QAAsB;AAJlC,SAAQ,SAAqC,oBAAI,IAAI;AACrD,SAAQ,eAAoC,CAAC;AAI3C,SAAK,SAAS;AACd,SAAK,eAAe,OAAO,wBAAwB,IAAI,sBAAsB;AAAA,EAC/E;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,SAAS,YAAoB,UAA6C;AAE9E,UAAM,MAAM,KAAK,OAAO,YAAY,QAAQ,KAAK;AACjD,UAAM,MAAM,KAAK,OAAO,YAAY,QAAQ,KAAK;AAEjD,QAAI,aAAa,KAAK;AACpB,YAAM,IAAI,MAAM,uBAAuB,GAAG,IAAI,QAAQ,EAAE;AAAA,IAC1D;AACA,QAAI,aAAa,KAAK;AACpB,YAAM,IAAI,MAAM,uBAAuB,GAAG,IAAI,QAAQ,EAAE;AAAA,IAC1D;AAGA,UAAM,eAAe,MAAM,KAAK,aAAa,QAAQ,QAAQ;AAG7D,UAAM,MAAM,cAAc,KAAK,OAAO,aAAa;AACnD,UAAM,UAAU,aAAa;AAC7B,UAAM,YAAY,UAAU;AAE5B,UAAM,QAAoB;AAAA,MACxB,IAAI,KAAK,WAAW,OAAO;AAAA,MAC3B;AAAA,MACA,cAAc;AAAA,MACd,WAAW,KAAK,MAAM,YAAY,GAAS,IAAI;AAAA;AAAA,MAC/C;AAAA,MACA;AAAA,MACA,YAAY,KAAK,OAAO;AAAA,MACxB,WAAW;AAAA,MACX,WAAW,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI,KAAK,GAAI;AAAA;AAAA,MAC9C,WAAW,oBAAI,KAAK;AAAA,IACtB;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,YAAY,OAAmB,oBAA4B,QAAyC;AAExG,QAAI,oBAAI,KAAK,IAAI,MAAM,WAAW;AAChC,YAAM,IAAI,MAAM,mBAAmB;AAAA,IACrC;AAGA,QAAI,CAAC,KAAK,kBAAkB,kBAAkB,GAAG;AAC/C,YAAM,IAAI,MAAM,qBAAqB;AAAA,IACvC;AAEA,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,WAAW,OAAO;AAAA,MAC3B;AAAA,MACA;AAAA,MACA;AAAA,MACA,eAAe;AAAA,MACf,gBAAgB;AAAA,MAChB,WAAW,oBAAI,KAAK;AAAA,MACpB,WAAW,oBAAI,KAAK;AAAA,IACtB;AAEA,SAAK,OAAO,IAAI,MAAM,IAAI,KAAK;AAC/B,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,oBACJ,SACA,YACA,WACA,eACgC;AAChC,UAAM,QAAQ,KAAK,OAAO,IAAI,OAAO;AACrC,QAAI,CAAC,OAAO;AACV,YAAM,IAAI,MAAM,iBAAiB;AAAA,IACnC;AAEA,QAAI,MAAM,kBAAkB,WAAW;AACrC,YAAM,IAAI,MAAM,yBAAyB;AAAA,IAC3C;AAGA,UAAM,gBAAqC;AAAA,MACzC,SAAS,MAAM;AAAA,MACf,YAAY,MAAM,MAAM;AAAA,MACxB,cAAc,MAAM,MAAM;AAAA,MAC1B;AAAA,MACA;AAAA,MACA;AAAA,MACA,UAAU;AAAA,QACR,SAAS,MAAM;AAAA,QACf,YAAY,MAAM;AAAA,QAClB,WAAW,MAAM,MAAM,UAAU,SAAS;AAAA,MAC5C;AAAA,IACF;AAGA,UAAM,YAAY,MAAM,KAAK,WAAW,SAAS,CAAC;AAClD,UAAM,kBAAkB;AACxB,UAAM,gBAAgB;AACtB,UAAM,YAAY,oBAAI,KAAK;AAE3B,WAAO;AAAA,MACL;AAAA,MACA,KAAK,mCAAmC,SAAS;AAAA,IACnD;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,cAAc,OAAoC;AACtD,UAAM,QAAQ,KAAK,OAAO,IAAI,MAAM,OAAO;AAC3C,QAAI,CAAC,OAAO;AACV,cAAQ,KAAK,gCAAgC,MAAM,OAAO,EAAE;AAC5D;AAAA,IACF;AAEA,YAAQ,MAAM,MAAM;AAAA,MAClB,KAAK;AAAA,MACL,KAAK;AACH,cAAM,gBAAgB;AACtB,cAAM,sBAAsB,MAAM;AAClC,cAAM,iBAAiB;AACvB,cAAM,YAAY,oBAAI,KAAK;AAE3B;AAAA,MAEF,KAAK;AACH,cAAM,gBAAgB;AACtB,cAAM,YAAY,oBAAI,KAAK;AAC3B;AAAA,MAEF,KAAK;AACH,cAAM,gBAAgB;AACtB,cAAM,YAAY,oBAAI,KAAK;AAC3B;AAAA,IACJ;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,eAAe,SAAiB,MAAc,gBAAwB,GAAS;AAC7E,UAAM,QAAQ,KAAK,OAAO,IAAI,OAAO;AACrC,QAAI,CAAC,OAAO;AACV,YAAM,IAAI,MAAM,iBAAiB;AAAA,IACnC;AAEA,UAAM,UAAU;AAChB,UAAM,mBAAmB;AACzB,UAAM,iBAAiB,gBAAgB,IAAI,cAAc;AACzD,UAAM,YAAY,oBAAI,KAAK;AAE3B,QAAI,gBAAgB,GAAG;AACrB,YAAM,cAAc,oBAAI,KAAK;AAG7B,WAAK,aAAa,KAAK;AAAA,QACrB,SAAS,MAAM;AAAA,QACf,YAAY,MAAM,MAAM;AAAA,QACxB,cAAc,MAAM,MAAM;AAAA,QAC1B,WAAW,MAAM,MAAM;AAAA,QACvB,cAAc,MAAM,MAAM;AAAA,QAC1B,KAAK,MAAM,MAAM;AAAA,QACjB;AAAA,QACA,oBAAoB,MAAM;AAAA,QAC1B,WAAW,oBAAI,KAAK;AAAA,MACtB,CAAC;AAAA,IACH;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,oBAAoB,SAAiB,eAA6B;AAChE,UAAM,QAAQ,KAAK,OAAO,IAAI,OAAO;AACrC,QAAI,CAAC,MAAO;AAEZ,UAAM,mBAAmB;AACzB,QAAI,gBAAgB,KAAK,MAAM,mBAAmB,gBAAgB;AAChE,YAAM,iBAAiB;AACvB,YAAM,cAAc,oBAAI,KAAK;AAAA,IAC/B;AACA,UAAM,YAAY,oBAAI,KAAK;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,SAA4C;AACnD,WAAO,KAAK,OAAO,IAAI,OAAO;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA,EAKA,cAAc,QAAiC;AAC7C,WAAO,MAAM,KAAK,KAAK,OAAO,OAAO,CAAC,EACnC,OAAO,OAAK,EAAE,WAAW,MAAM,EAC/B,KAAK,CAAC,GAAG,MAAM,EAAE,UAAU,QAAQ,IAAI,EAAE,UAAU,QAAQ,CAAC;AAAA,EACjE;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgB,OAAqC;AACnD,UAAM,SAAS,CAAC,GAAG,KAAK,YAAY,EAAE;AAAA,MACpC,CAAC,GAAG,MAAM,EAAE,UAAU,QAAQ,IAAI,EAAE,UAAU,QAAQ;AAAA,IACxD;AACA,WAAO,QAAQ,OAAO,MAAM,GAAG,KAAK,IAAI;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAKA,WAME;AACA,UAAM,SAAS,MAAM,KAAK,KAAK,OAAO,OAAO,CAAC;AAC9C,UAAM,kBAAkB,OAAO,OAAO,OAAK,EAAE,WAAW;AAExD,UAAM,cAAsC,CAAC;AAC7C,UAAM,YAAoC,CAAC;AAC3C,QAAI,eAAe;AAEnB,eAAW,SAAS,iBAAiB;AACnC,YAAM,WAAW,MAAM,MAAM;AAC7B,kBAAY,QAAQ,KAAK,YAAY,QAAQ,KAAK,KAAK,MAAM,MAAM;AACnE,gBAAU,QAAQ,KAAK,UAAU,QAAQ,KAAK,KAAK,MAAM,MAAM;AAC/D,sBAAgB,MAAM,MAAM;AAAA,IAC9B;AAEA,WAAO;AAAA,MACL,aAAa,OAAO;AAAA,MACpB,iBAAiB,gBAAgB;AAAA,MACjC;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKQ,kBAAkB,SAA0B;AAElD,WAAO,oCAAoC,KAAK,OAAO,KAChD,oCAAoC,KAAK,QAAQ,YAAY,CAAC;AAAA,EACvE;AAAA;AAAA;AAAA;AAAA,EAKQ,WAAW,QAAwB;AACzC,WAAO,GAAG,MAAM,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC,CAAC;AAAA,EAC3E;AACF;AAMO,SAAS,sBAAsB,QAAuC;AAC3E,SAAO,IAAI,gBAAgB,MAAM;AACnC;AAEO,SAAS,oBACd,cACA,qBACA,kBACc;AACd,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA,YAAY;AAAA,IACZ,aAAa;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,IACP;AAAA,IACA,aAAa;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,IACP;AAAA,EACF;AACF;AAMO,SAAS,iBAAiB,QAAgB,UAAgC;AAC/E,QAAM,YAAY,IAAI,KAAK,aAAa,SAAS;AAAA,IAC/C,OAAO;AAAA,IACP;AAAA,IACA,uBAAuB;AAAA,IACvB,uBAAuB;AAAA,EACzB,CAAC;AACD,SAAO,UAAU,OAAO,MAAM;AAChC;AAEO,SAAS,gBAAgB,QAAwB;AACtD,SAAO,OAAO,QAAQ,CAAC,IAAI;AAC7B;AAEO,SAAS,sBAAsB,YAAoB,WAA2B;AACnF,SAAO,aAAa;AACtB;AAEO,SAAS,mBACd,YACA,cACA,YACQ;AACR,QAAM,MAAM,cAAc,aAAa;AACvC,QAAM,UAAU,aAAa;AAC7B,SAAO,UAAU;AACnB;AAEO,SAAS,mBACd,WACA,cACA,YACQ;AACR,QAAM,YAAY,YAAY;AAC9B,SAAO,aAAa,IAAI,aAAa;AACvC;AAEO,SAAS,aAAa,OAA4B;AACvD,SAAO,oBAAI,KAAK,IAAI,MAAM;AAC5B;AAEO,SAAS,sBAAsB,OAA2B;AAC/D,QAAM,YAAY,MAAM,UAAU,QAAQ,IAAI,KAAK,IAAI;AACvD,SAAO,KAAK,IAAI,GAAG,SAAS;AAC9B;","names":[]}