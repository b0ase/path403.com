{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/os-shell\n *\n * Desktop OS simulation with window management, filesystem, and processes.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Window state */\nexport interface WindowState {\n  id: string;\n  title: string;\n  icon?: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  minWidth?: number;\n  minHeight?: number;\n  maxWidth?: number;\n  maxHeight?: number;\n  isMinimized: boolean;\n  isMaximized: boolean;\n  isFocused: boolean;\n  isResizable: boolean;\n  isDraggable: boolean;\n  zIndex: number;\n  appId: string;\n  metadata?: Record<string, unknown>;\n}\n\n/** Window config */\nexport interface WindowConfig {\n  title: string;\n  icon?: string;\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  minWidth?: number;\n  minHeight?: number;\n  maxWidth?: number;\n  maxHeight?: number;\n  isResizable?: boolean;\n  isDraggable?: boolean;\n  centered?: boolean;\n  appId: string;\n  metadata?: Record<string, unknown>;\n}\n\n/** Application definition */\nexport interface Application {\n  id: string;\n  name: string;\n  icon: string;\n  description?: string;\n  version?: string;\n  category?: string;\n  defaultWindow?: Partial<WindowConfig>;\n  singleton?: boolean;\n  permissions?: string[];\n}\n\n/** Process state */\nexport interface Process {\n  pid: number;\n  appId: string;\n  windowId?: string;\n  status: 'running' | 'suspended' | 'terminated';\n  startedAt: number;\n  cpuUsage: number;\n  memoryUsage: number;\n}\n\n/** File node */\nexport interface FileNode {\n  name: string;\n  path: string;\n  type: 'file' | 'directory' | 'symlink';\n  size: number;\n  createdAt: number;\n  modifiedAt: number;\n  permissions: FilePermissions;\n  owner: string;\n  content?: string | Uint8Array;\n  children?: Map<string, FileNode>;\n  target?: string; // For symlinks\n  metadata?: Record<string, unknown>;\n}\n\n/** File permissions */\nexport interface FilePermissions {\n  read: boolean;\n  write: boolean;\n  execute: boolean;\n}\n\n/** Desktop settings */\nexport interface DesktopSettings {\n  wallpaper?: string;\n  theme: 'light' | 'dark' | 'system';\n  iconSize: 'small' | 'medium' | 'large';\n  taskbarPosition: 'top' | 'bottom' | 'left' | 'right';\n  showDesktopIcons: boolean;\n  animations: boolean;\n}\n\n/** Notification */\nexport interface Notification {\n  id: string;\n  title: string;\n  message: string;\n  icon?: string;\n  appId?: string;\n  timestamp: number;\n  read: boolean;\n  actions?: Array<{ label: string; action: string }>;\n}\n\n/** Desktop event */\nexport type DesktopEvent =\n  | 'window:created'\n  | 'window:closed'\n  | 'window:focused'\n  | 'window:moved'\n  | 'window:resized'\n  | 'window:minimized'\n  | 'window:maximized'\n  | 'process:started'\n  | 'process:terminated'\n  | 'notification:created'\n  | 'settings:changed';\n\n/** Event listener */\nexport type DesktopEventListener = (data: unknown) => void;\n\n// ============================================================================\n// Window Manager\n// ============================================================================\n\nexport class WindowManager {\n  private windows: Map<string, WindowState> = new Map();\n  private zIndexCounter = 100;\n  private listeners: Map<string, Set<DesktopEventListener>> = new Map();\n\n  // ==========================================================================\n  // Window Operations\n  // ==========================================================================\n\n  createWindow(config: WindowConfig): WindowState {\n    const id = this.generateId();\n    const screen = { width: 1920, height: 1080 }; // Default screen size\n\n    let x = config.x ?? 50;\n    let y = config.y ?? 50;\n\n    if (config.centered) {\n      x = (screen.width - (config.width || 800)) / 2;\n      y = (screen.height - (config.height || 600)) / 2;\n    }\n\n    const window: WindowState = {\n      id,\n      title: config.title,\n      icon: config.icon,\n      x,\n      y,\n      width: config.width || 800,\n      height: config.height || 600,\n      minWidth: config.minWidth || 200,\n      minHeight: config.minHeight || 100,\n      maxWidth: config.maxWidth,\n      maxHeight: config.maxHeight,\n      isMinimized: false,\n      isMaximized: false,\n      isFocused: true,\n      isResizable: config.isResizable !== false,\n      isDraggable: config.isDraggable !== false,\n      zIndex: ++this.zIndexCounter,\n      appId: config.appId,\n      metadata: config.metadata,\n    };\n\n    // Unfocus other windows\n    for (const w of this.windows.values()) {\n      w.isFocused = false;\n    }\n\n    this.windows.set(id, window);\n    this.emit('window:created', window);\n    return window;\n  }\n\n  closeWindow(id: string): boolean {\n    const window = this.windows.get(id);\n    if (!window) return false;\n\n    this.windows.delete(id);\n    this.emit('window:closed', window);\n    return true;\n  }\n\n  focusWindow(id: string): void {\n    const window = this.windows.get(id);\n    if (!window) return;\n\n    for (const w of this.windows.values()) {\n      w.isFocused = false;\n    }\n\n    window.isFocused = true;\n    window.isMinimized = false;\n    window.zIndex = ++this.zIndexCounter;\n    this.emit('window:focused', window);\n  }\n\n  minimizeWindow(id: string): void {\n    const window = this.windows.get(id);\n    if (!window) return;\n\n    window.isMinimized = true;\n    window.isFocused = false;\n    this.emit('window:minimized', window);\n  }\n\n  maximizeWindow(id: string): void {\n    const window = this.windows.get(id);\n    if (!window) return;\n\n    window.isMaximized = !window.isMaximized;\n    this.emit('window:maximized', window);\n  }\n\n  moveWindow(id: string, x: number, y: number): void {\n    const window = this.windows.get(id);\n    if (!window || !window.isDraggable) return;\n\n    window.x = x;\n    window.y = y;\n    this.emit('window:moved', window);\n  }\n\n  resizeWindow(id: string, width: number, height: number): void {\n    const window = this.windows.get(id);\n    if (!window || !window.isResizable) return;\n\n    window.width = Math.max(window.minWidth || 0, Math.min(width, window.maxWidth || Infinity));\n    window.height = Math.max(window.minHeight || 0, Math.min(height, window.maxHeight || Infinity));\n    this.emit('window:resized', window);\n  }\n\n  // ==========================================================================\n  // Queries\n  // ==========================================================================\n\n  getWindow(id: string): WindowState | undefined {\n    return this.windows.get(id);\n  }\n\n  getAllWindows(): WindowState[] {\n    return Array.from(this.windows.values());\n  }\n\n  getWindowsByApp(appId: string): WindowState[] {\n    return this.getAllWindows().filter((w) => w.appId === appId);\n  }\n\n  getFocusedWindow(): WindowState | undefined {\n    return this.getAllWindows().find((w) => w.isFocused);\n  }\n\n  getVisibleWindows(): WindowState[] {\n    return this.getAllWindows()\n      .filter((w) => !w.isMinimized)\n      .sort((a, b) => a.zIndex - b.zIndex);\n  }\n\n  // ==========================================================================\n  // Events\n  // ==========================================================================\n\n  on(event: string, listener: DesktopEventListener): () => void {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    this.listeners.get(event)!.add(listener);\n    return () => this.off(event, listener);\n  }\n\n  off(event: string, listener: DesktopEventListener): void {\n    this.listeners.get(event)?.delete(listener);\n  }\n\n  private emit(event: string, data: unknown): void {\n    const eventListeners = this.listeners.get(event);\n    if (eventListeners) {\n      for (const listener of eventListeners) {\n        listener(data);\n      }\n    }\n  }\n\n  private generateId(): string {\n    return `win_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;\n  }\n}\n\n// ============================================================================\n// Virtual Filesystem\n// ============================================================================\n\nexport class VirtualFileSystem {\n  private root: FileNode;\n\n  constructor() {\n    this.root = this.createDirectory('/', '/');\n    this.initializeDefaultStructure();\n  }\n\n  private initializeDefaultStructure(): void {\n    this.mkdir('/home');\n    this.mkdir('/home/user');\n    this.mkdir('/home/user/Desktop');\n    this.mkdir('/home/user/Documents');\n    this.mkdir('/home/user/Downloads');\n    this.mkdir('/home/user/Pictures');\n    this.mkdir('/Applications');\n    this.mkdir('/System');\n    this.mkdir('/tmp');\n  }\n\n  private createDirectory(name: string, path: string): FileNode {\n    return {\n      name,\n      path,\n      type: 'directory',\n      size: 0,\n      createdAt: Date.now(),\n      modifiedAt: Date.now(),\n      permissions: { read: true, write: true, execute: true },\n      owner: 'root',\n      children: new Map(),\n    };\n  }\n\n  private createFile(name: string, path: string, content: string | Uint8Array = ''): FileNode {\n    const size = typeof content === 'string' ? content.length : content.length;\n    return {\n      name,\n      path,\n      type: 'file',\n      size,\n      createdAt: Date.now(),\n      modifiedAt: Date.now(),\n      permissions: { read: true, write: true, execute: false },\n      owner: 'user',\n      content,\n    };\n  }\n\n  private parsePath(path: string): string[] {\n    return path.split('/').filter(Boolean);\n  }\n\n  private getNode(path: string): FileNode | null {\n    if (path === '/') return this.root;\n\n    const parts = this.parsePath(path);\n    let current = this.root;\n\n    for (const part of parts) {\n      if (current.type !== 'directory' || !current.children) {\n        return null;\n      }\n      const child = current.children.get(part);\n      if (!child) return null;\n      current = child;\n    }\n\n    return current;\n  }\n\n  private getParent(path: string): { parent: FileNode; name: string } | null {\n    const parts = this.parsePath(path);\n    if (parts.length === 0) return null;\n\n    const name = parts.pop()!;\n    const parentPath = '/' + parts.join('/');\n    const parent = this.getNode(parentPath);\n\n    if (!parent || parent.type !== 'directory') return null;\n    return { parent, name };\n  }\n\n  // ==========================================================================\n  // File Operations\n  // ==========================================================================\n\n  exists(path: string): boolean {\n    return this.getNode(path) !== null;\n  }\n\n  isFile(path: string): boolean {\n    const node = this.getNode(path);\n    return node?.type === 'file';\n  }\n\n  isDirectory(path: string): boolean {\n    const node = this.getNode(path);\n    return node?.type === 'directory';\n  }\n\n  mkdir(path: string): boolean {\n    const result = this.getParent(path);\n    if (!result) return false;\n\n    const { parent, name } = result;\n    if (parent.children!.has(name)) return false;\n\n    parent.children!.set(name, this.createDirectory(name, path));\n    return true;\n  }\n\n  writeFile(path: string, content: string | Uint8Array): boolean {\n    const result = this.getParent(path);\n    if (!result) return false;\n\n    const { parent, name } = result;\n    const existing = parent.children!.get(name);\n\n    if (existing && existing.type === 'directory') return false;\n\n    parent.children!.set(name, this.createFile(name, path, content));\n    return true;\n  }\n\n  readFile(path: string): string | Uint8Array | null {\n    const node = this.getNode(path);\n    if (!node || node.type !== 'file') return null;\n    return node.content || '';\n  }\n\n  readDir(path: string): string[] {\n    const node = this.getNode(path);\n    if (!node || node.type !== 'directory' || !node.children) return [];\n    return Array.from(node.children.keys());\n  }\n\n  stat(path: string): Omit<FileNode, 'content' | 'children'> | null {\n    const node = this.getNode(path);\n    if (!node) return null;\n\n    const { content, children, ...stats } = node;\n    return stats;\n  }\n\n  rm(path: string): boolean {\n    const result = this.getParent(path);\n    if (!result) return false;\n\n    const { parent, name } = result;\n    return parent.children!.delete(name);\n  }\n\n  mv(oldPath: string, newPath: string): boolean {\n    const node = this.getNode(oldPath);\n    if (!node) return false;\n\n    const newResult = this.getParent(newPath);\n    if (!newResult) return false;\n\n    const oldResult = this.getParent(oldPath);\n    if (!oldResult) return false;\n\n    oldResult.parent.children!.delete(oldResult.name);\n    node.name = newResult.name;\n    node.path = newPath;\n    newResult.parent.children!.set(newResult.name, node);\n\n    return true;\n  }\n\n  cp(srcPath: string, destPath: string): boolean {\n    const node = this.getNode(srcPath);\n    if (!node || node.type !== 'file') return false;\n\n    return this.writeFile(destPath, node.content || '');\n  }\n\n  getSize(path: string): number {\n    const node = this.getNode(path);\n    if (!node) return 0;\n\n    if (node.type === 'file') {\n      return node.size;\n    }\n\n    let total = 0;\n    const traverse = (n: FileNode): void => {\n      if (n.type === 'file') {\n        total += n.size;\n      } else if (n.children) {\n        for (const child of n.children.values()) {\n          traverse(child);\n        }\n      }\n    };\n\n    traverse(node);\n    return total;\n  }\n}\n\n// ============================================================================\n// Process Manager\n// ============================================================================\n\nexport class ProcessManager {\n  private processes: Map<number, Process> = new Map();\n  private pidCounter = 1000;\n  private listeners: Map<string, Set<DesktopEventListener>> = new Map();\n\n  spawn(appId: string, windowId?: string): Process {\n    const pid = ++this.pidCounter;\n    const process: Process = {\n      pid,\n      appId,\n      windowId,\n      status: 'running',\n      startedAt: Date.now(),\n      cpuUsage: 0,\n      memoryUsage: 0,\n    };\n\n    this.processes.set(pid, process);\n    this.emit('process:started', process);\n    return process;\n  }\n\n  terminate(pid: number): boolean {\n    const process = this.processes.get(pid);\n    if (!process) return false;\n\n    process.status = 'terminated';\n    this.processes.delete(pid);\n    this.emit('process:terminated', process);\n    return true;\n  }\n\n  suspend(pid: number): boolean {\n    const process = this.processes.get(pid);\n    if (!process || process.status !== 'running') return false;\n\n    process.status = 'suspended';\n    return true;\n  }\n\n  resume(pid: number): boolean {\n    const process = this.processes.get(pid);\n    if (!process || process.status !== 'suspended') return false;\n\n    process.status = 'running';\n    return true;\n  }\n\n  getProcess(pid: number): Process | undefined {\n    return this.processes.get(pid);\n  }\n\n  getAllProcesses(): Process[] {\n    return Array.from(this.processes.values());\n  }\n\n  getProcessesByApp(appId: string): Process[] {\n    return this.getAllProcesses().filter((p) => p.appId === appId);\n  }\n\n  on(event: string, listener: DesktopEventListener): () => void {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    this.listeners.get(event)!.add(listener);\n    return () => this.off(event, listener);\n  }\n\n  off(event: string, listener: DesktopEventListener): void {\n    this.listeners.get(event)?.delete(listener);\n  }\n\n  private emit(event: string, data: unknown): void {\n    const eventListeners = this.listeners.get(event);\n    if (eventListeners) {\n      for (const listener of eventListeners) {\n        listener(data);\n      }\n    }\n  }\n}\n\n// ============================================================================\n// Desktop Environment\n// ============================================================================\n\nexport class DesktopEnvironment {\n  readonly windows: WindowManager;\n  readonly fs: VirtualFileSystem;\n  readonly processes: ProcessManager;\n  private apps: Map<string, Application> = new Map();\n  private notifications: Notification[] = [];\n  private settings: DesktopSettings;\n\n  constructor() {\n    this.windows = new WindowManager();\n    this.fs = new VirtualFileSystem();\n    this.processes = new ProcessManager();\n    this.settings = {\n      theme: 'dark',\n      iconSize: 'medium',\n      taskbarPosition: 'bottom',\n      showDesktopIcons: true,\n      animations: true,\n    };\n  }\n\n  // ==========================================================================\n  // Application Management\n  // ==========================================================================\n\n  registerApp(app: Application): void {\n    this.apps.set(app.id, app);\n  }\n\n  unregisterApp(appId: string): void {\n    this.apps.delete(appId);\n  }\n\n  getApp(appId: string): Application | undefined {\n    return this.apps.get(appId);\n  }\n\n  getAllApps(): Application[] {\n    return Array.from(this.apps.values());\n  }\n\n  launchApp(appId: string, params?: Record<string, unknown>): { window: WindowState; process: Process } | null {\n    const app = this.apps.get(appId);\n    if (!app) return null;\n\n    // Check singleton\n    if (app.singleton) {\n      const existingWindow = this.windows.getWindowsByApp(appId)[0];\n      if (existingWindow) {\n        this.windows.focusWindow(existingWindow.id);\n        return {\n          window: existingWindow,\n          process: this.processes.getProcessesByApp(appId)[0],\n        };\n      }\n    }\n\n    const window = this.windows.createWindow({\n      title: app.name,\n      icon: app.icon,\n      appId,\n      ...app.defaultWindow,\n      metadata: params,\n    });\n\n    const process = this.processes.spawn(appId, window.id);\n\n    return { window, process };\n  }\n\n  // ==========================================================================\n  // Notifications\n  // ==========================================================================\n\n  notify(title: string, message: string, options?: Partial<Notification>): Notification {\n    const notification: Notification = {\n      id: `notif_${Date.now()}`,\n      title,\n      message,\n      timestamp: Date.now(),\n      read: false,\n      ...options,\n    };\n\n    this.notifications.unshift(notification);\n    return notification;\n  }\n\n  getNotifications(): Notification[] {\n    return [...this.notifications];\n  }\n\n  markNotificationRead(id: string): void {\n    const notification = this.notifications.find((n) => n.id === id);\n    if (notification) {\n      notification.read = true;\n    }\n  }\n\n  clearNotifications(): void {\n    this.notifications = [];\n  }\n\n  // ==========================================================================\n  // Settings\n  // ==========================================================================\n\n  getSettings(): DesktopSettings {\n    return { ...this.settings };\n  }\n\n  updateSettings(updates: Partial<DesktopSettings>): void {\n    this.settings = { ...this.settings, ...updates };\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createDesktopEnvironment(): DesktopEnvironment {\n  return new DesktopEnvironment();\n}\n\nexport function createWindowManager(): WindowManager {\n  return new WindowManager();\n}\n\nexport function createFileSystem(): VirtualFileSystem {\n  return new VirtualFileSystem();\n}\n\nexport function createProcessManager(): ProcessManager {\n  return new ProcessManager();\n}\n"],"mappings":"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","names":[]}