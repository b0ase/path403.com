{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/tokenization-modal\n *\n * Asset tokenization modal types and utilities.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Asset type */\nexport type AssetType =\n  | 'real-estate'\n  | 'equity'\n  | 'debt'\n  | 'commodity'\n  | 'art'\n  | 'collectible'\n  | 'intellectual-property'\n  | 'revenue-share'\n  | 'utility'\n  | 'other';\n\n/** Token standard */\nexport type TokenStandard =\n  | 'bsv-20'\n  | 'bsv-21'\n  | 'erc-20'\n  | 'erc-721'\n  | 'erc-1155'\n  | 'spl'\n  | 'ordinals';\n\n/** Blockchain network */\nexport type BlockchainNetwork =\n  | 'bsv'\n  | 'bitcoin'\n  | 'ethereum'\n  | 'polygon'\n  | 'solana'\n  | 'base';\n\n/** Tokenization status */\nexport type TokenizationStatus =\n  | 'draft'\n  | 'validating'\n  | 'pending-legal'\n  | 'pending-kyc'\n  | 'deploying'\n  | 'active'\n  | 'paused'\n  | 'completed'\n  | 'failed';\n\n/** Distribution method */\nexport type DistributionMethod =\n  | 'fixed-price'\n  | 'auction'\n  | 'dutch-auction'\n  | 'whitelist'\n  | 'airdrop'\n  | 'bonding-curve';\n\n/** Compliance framework */\nexport type ComplianceFramework =\n  | 'none'\n  | 'reg-d'\n  | 'reg-s'\n  | 'reg-a'\n  | 'reg-cf'\n  | 'mifid-ii'\n  | 'custom';\n\n/** Ownership type */\nexport type OwnershipType =\n  | 'full'\n  | 'fractional'\n  | 'time-based'\n  | 'rights-only';\n\n/** Asset details */\nexport interface AssetDetails {\n  name: string;\n  description: string;\n  type: AssetType;\n  category?: string;\n  valuation: bigint;\n  valuationCurrency: string;\n  valuationDate: Date;\n  documents: AssetDocument[];\n  images: string[];\n  location?: {\n    address?: string;\n    city?: string;\n    country: string;\n    coordinates?: { lat: number; lng: number };\n  };\n  metadata?: Record<string, unknown>;\n}\n\n/** Asset document */\nexport interface AssetDocument {\n  id: string;\n  name: string;\n  type: 'legal' | 'valuation' | 'insurance' | 'audit' | 'other';\n  url: string;\n  hash?: string;\n  uploadedAt: Date;\n  verified: boolean;\n}\n\n/** Token configuration */\nexport interface TokenConfig {\n  name: string;\n  symbol: string;\n  standard: TokenStandard;\n  network: BlockchainNetwork;\n  totalSupply: bigint;\n  decimals: number;\n  transferable: boolean;\n  burnable: boolean;\n  mintable: boolean;\n  pausable: boolean;\n}\n\n/** Distribution configuration */\nexport interface DistributionConfig {\n  method: DistributionMethod;\n  pricePerToken: bigint;\n  priceCurrency: string;\n  minPurchase?: bigint;\n  maxPurchase?: bigint;\n  startDate?: Date;\n  endDate?: Date;\n  softCap?: bigint;\n  hardCap?: bigint;\n  whitelistRequired: boolean;\n  vestingSchedule?: VestingSchedule;\n}\n\n/** Vesting schedule */\nexport interface VestingSchedule {\n  cliffMonths: number;\n  vestingMonths: number;\n  immediatePercent: number;\n  vestingType: 'linear' | 'cliff' | 'milestone';\n}\n\n/** Compliance configuration */\nexport interface ComplianceConfig {\n  framework: ComplianceFramework;\n  kycRequired: boolean;\n  accreditedOnly: boolean;\n  jurisdictions: string[];\n  blockedCountries: string[];\n  maxInvestors?: number;\n  lockupPeriodDays?: number;\n  transferRestrictions?: TransferRestriction[];\n}\n\n/** Transfer restriction */\nexport interface TransferRestriction {\n  type: 'whitelist' | 'blacklist' | 'holding-period' | 'max-holders';\n  value: string | number;\n  description: string;\n}\n\n/** Revenue distribution */\nexport interface RevenueDistribution {\n  enabled: boolean;\n  frequency: 'monthly' | 'quarterly' | 'annually' | 'on-demand';\n  currency: string;\n  minimumAmount?: bigint;\n  distributionFee?: number;\n}\n\n/** Governance configuration */\nexport interface GovernanceConfig {\n  enabled: boolean;\n  votingThreshold: number;\n  proposalThreshold: number;\n  votingPeriodDays: number;\n  timelock: number;\n  quorumPercent: number;\n}\n\n/** Tokenization project */\nexport interface TokenizationProject {\n  id: string;\n  ownerId: string;\n  asset: AssetDetails;\n  token: TokenConfig;\n  distribution: DistributionConfig;\n  compliance: ComplianceConfig;\n  revenue?: RevenueDistribution;\n  governance?: GovernanceConfig;\n  status: TokenizationStatus;\n  contractAddress?: string;\n  deploymentTxid?: string;\n  createdAt: Date;\n  updatedAt: Date;\n  launchedAt?: Date;\n  error?: string;\n}\n\n/** Modal step */\nexport interface ModalStep {\n  id: string;\n  title: string;\n  description?: string;\n  component: 'asset' | 'token' | 'distribution' | 'compliance' | 'review' | 'deploy';\n  completed: boolean;\n  active: boolean;\n  optional?: boolean;\n}\n\n/** Validation result */\nexport interface ValidationResult {\n  valid: boolean;\n  errors: ValidationError[];\n  warnings: ValidationWarning[];\n}\n\n/** Validation error */\nexport interface ValidationError {\n  field: string;\n  message: string;\n  code: string;\n}\n\n/** Validation warning */\nexport interface ValidationWarning {\n  field: string;\n  message: string;\n  suggestion?: string;\n}\n\n/** Investor */\nexport interface Investor {\n  id: string;\n  walletAddress: string;\n  email?: string;\n  kycStatus: 'pending' | 'verified' | 'rejected';\n  accredited: boolean;\n  jurisdiction: string;\n  investedAmount: bigint;\n  tokenBalance: bigint;\n  joinedAt: Date;\n}\n\n// ============================================================================\n// Default Configuration\n// ============================================================================\n\nexport const DEFAULT_TOKEN_CONFIG: Partial<TokenConfig> = {\n  decimals: 8,\n  transferable: true,\n  burnable: false,\n  mintable: false,\n  pausable: true,\n};\n\nexport const DEFAULT_DISTRIBUTION_CONFIG: Partial<DistributionConfig> = {\n  method: 'fixed-price',\n  priceCurrency: 'USD',\n  whitelistRequired: false,\n};\n\nexport const DEFAULT_COMPLIANCE_CONFIG: ComplianceConfig = {\n  framework: 'none',\n  kycRequired: false,\n  accreditedOnly: false,\n  jurisdictions: [],\n  blockedCountries: [],\n};\n\nexport const DEFAULT_STEPS: ModalStep[] = [\n  { id: 'asset', title: 'Asset Details', component: 'asset', completed: false, active: true },\n  { id: 'token', title: 'Token Setup', component: 'token', completed: false, active: false },\n  { id: 'distribution', title: 'Distribution', component: 'distribution', completed: false, active: false },\n  { id: 'compliance', title: 'Compliance', component: 'compliance', completed: false, active: false, optional: true },\n  { id: 'review', title: 'Review', component: 'review', completed: false, active: false },\n  { id: 'deploy', title: 'Deploy', component: 'deploy', completed: false, active: false },\n];\n\n// ============================================================================\n// Tokenization Manager\n// ============================================================================\n\nexport class TokenizationManager {\n  private project: Partial<TokenizationProject>;\n  private steps: ModalStep[];\n  private currentStepIndex: number;\n  private listeners: Set<(project: Partial<TokenizationProject>) => void> = new Set();\n\n  constructor() {\n    this.project = {\n      status: 'draft',\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.steps = DEFAULT_STEPS.map(s => ({ ...s }));\n    this.currentStepIndex = 0;\n  }\n\n  // ==========================================================================\n  // Project Management\n  // ==========================================================================\n\n  getProject(): Partial<TokenizationProject> {\n    return { ...this.project };\n  }\n\n  setAssetDetails(asset: AssetDetails): void {\n    this.project.asset = asset;\n    this.project.updatedAt = new Date();\n    this.notify();\n  }\n\n  setTokenConfig(token: TokenConfig): void {\n    this.project.token = token;\n    this.project.updatedAt = new Date();\n    this.notify();\n  }\n\n  setDistributionConfig(distribution: DistributionConfig): void {\n    this.project.distribution = distribution;\n    this.project.updatedAt = new Date();\n    this.notify();\n  }\n\n  setComplianceConfig(compliance: ComplianceConfig): void {\n    this.project.compliance = compliance;\n    this.project.updatedAt = new Date();\n    this.notify();\n  }\n\n  setRevenueDistribution(revenue: RevenueDistribution): void {\n    this.project.revenue = revenue;\n    this.project.updatedAt = new Date();\n    this.notify();\n  }\n\n  setGovernanceConfig(governance: GovernanceConfig): void {\n    this.project.governance = governance;\n    this.project.updatedAt = new Date();\n    this.notify();\n  }\n\n  // ==========================================================================\n  // Step Management\n  // ==========================================================================\n\n  getSteps(): ModalStep[] {\n    return this.steps.map(s => ({ ...s }));\n  }\n\n  getCurrentStep(): ModalStep {\n    return { ...this.steps[this.currentStepIndex] };\n  }\n\n  nextStep(): boolean {\n    if (this.currentStepIndex >= this.steps.length - 1) return false;\n\n    const validation = this.validateCurrentStep();\n    if (!validation.valid) return false;\n\n    this.steps[this.currentStepIndex].completed = true;\n    this.steps[this.currentStepIndex].active = false;\n    this.currentStepIndex++;\n    this.steps[this.currentStepIndex].active = true;\n\n    return true;\n  }\n\n  prevStep(): boolean {\n    if (this.currentStepIndex <= 0) return false;\n\n    this.steps[this.currentStepIndex].active = false;\n    this.currentStepIndex--;\n    this.steps[this.currentStepIndex].active = true;\n    this.steps[this.currentStepIndex].completed = false;\n\n    return true;\n  }\n\n  goToStep(stepId: string): boolean {\n    const index = this.steps.findIndex(s => s.id === stepId);\n    if (index < 0) return false;\n\n    // Can only go to completed steps or current step\n    if (index > this.currentStepIndex && !this.steps[index - 1]?.completed) {\n      return false;\n    }\n\n    this.steps[this.currentStepIndex].active = false;\n    this.currentStepIndex = index;\n    this.steps[this.currentStepIndex].active = true;\n\n    return true;\n  }\n\n  // ==========================================================================\n  // Validation\n  // ==========================================================================\n\n  validateCurrentStep(): ValidationResult {\n    const step = this.getCurrentStep();\n\n    switch (step.component) {\n      case 'asset':\n        return this.validateAsset();\n      case 'token':\n        return this.validateToken();\n      case 'distribution':\n        return this.validateDistribution();\n      case 'compliance':\n        return this.validateCompliance();\n      case 'review':\n        return this.validateAll();\n      default:\n        return { valid: true, errors: [], warnings: [] };\n    }\n  }\n\n  private validateAsset(): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const asset = this.project.asset;\n\n    if (!asset?.name?.trim()) {\n      errors.push({ field: 'asset.name', message: 'Asset name is required', code: 'REQUIRED' });\n    }\n\n    if (!asset?.type) {\n      errors.push({ field: 'asset.type', message: 'Asset type is required', code: 'REQUIRED' });\n    }\n\n    if (!asset?.valuation || asset.valuation <= 0n) {\n      errors.push({ field: 'asset.valuation', message: 'Valid valuation is required', code: 'INVALID' });\n    }\n\n    if (!asset?.documents?.length) {\n      warnings.push({\n        field: 'asset.documents',\n        message: 'No documents uploaded',\n        suggestion: 'Upload legal and valuation documents for investor confidence',\n      });\n    }\n\n    return { valid: errors.length === 0, errors, warnings };\n  }\n\n  private validateToken(): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const token = this.project.token;\n\n    if (!token?.name?.trim()) {\n      errors.push({ field: 'token.name', message: 'Token name is required', code: 'REQUIRED' });\n    }\n\n    if (!token?.symbol?.trim()) {\n      errors.push({ field: 'token.symbol', message: 'Token symbol is required', code: 'REQUIRED' });\n    } else if (token.symbol.length > 10) {\n      errors.push({ field: 'token.symbol', message: 'Symbol must be 10 characters or less', code: 'MAX_LENGTH' });\n    }\n\n    if (!token?.totalSupply || token.totalSupply <= 0n) {\n      errors.push({ field: 'token.totalSupply', message: 'Total supply must be greater than 0', code: 'INVALID' });\n    }\n\n    if (!token?.standard) {\n      errors.push({ field: 'token.standard', message: 'Token standard is required', code: 'REQUIRED' });\n    }\n\n    return { valid: errors.length === 0, errors, warnings };\n  }\n\n  private validateDistribution(): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const dist = this.project.distribution;\n\n    if (!dist?.pricePerToken || dist.pricePerToken <= 0n) {\n      errors.push({ field: 'distribution.pricePerToken', message: 'Price per token is required', code: 'REQUIRED' });\n    }\n\n    if (dist?.startDate && dist?.endDate && dist.startDate >= dist.endDate) {\n      errors.push({ field: 'distribution.endDate', message: 'End date must be after start date', code: 'INVALID' });\n    }\n\n    if (dist?.softCap && dist?.hardCap && dist.softCap > dist.hardCap) {\n      errors.push({ field: 'distribution.softCap', message: 'Soft cap cannot exceed hard cap', code: 'INVALID' });\n    }\n\n    return { valid: errors.length === 0, errors, warnings };\n  }\n\n  private validateCompliance(): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const compliance = this.project.compliance;\n\n    if (compliance?.framework !== 'none' && !compliance?.jurisdictions?.length) {\n      errors.push({\n        field: 'compliance.jurisdictions',\n        message: 'At least one jurisdiction required for compliance framework',\n        code: 'REQUIRED',\n      });\n    }\n\n    if (compliance?.accreditedOnly && !compliance?.kycRequired) {\n      warnings.push({\n        field: 'compliance.kycRequired',\n        message: 'KYC typically required for accredited investor verification',\n        suggestion: 'Enable KYC to verify accredited status',\n      });\n    }\n\n    return { valid: errors.length === 0, errors, warnings };\n  }\n\n  validateAll(): ValidationResult {\n    const results = [\n      this.validateAsset(),\n      this.validateToken(),\n      this.validateDistribution(),\n      this.validateCompliance(),\n    ];\n\n    return {\n      valid: results.every(r => r.valid),\n      errors: results.flatMap(r => r.errors),\n      warnings: results.flatMap(r => r.warnings),\n    };\n  }\n\n  // ==========================================================================\n  // Deployment\n  // ==========================================================================\n\n  async deploy(callback: (project: TokenizationProject) => Promise<{ contractAddress: string; txid: string }>): Promise<TokenizationProject | null> {\n    const validation = this.validateAll();\n    if (!validation.valid) return null;\n\n    try {\n      this.project.status = 'deploying';\n      this.notify();\n\n      const fullProject: TokenizationProject = {\n        id: generateProjectId(),\n        ownerId: '',\n        asset: this.project.asset!,\n        token: this.project.token!,\n        distribution: this.project.distribution!,\n        compliance: this.project.compliance || DEFAULT_COMPLIANCE_CONFIG,\n        revenue: this.project.revenue,\n        governance: this.project.governance,\n        status: 'deploying',\n        createdAt: this.project.createdAt!,\n        updatedAt: new Date(),\n      };\n\n      const result = await callback(fullProject);\n\n      fullProject.contractAddress = result.contractAddress;\n      fullProject.deploymentTxid = result.txid;\n      fullProject.status = 'active';\n      fullProject.launchedAt = new Date();\n\n      this.project = fullProject;\n      this.notify();\n\n      return fullProject;\n    } catch (error) {\n      this.project.status = 'failed';\n      this.project.error = error instanceof Error ? error.message : 'Deployment failed';\n      this.notify();\n      return null;\n    }\n  }\n\n  // ==========================================================================\n  // Subscription\n  // ==========================================================================\n\n  subscribe(callback: (project: Partial<TokenizationProject>) => void): () => void {\n    this.listeners.add(callback);\n    return () => this.listeners.delete(callback);\n  }\n\n  private notify(): void {\n    const project = this.getProject();\n    for (const listener of this.listeners) {\n      listener(project);\n    }\n  }\n\n  // ==========================================================================\n  // Reset\n  // ==========================================================================\n\n  reset(): void {\n    this.project = {\n      status: 'draft',\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.steps = DEFAULT_STEPS.map(s => ({ ...s }));\n    this.currentStepIndex = 0;\n    this.notify();\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createTokenizationManager(): TokenizationManager {\n  return new TokenizationManager();\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nfunction generateProjectId(): string {\n  return `token_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;\n}\n\nexport function formatValuation(amount: bigint, currency: string): string {\n  const num = Number(amount);\n  if (num >= 1_000_000_000) {\n    return `${currency}${(num / 1_000_000_000).toFixed(2)}B`;\n  }\n  if (num >= 1_000_000) {\n    return `${currency}${(num / 1_000_000).toFixed(2)}M`;\n  }\n  if (num >= 1_000) {\n    return `${currency}${(num / 1_000).toFixed(2)}K`;\n  }\n  return `${currency}${num.toFixed(2)}`;\n}\n\nexport function calculateTokenPrice(valuation: bigint, totalSupply: bigint): bigint {\n  if (totalSupply === 0n) return 0n;\n  return valuation / totalSupply;\n}\n\nexport function calculateOwnershipPercent(tokens: bigint, totalSupply: bigint): number {\n  if (totalSupply === 0n) return 0;\n  return Number((tokens * 10000n) / totalSupply) / 100;\n}\n\nexport function formatTokenAmount(amount: bigint, decimals: number): string {\n  const divisor = BigInt(10 ** decimals);\n  const whole = amount / divisor;\n  const fraction = amount % divisor;\n  const fractionStr = fraction.toString().padStart(decimals, '0');\n  return `${whole}.${fractionStr}`;\n}\n\nexport function parseTokenAmount(str: string, decimals: number): bigint {\n  const [whole, fraction = ''] = str.split('.');\n  const paddedFraction = fraction.padEnd(decimals, '0').slice(0, decimals);\n  return BigInt(whole) * BigInt(10 ** decimals) + BigInt(paddedFraction);\n}\n\nexport function getAssetTypeLabel(type: AssetType): string {\n  const labels: Record<AssetType, string> = {\n    'real-estate': 'Real Estate',\n    equity: 'Equity',\n    debt: 'Debt Instrument',\n    commodity: 'Commodity',\n    art: 'Art',\n    collectible: 'Collectible',\n    'intellectual-property': 'Intellectual Property',\n    'revenue-share': 'Revenue Share',\n    utility: 'Utility Token',\n    other: 'Other',\n  };\n  return labels[type] || type;\n}\n\nexport function getStandardLabel(standard: TokenStandard): string {\n  const labels: Record<TokenStandard, string> = {\n    'bsv-20': 'BSV-20',\n    'bsv-21': 'BSV-21',\n    'erc-20': 'ERC-20',\n    'erc-721': 'ERC-721',\n    'erc-1155': 'ERC-1155',\n    spl: 'Solana SPL',\n    ordinals: 'Ordinals',\n  };\n  return labels[standard] || standard;\n}\n\nexport function getNetworkLabel(network: BlockchainNetwork): string {\n  const labels: Record<BlockchainNetwork, string> = {\n    bsv: 'Bitcoin SV',\n    bitcoin: 'Bitcoin',\n    ethereum: 'Ethereum',\n    polygon: 'Polygon',\n    solana: 'Solana',\n    base: 'Base',\n  };\n  return labels[network] || network;\n}\n\nexport function estimateDeploymentCost(\n  network: BlockchainNetwork,\n  standard: TokenStandard\n): { amount: bigint; currency: string } {\n  const costs: Record<BlockchainNetwork, { amount: bigint; currency: string }> = {\n    bsv: { amount: 10000n, currency: 'satoshis' },\n    bitcoin: { amount: 50000n, currency: 'satoshis' },\n    ethereum: { amount: 50000000000000000n, currency: 'wei' },\n    polygon: { amount: 1000000000000000n, currency: 'wei' },\n    solana: { amount: 10000000n, currency: 'lamports' },\n    base: { amount: 5000000000000000n, currency: 'wei' },\n  };\n  return costs[network] || { amount: 0n, currency: 'unknown' };\n}\n"],"mappings":"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","names":[]}