{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * @b0ase/task-contracts\n *\n * Task and bounty contract system for work agreements.\n *\n * @packageDocumentation\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/** Task type */\nexport type TaskType = 'bounty' | 'gig' | 'project' | 'milestone' | 'maintenance';\n\n/** Task status */\nexport type TaskStatus =\n  | 'draft'\n  | 'open'\n  | 'assigned'\n  | 'in_progress'\n  | 'review'\n  | 'revision'\n  | 'completed'\n  | 'cancelled'\n  | 'disputed';\n\n/** Payment status */\nexport type PaymentStatus =\n  | 'pending'\n  | 'escrowed'\n  | 'partial'\n  | 'released'\n  | 'refunded'\n  | 'disputed';\n\n/** Submission status */\nexport type SubmissionStatus =\n  | 'submitted'\n  | 'accepted'\n  | 'rejected'\n  | 'revision_requested';\n\n/** Dispute status */\nexport type DisputeStatus =\n  | 'open'\n  | 'under_review'\n  | 'resolved_poster'\n  | 'resolved_worker'\n  | 'resolved_split';\n\n/** Task poster */\nexport interface TaskPoster {\n  id: string;\n  name: string;\n  walletAddress?: string;\n  rating?: number;\n  completedTasks?: number;\n}\n\n/** Task worker */\nexport interface TaskWorker {\n  id: string;\n  name: string;\n  walletAddress?: string;\n  rating?: number;\n  completedTasks?: number;\n  appliedAt: Date;\n  assignedAt?: Date;\n}\n\n/** Task milestone */\nexport interface TaskMilestone {\n  id: string;\n  title: string;\n  description?: string;\n  amount: bigint;\n  percentage: number;\n  status: TaskStatus;\n  dueDate?: Date;\n  completedAt?: Date;\n  deliverables?: TaskDeliverable[];\n}\n\n/** Task deliverable */\nexport interface TaskDeliverable {\n  id: string;\n  title: string;\n  description?: string;\n  type: 'file' | 'link' | 'text' | 'code' | 'design';\n  required: boolean;\n  submitted?: boolean;\n  submittedAt?: Date;\n  url?: string;\n  content?: string;\n  feedback?: string;\n}\n\n/** Task submission */\nexport interface TaskSubmission {\n  id: string;\n  taskId: string;\n  workerId: string;\n  milestoneId?: string;\n  status: SubmissionStatus;\n  deliverables: SubmittedDeliverable[];\n  message?: string;\n  submittedAt: Date;\n  reviewedAt?: Date;\n  feedback?: string;\n}\n\n/** Submitted deliverable */\nexport interface SubmittedDeliverable {\n  deliverableId: string;\n  type: 'file' | 'link' | 'text' | 'code' | 'design';\n  url?: string;\n  content?: string;\n  filename?: string;\n}\n\n/** Task contract */\nexport interface TaskContract {\n  id: string;\n  title: string;\n  description: string;\n  type: TaskType;\n  status: TaskStatus;\n  poster: TaskPoster;\n  worker?: TaskWorker;\n  totalAmount: bigint;\n  currency: string;\n  escrowedAmount: bigint;\n  releasedAmount: bigint;\n  paymentStatus: PaymentStatus;\n  milestones: TaskMilestone[];\n  skills: string[];\n  deadline?: Date;\n  createdAt: Date;\n  updatedAt: Date;\n  completedAt?: Date;\n  dispute?: TaskDispute;\n  metadata?: Record<string, unknown>;\n}\n\n/** Task dispute */\nexport interface TaskDispute {\n  id: string;\n  taskId: string;\n  raisedBy: 'poster' | 'worker';\n  status: DisputeStatus;\n  reason: string;\n  evidence?: string[];\n  posterClaim?: string;\n  workerClaim?: string;\n  resolution?: string;\n  splitRatio?: number;\n  createdAt: Date;\n  resolvedAt?: Date;\n}\n\n/** Task application */\nexport interface TaskApplication {\n  id: string;\n  taskId: string;\n  workerId: string;\n  workerName: string;\n  proposal: string;\n  proposedAmount?: bigint;\n  estimatedDuration?: string;\n  status: 'pending' | 'accepted' | 'rejected' | 'withdrawn';\n  appliedAt: Date;\n  respondedAt?: Date;\n}\n\n/** Create task input */\nexport interface CreateTaskInput {\n  title: string;\n  description: string;\n  type: TaskType;\n  totalAmount: bigint;\n  currency: string;\n  skills?: string[];\n  deadline?: Date;\n  milestones?: Omit<TaskMilestone, 'id' | 'status'>[];\n}\n\n// ============================================================================\n// Task Contract Manager\n// ============================================================================\n\nexport class TaskContractManager {\n  private tasks: Map<string, TaskContract> = new Map();\n  private applications: Map<string, TaskApplication[]> = new Map();\n  private submissions: Map<string, TaskSubmission[]> = new Map();\n\n  // ==========================================================================\n  // Task Management\n  // ==========================================================================\n\n  createTask(input: CreateTaskInput, poster: TaskPoster): TaskContract {\n    const id = this.generateId('task');\n    const now = new Date();\n\n    const milestones: TaskMilestone[] = input.milestones?.map((m, i) => ({\n      ...m,\n      id: this.generateId('milestone'),\n      status: 'draft',\n    })) || [{\n      id: this.generateId('milestone'),\n      title: 'Full Completion',\n      amount: input.totalAmount,\n      percentage: 100,\n      status: 'draft',\n    }];\n\n    const task: TaskContract = {\n      id,\n      title: input.title,\n      description: input.description,\n      type: input.type,\n      status: 'draft',\n      poster,\n      totalAmount: input.totalAmount,\n      currency: input.currency,\n      escrowedAmount: BigInt(0),\n      releasedAmount: BigInt(0),\n      paymentStatus: 'pending',\n      milestones,\n      skills: input.skills || [],\n      deadline: input.deadline,\n      createdAt: now,\n      updatedAt: now,\n    };\n\n    this.tasks.set(id, task);\n    this.applications.set(id, []);\n    this.submissions.set(id, []);\n\n    return task;\n  }\n\n  publishTask(taskId: string): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n    if (task.status !== 'draft') throw new Error('Task already published');\n\n    task.status = 'open';\n    task.updatedAt = new Date();\n  }\n\n  cancelTask(taskId: string): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n    if (task.status === 'completed') throw new Error('Cannot cancel completed task');\n\n    task.status = 'cancelled';\n    task.updatedAt = new Date();\n\n    // Refund escrowed amount\n    if (task.escrowedAmount > BigInt(0)) {\n      task.paymentStatus = 'refunded';\n    }\n  }\n\n  getTask(taskId: string): TaskContract | undefined {\n    return this.tasks.get(taskId);\n  }\n\n  getOpenTasks(): TaskContract[] {\n    return Array.from(this.tasks.values()).filter(t => t.status === 'open');\n  }\n\n  getTasksByPoster(posterId: string): TaskContract[] {\n    return Array.from(this.tasks.values()).filter(t => t.poster.id === posterId);\n  }\n\n  getTasksByWorker(workerId: string): TaskContract[] {\n    return Array.from(this.tasks.values()).filter(t => t.worker?.id === workerId);\n  }\n\n  // ==========================================================================\n  // Application Management\n  // ==========================================================================\n\n  applyToTask(\n    taskId: string,\n    worker: TaskWorker,\n    proposal: string,\n    proposedAmount?: bigint,\n    estimatedDuration?: string\n  ): TaskApplication {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n    if (task.status !== 'open') throw new Error('Task is not accepting applications');\n\n    const application: TaskApplication = {\n      id: this.generateId('app'),\n      taskId,\n      workerId: worker.id,\n      workerName: worker.name,\n      proposal,\n      proposedAmount,\n      estimatedDuration,\n      status: 'pending',\n      appliedAt: new Date(),\n    };\n\n    this.applications.get(taskId)!.push(application);\n    return application;\n  }\n\n  acceptApplication(taskId: string, applicationId: string): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n\n    const applications = this.applications.get(taskId)!;\n    const application = applications.find(a => a.id === applicationId);\n    if (!application) throw new Error('Application not found');\n\n    application.status = 'accepted';\n    application.respondedAt = new Date();\n\n    // Reject other applications\n    for (const app of applications) {\n      if (app.id !== applicationId && app.status === 'pending') {\n        app.status = 'rejected';\n        app.respondedAt = new Date();\n      }\n    }\n\n    // Assign worker\n    task.worker = {\n      id: application.workerId,\n      name: application.workerName,\n      appliedAt: application.appliedAt,\n      assignedAt: new Date(),\n    };\n    task.status = 'assigned';\n    task.updatedAt = new Date();\n  }\n\n  rejectApplication(taskId: string, applicationId: string): void {\n    const applications = this.applications.get(taskId);\n    if (!applications) throw new Error('Task not found');\n\n    const application = applications.find(a => a.id === applicationId);\n    if (!application) throw new Error('Application not found');\n\n    application.status = 'rejected';\n    application.respondedAt = new Date();\n  }\n\n  getApplications(taskId: string): TaskApplication[] {\n    return this.applications.get(taskId) || [];\n  }\n\n  // ==========================================================================\n  // Work Management\n  // ==========================================================================\n\n  startWork(taskId: string): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n    if (!task.worker) throw new Error('No worker assigned');\n    if (task.status !== 'assigned') throw new Error('Task not in assigned state');\n\n    task.status = 'in_progress';\n    task.milestones[0].status = 'in_progress';\n    task.updatedAt = new Date();\n  }\n\n  submitWork(\n    taskId: string,\n    workerId: string,\n    deliverables: SubmittedDeliverable[],\n    message?: string,\n    milestoneId?: string\n  ): TaskSubmission {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n    if (task.worker?.id !== workerId) throw new Error('Not the assigned worker');\n\n    const submission: TaskSubmission = {\n      id: this.generateId('sub'),\n      taskId,\n      workerId,\n      milestoneId,\n      status: 'submitted',\n      deliverables,\n      message,\n      submittedAt: new Date(),\n    };\n\n    this.submissions.get(taskId)!.push(submission);\n    task.status = 'review';\n    task.updatedAt = new Date();\n\n    return submission;\n  }\n\n  approveSubmission(taskId: string, submissionId: string, feedback?: string): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n\n    const submissions = this.submissions.get(taskId)!;\n    const submission = submissions.find(s => s.id === submissionId);\n    if (!submission) throw new Error('Submission not found');\n\n    submission.status = 'accepted';\n    submission.reviewedAt = new Date();\n    submission.feedback = feedback;\n\n    // Complete milestone or task\n    if (submission.milestoneId) {\n      const milestone = task.milestones.find(m => m.id === submission.milestoneId);\n      if (milestone) {\n        milestone.status = 'completed';\n        milestone.completedAt = new Date();\n      }\n\n      // Check if all milestones complete\n      const allComplete = task.milestones.every(m => m.status === 'completed');\n      if (allComplete) {\n        task.status = 'completed';\n        task.completedAt = new Date();\n      }\n    } else {\n      task.status = 'completed';\n      task.completedAt = new Date();\n    }\n\n    task.updatedAt = new Date();\n  }\n\n  requestRevision(taskId: string, submissionId: string, feedback: string): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n\n    const submissions = this.submissions.get(taskId)!;\n    const submission = submissions.find(s => s.id === submissionId);\n    if (!submission) throw new Error('Submission not found');\n\n    submission.status = 'revision_requested';\n    submission.reviewedAt = new Date();\n    submission.feedback = feedback;\n\n    task.status = 'revision';\n    task.updatedAt = new Date();\n  }\n\n  getSubmissions(taskId: string): TaskSubmission[] {\n    return this.submissions.get(taskId) || [];\n  }\n\n  // ==========================================================================\n  // Payment Management\n  // ==========================================================================\n\n  escrowPayment(taskId: string, amount: bigint): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n\n    task.escrowedAmount += amount;\n    task.paymentStatus = task.escrowedAmount >= task.totalAmount ? 'escrowed' : 'partial';\n    task.updatedAt = new Date();\n  }\n\n  releasePayment(taskId: string, amount: bigint, milestoneId?: string): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n\n    if (amount > task.escrowedAmount - task.releasedAmount) {\n      throw new Error('Insufficient escrowed funds');\n    }\n\n    task.releasedAmount += amount;\n    if (task.releasedAmount >= task.totalAmount) {\n      task.paymentStatus = 'released';\n    }\n    task.updatedAt = new Date();\n  }\n\n  refundPayment(taskId: string, amount: bigint): void {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n\n    if (amount > task.escrowedAmount - task.releasedAmount) {\n      throw new Error('Insufficient funds to refund');\n    }\n\n    task.escrowedAmount -= amount;\n    if (task.escrowedAmount === BigInt(0)) {\n      task.paymentStatus = 'refunded';\n    }\n    task.updatedAt = new Date();\n  }\n\n  // ==========================================================================\n  // Dispute Management\n  // ==========================================================================\n\n  raiseDispute(\n    taskId: string,\n    raisedBy: 'poster' | 'worker',\n    reason: string,\n    evidence?: string[]\n  ): TaskDispute {\n    const task = this.tasks.get(taskId);\n    if (!task) throw new Error('Task not found');\n    if (task.dispute) throw new Error('Dispute already exists');\n\n    const dispute: TaskDispute = {\n      id: this.generateId('dispute'),\n      taskId,\n      raisedBy,\n      status: 'open',\n      reason,\n      evidence,\n      createdAt: new Date(),\n    };\n\n    task.dispute = dispute;\n    task.status = 'disputed';\n    task.paymentStatus = 'disputed';\n    task.updatedAt = new Date();\n\n    return dispute;\n  }\n\n  resolveDispute(\n    taskId: string,\n    resolution: 'poster' | 'worker' | 'split',\n    splitRatio?: number,\n    resolutionNote?: string\n  ): void {\n    const task = this.tasks.get(taskId);\n    if (!task?.dispute) throw new Error('No dispute found');\n\n    const dispute = task.dispute;\n    dispute.resolution = resolutionNote;\n    dispute.resolvedAt = new Date();\n\n    switch (resolution) {\n      case 'poster':\n        dispute.status = 'resolved_poster';\n        // Refund to poster\n        task.paymentStatus = 'refunded';\n        break;\n      case 'worker':\n        dispute.status = 'resolved_worker';\n        // Release to worker\n        task.paymentStatus = 'released';\n        task.releasedAmount = task.escrowedAmount;\n        break;\n      case 'split':\n        dispute.status = 'resolved_split';\n        dispute.splitRatio = splitRatio || 50;\n        // Split payment\n        const workerShare = (task.escrowedAmount * BigInt(dispute.splitRatio)) / BigInt(100);\n        task.releasedAmount = workerShare;\n        task.paymentStatus = 'released';\n        break;\n    }\n\n    task.status = 'completed';\n    task.completedAt = new Date();\n    task.updatedAt = new Date();\n  }\n\n  // ==========================================================================\n  // Helpers\n  // ==========================================================================\n\n  private generateId(prefix: string): string {\n    return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\nexport function createTaskContractManager(): TaskContractManager {\n  return new TaskContractManager();\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nexport function calculateMilestoneProgress(task: TaskContract): number {\n  if (task.milestones.length === 0) return 0;\n  const completed = task.milestones.filter(m => m.status === 'completed').length;\n  return (completed / task.milestones.length) * 100;\n}\n\nexport function calculatePaymentProgress(task: TaskContract): number {\n  if (task.totalAmount === BigInt(0)) return 0;\n  return Number((task.releasedAmount * BigInt(100)) / task.totalAmount);\n}\n\nexport function formatTaskAmount(amount: bigint, decimals: number = 8): string {\n  const divisor = BigInt(10 ** decimals);\n  const whole = amount / divisor;\n  const fraction = amount % divisor;\n  if (fraction === BigInt(0)) return whole.toString();\n  return `${whole}.${fraction.toString().padStart(decimals, '0').replace(/0+$/, '')}`;\n}\n\nexport function isTaskOverdue(task: TaskContract): boolean {\n  if (!task.deadline) return false;\n  return new Date() > task.deadline && !['completed', 'cancelled'].includes(task.status);\n}\n\nexport function getTaskStatusColor(status: TaskStatus): string {\n  const colors: Record<TaskStatus, string> = {\n    draft: '#6B7280',\n    open: '#3B82F6',\n    assigned: '#8B5CF6',\n    in_progress: '#F59E0B',\n    review: '#10B981',\n    revision: '#F97316',\n    completed: '#22C55E',\n    cancelled: '#EF4444',\n    disputed: '#DC2626',\n  };\n  return colors[status];\n}\n"],"mappings":"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","names":[]}